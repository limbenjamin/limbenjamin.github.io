!function i(a,l,u){function d(n,e){if(!l[n]){if(!a[n]){var t="function"==typeof require&&require;if(!e&&t)return t(n,!0);if(s)return s(n,!0);var r=new Error("Cannot find module '"+n+"'");throw r.code="MODULE_NOT_FOUND",r}var o=l[n]={exports:{}};a[n][0].call(o.exports,function(e){return d(a[n][1][e]||e)},o,o.exports,i,a,l,u)}return l[n].exports}for(var s="function"==typeof require&&require,e=0;e<u.length;e++)d(u[e]);return d}({1:[function(e,n,t){OO||(OO={})},{}],2:[function(e,n,t){e("./InitOO.js"),window._||(window._=e("underscore")),OO._||(OO._=window._.noConflict())},{"./InitOO.js":1,underscore:5}],3:[function(e,n,t){var r,o;r=OO,o=OO._,r.STATE={LOADING:"loading",READY:"ready",PLAYING:"playing",PAUSED:"paused",BUFFERING:"buffering",ERROR:"error",DESTROYED:"destroyed",__end_marker:!0},r.EVENTS={PLAYER_CREATED:"playerCreated",PLAYER_EMBEDDED:"playerEmbedded",SET_EMBED_CODE:"setEmbedCode",HEVC_CHECKED:"hevcChecked",SET_EMBED_CODE_AFTER_OOYALA_AD:"setEmbedCodeAfterOoyalaAd",EMBED_CODE_CHANGED:"embedCodeChanged",SET_ASSET:"setAsset",ASSET_CHANGED:"assetChanged",UPDATE_ASSET:"updateAsset",ASSET_UPDATED:"assetUpdated",AUTH_TOKEN_CHANGED:"authTokenChanged",GUID_SET:"guidSet",WILL_FETCH_PLAYER_XML:"willFetchPlayerXml",PLAYER_XML_FETCHED:"playerXmlFetched",WILL_FETCH_CONTENT_TREE:"willFetchContentTree",SAVE_PLAYER_SETTINGS:"savePlayerSettings",CONTENT_TREE_FETCHED:"contentTreeFetched",WILL_FETCH_METADATA:"willFetchMetadata",METADATA_FETCHED:"metadataFetched",SKIN_METADATA_FETCHED:"skinMetadataFetched",THUMBNAILS_FETCHED:"thumbnailsFetched",WILL_FETCH_AUTHORIZATION:"willFetchAuthorization",AUTHORIZATION_FETCHED:"authorizationFetched",WILL_FETCH_AD_AUTHORIZATION:"willFetchAdAuthorization",AD_AUTHORIZATION_FETCHED:"adAuthorizationFetched",CAN_SEEK:"canSeek",WILL_RESUME_MAIN_VIDEO:"willResumeMainVideo",PLAYBACK_READY:"playbackReady",INITIAL_PLAY:"initialPlay",WILL_PLAY:"willPlay",REPLAY:"replay",SET_PLAYBACK_SPEED:"setPlaybackSpeed",PLAYBACK_SPEED_CHANGED:"playbackSpeedChanged",PLAYHEAD_TIME_CHANGED:"playheadTimeChanged",BUFFERING:"buffering",BUFFERED:"buffered",DOWNLOADING:"downloading",BITRATE_INFO_AVAILABLE:"bitrateInfoAvailable",SET_TARGET_BITRATE:"setTargetBitrate",BITRATE_CHANGED:"bitrateChanged",CLOSED_CAPTIONS_INFO_AVAILABLE:"closedCaptionsInfoAvailable",SET_CLOSED_CAPTIONS_LANGUAGE:"setClosedCaptionsLanguage",SKIN_UI_LANGUAGE:"skinUiLanguage",CLOSED_CAPTION_CUE_CHANGED:"closedCaptionCueChanged",ASSET_DIMENSION:"assetDimension",SCRUBBING:"scrubbing",SCRUBBED:"scrubbed",SEEK:"seek",SEEKED:"seeked",PLAY:"play",PLAYING:"playing",PLAY_FAILED:"playFailed",PAUSE:"pause",PAUSED:"paused",PLAYED:"played",DISPLAY_CUE_POINTS:"displayCuePoints",INSERT_CUE_POINT:"insertCuePoint",RESET_CUE_POINTS:"resetCuePoints",WILL_CHANGE_FULLSCREEN:"willChangeFullscreen",FULLSCREEN_CHANGED:"fullscreenChanged",SIZE_CHANGED:"sizeChanged",CHANGE_VOLUME:"changeVolume",VOLUME_CHANGED:"volumeChanged",CHANGE_MUTE_STATE:"changeMuteState",MUTE_STATE_CHANGED:"muteStateChanged",CONTROLS_SHOWN:"controlsShown",CONTROLS_HIDDEN:"controlsHidden",END_SCREEN_SHOWN:"endScreenShown",ERROR:"error",API_ERROR:"apiError",BITRATE_INITIAL:"bitrateInitial",BITRATE_FIVE_SEC:"bitrateFiveSec",BITRATE_STABLE:"bitrateStable",PLAYBACK_START_ERROR:"playbackStartError",PLAYBACK_MIDSTREAM_ERROR:"playbackMidstreamError",PLUGIN_LOADED:"pluginLoaded",VC_PLUGIN_ERROR:"videoPluginError",INITIAL_PLAY_STARTING:"initialPlayStarting",REQUEST_PREVIOUS_VIDEO:"requestPreviousVideo",REQUEST_NEXT_VIDEO:"requestNextVideo",POSITION_IN_PLAYLIST_DETERMINED:"positionInPlaylistDetermined",DESTROY:"destroy",WILL_PLAY_FROM_BEGINNING:"willPlayFromBeginning",DISABLE_PLAYBACK_CONTROLS:"disablePlaybackControls",ENABLE_PLAYBACK_CONTROLS:"enablePlaybackControls",VC_READY:"videoControllerReady",VC_CREATE_VIDEO_ELEMENT:"videoControllerCreateVideoElement",VC_UPDATE_ELEMENT_STREAM:"videoControllerUpdateElementStream",VC_VIDEO_ELEMENT_CREATED:"videoControllerVideoElementCreated",VC_FOCUS_VIDEO_ELEMENT:"videoControllerFocusVideoElement",VC_VIDEO_ELEMENT_IN_FOCUS:"videoControllerVideoElementInFocus",VC_VIDEO_ELEMENT_LOST_FOCUS:"videoControllerVideoElementLostFocus",VC_DISPOSE_VIDEO_ELEMENT:"videoControllerDisposeVideoElement",VC_VIDEO_ELEMENT_DISPOSED:"videoControllerVideoElementDisposed",VC_SET_VIDEO_STREAMS:"videoControllerSetVideoStreams",VC_ERROR:"videoControllerError",VC_SET_INITIAL_TIME:"videoSetInitialTime",VC_PLAY:"videoPlay",PLAY_VIDEO_ELEMENT:"playVideoElement",VC_WILL_PLAY:"videoWillPlay",VC_PLAYING:"videoPlaying",VC_PLAYED:"videoPlayed",VC_PLAY_FAILED:"videoPlayFailed",VC_PAUSE:"videoPause",VC_PAUSED:"videoPaused",VC_SEEK:"videoSeek",VC_SEEKING:"videoSeeking",VC_SEEKED:"videoSeeked",VC_PRELOAD:"videoPreload",VC_RELOAD:"videoReload",VC_TAG_FOUND:"videoTagFound",INITIAL_PLAY_STARTING:"initialPlayStarting",AD_SDK_LOADED:"adSdkLoaded",AD_SDK_LOAD_FAILED:"adSdkLoadFailed",AD_REQUEST:"adRequest",AD_REQUEST_SUCCESS:"adRequestSuccess",AD_REQUEST_ERROR:"adRequestError",AD_REQUEST_EMPTY:"adRequestEmpty",AD_PLAYBACK_ERROR:"adPlaybackError",AD_SDK_IMPRESSION:"adSdkImpression",AD_COMPLETED:"adCompleted",WILL_FETCH_ADS:"willFetchAds",DISABLE_SEEKING:"disableSeeking",ENABLE_SEEKING:"enableSeeking",WILL_PLAY_ADS:"willPlayAds",WILL_PLAY_SINGLE_AD:"willPlaySingleAd",WILL_PAUSE_ADS:"willPauseAds",WILL_RESUME_ADS:"willResumeAds",WILL_PLAY_NONLINEAR_AD:"willPlayNonlinearAd",PLAY_NONLINEAR_AD:"playNonlinearAd",NONLINEAR_AD_DISPLAYED:"nonlinearAdDisplayed",ADS_PLAYED:"adsPlayed",SINGLE_AD_PLAYED:"singleAdPlayed",ADS_ERROR:"adsError",ADS_CLICKED:"adsClicked",FIRST_AD_FETCHED:"firstAdFetched",AD_CONFIG_READY:"adConfigReady",WILL_SHOW_COMPANION_ADS:"willShowCompanionAds",AD_FETCH_FAILED:"adFetchFailed",MIDROLL_PLAY_FAILED:"midrollPlayFailed",SKIP_AD:"skipAd",UPDATE_AD_COUNTDOWN:"updateAdCountdown",REPORT_EXPERIMENT_VARIATIONS:"reportExperimentVariations",FETCH_STYLE:"fetchStyle",STYLE_FETCHED:"styleFetched",SET_STYLE:"setStyle",USE_SERVER_SIDE_HLS_ADS:"useServerSideHlsAds",LOAD_ALL_VAST_ADS:"loadAllVastAds",ADS_FILTERED:"adsFiltered",ADS_MANAGER_HANDLING_ADS:"adsManagerHandlingAds",ADS_MANAGER_FINISHED_ADS:"adsManagerFinishedAds",OVERLAY_RENDERING:"overlayRendering",SHOW_AD_CONTROLS:"showAdControls",SHOW_AD_MARQUEE:"showAdMarquee",SDK_AD_EVENT:"sdkAdEvent",PAGE_UNLOAD_REQUESTED:"pageUnloadRequested",PAGE_PROBABLY_UNLOADING:"pageProbablyUnloading",REPORT_DISCOVERY_IMPRESSION:"reportDiscoveryImpression",REPORT_DISCOVERY_CLICK:"reportDiscoveryClick",DISCOVERY_API:{SEND_DISPLAY_EVENT:"sendDisplayEvent",SEND_CLICK_EVENT:"sendClickEvent"},PLAYLISTS_READY:"playlistReady",VIDEO_TYPE_CHANGED:"videoTypeChanged",UI_READY:"uiReady",__end_marker:!0},r.ERROR={API:{NETWORK:"network",SAS:{GENERIC:"sas",GEO:"geo",DOMAIN:"domain",FUTURE:"future",PAST:"past",DEVICE:"device",PROXY:"proxy",CONCURRENT_STREAMS:"concurrent_streams",INVALID_HEARTBEAT:"invalid_heartbeat",ERROR_DEVICE_INVALID_AUTH_TOKEN:"device_invalid_auth_token",ERROR_DEVICE_LIMIT_REACHED:"device_limit_reached",ERROR_DEVICE_BINDING_FAILED:"device_binding_failed",ERROR_DEVICE_ID_TOO_LONG:"device_id_too_long",ERROR_DRM_RIGHTS_SERVER_ERROR:"drm_server_error",ERROR_DRM_GENERAL_FAILURE:"drm_general_failure",ERROR_INVALID_ENTITLEMENTS:"invalid_entitlements"},CONTENT_TREE:"content_tree",METADATA:"metadata"},PLAYBACK:{GENERIC:"playback",STREAM:"stream",LIVESTREAM:"livestream",NETWORK:"network_error"},CHROMECAST:{MANIFEST:"chromecast_manifest",MEDIAKEYS:"chromecast_mediakeys",NETWORK:"chromecast_network",PLAYBACK:"chromecast_playback"},UNPLAYABLE_CONTENT:"unplayable_content",INVALID_EXTERNAL_ID:"invalid_external_id",EMPTY_CHANNEL:"empty_channel",EMPTY_CHANNEL_SET:"empty_channel_set",CHANNEL_CONTENT:"channel_content",VC:{UNSUPPORTED_ENCODING:"unsupported_encoding",UNABLE_TO_CREATE_VIDEO_ELEMENT:"unable_to_create_video_element"},MEDIA:{MEDIA_ERR_ABORTED:"aborted",MEDIA_ERR_NETWORK:"network_error",MEDIA_ERR_DECODE:"decode_error",MEDIA_ERR_SRC_NOT_SUPPORTED:"unsupported_source"}},r.URLS={VAST_PROXY:o.template("http://player.ooyala.com/nuplayer/mobile_vast_ads_proxy?callback=<%=cb%>&embed_code=<%=embedCode%>&expires=<%=expires%>&tag_url=<%=tagUrl%>"),EXTERNAL_ID:o.template("<%=server%>/player_api/v1/content_tree/external_id/<%=pcode%>/<%=externalId%>"),CONTENT_TREE:o.template("<%=server%>/player_api/v1/content_tree/embed_code/<%=pcode%>/<%=embedCode%>"),METADATA:o.template("<%=server%>/player_api/v1/metadata/embed_code/<%=playerBrandingId%>/<%=embedCode%>?videoPcode=<%=pcode%>"),SAS:o.template("<%=server%>/player_api/v1/authorization/embed_code/<%=pcode%>/<%=embedCode%>"),ANALYTICS:o.template("<%=server%>/reporter.js"),THUMBNAILS:o.template("<%=server%>/api/v1/thumbnail_images/<%=embedCode%>"),__end_marker:!0},r.TRACKING_LEVEL={DEFAULT:"default",ANONYMOUS:"anonymous",DISABLED:"disabled"},r.PLUGINS={ADS:"ads",VIDEO:"video",ANALYTICS:"analytics",PLAYLIST:"playlist",SKIN:"skin"},r.VIDEO={MAIN:"main",ADS:"ads",ENCODING:{DRM:{HLS:"hls_drm",DASH:"dash_drm"},AUDIO:"audio",AUDIO_OGG:"audio_ogg",AUDIO_M4A:"audio_m4a",AUDIO_HLS:"audio_hls",DASH:"dash",HDS:"hds",HLS:"hls",IMA:"ima",PULSE:"pulse",MP4:"mp4",YOUTUBE:"youtube",RTMP:"rtmp",SMOOTH:"smooth",WEBM:"webm",AKAMAI_HD_VOD:"akamai_hd_vod",AKAMAI_HD2_VOD_HLS:"akamai_hd2_vod_hls",AKAMAI_HD2_VOD_HDS:"akamai_hd2_vod_hds",AKAMAI_HD2_HDS:"akamai_hd2_hds",AKAMAI_HD2_HLS:"akamai_hd2_hls",FAXS_HLS:"faxs_hls",WIDEVINE_HLS:"wv_hls",WIDEVINE_MP4:"wv_mp4",WIDEVINE_WVM:"wv_wvm",UNKNOWN:"unknown"},FEATURE:{CLOSED_CAPTIONS:"closedCaptions",VIDEO_OBJECT_SHARING_GIVE:"videoObjectSharingGive",VIDEO_OBJECT_SHARING_TAKE:"videoObjectSharingTake",BITRATE_CONTROL:"bitrateControl"},TECHNOLOGY:{FLASH:"flash",HTML5:"html5",MIXED:"mixed",OTHER:"other"}},r.CSS={VISIBLE_POSITION:"0px",INVISIBLE_POSITION:"-100000px",VISIBLE_DISPLAY:"block",INVISIBLE_DISPLAY:"none",VIDEO_Z_INDEX:1e4,SUPER_Z_INDEX:2e4,ALICE_SKIN_Z_INDEX:11e3,OVERLAY_Z_INDEX:10500,TRANSPARENT_COLOR:"rgba(255, 255, 255, 0)",__end_marker:!0},r.TEMPLATES={RANDOM_PLACE_HOLDER:["[place_random_number_here]","<now>","[timestamp]","<rand-num>","[cache_buster]","[random]"],REFERAK_PLACE_HOLDER:["[referrer_url]","[LR_URL]","[description_url]"],EMBED_CODE_PLACE_HOLDER:["[oo_embedcode]"],MESSAGE:'                  <table width="100%" height="100%" bgcolor="black" style="padding-left:55px; padding-right:55px;                   background-color:black; color: white;">                  <tbody>                  <tr valign="middle">                  <td align="right"><span style="font-family:Arial; font-size:20px">                  <%= message %>                  </span></td></tr></tbody></table>                  ',__end_marker:!0},r.CONSTANTS={AD_PLAY_COUNT_KEY:"oo_ad_play_count",AD_ID_TO_PLAY_COUNT_DIVIDER:":",AD_PLAY_COUNT_DIVIDER:"|",MAX_AD_PLAY_COUNT_HISTORY_LENGTH:20,CONTROLS_BOTTOM_PADDING:10,SEEK_TO_END_LIMIT:3,PLAYER_TYPE:{VIDEO:"video",AUDIO:"audio"},HEVC_CODEC:{HEV1:"hev1",HVC1:"hvc1"},CLOSED_CAPTIONS:{SHOWING:"showing",HIDDEN:"hidden",DISABLED:"disabled"},OOYALA_PLAYER_SETTINGS_KEY:"ooyala_player_settings",PLAYBACK_SPEED:{MIN:.5,MAX:2},__end_marker:!0}},{}],4:[function(e,n,t){!function(l,i,o){l.getRandomString=function(){return Math.random().toString(36).substring(7)},l.safeClone=function(e){if(i.isNumber(e)||i.isString(e)||i.isBoolean(e)||i.isFunction(e)||i.isNull(e)||i.isUndefined(e))return e;var n=e instanceof Array?[]:{};try{o.extend(!0,n,e)}catch(e){l.log("deep clone error",e)}return n},l.d=function(){l.isDebug&&l.log.apply(l,arguments),l.$("#OOYALA_DEBUG_CONSOLE").append(JSON.stringify(l.safeClone(arguments))+"<br>")},l.inherit=function(e,n){if("function"!=typeof e)return l.log("invalid inherit, ParentClass need to be a class",e),null;var t=function(){e.apply(this,arguments),"function"==typeof n&&n.apply(this,arguments)},r=new e;return l._.extend(t.prototype,r),t.prototype.parentClass=r,t};var r={};l.attachStyle=function(e,n){var t=o('<style type="text/css">'+e+"</style>").appendTo("head");r[n]=r[n]||[],r[n].push(t)},l.removeStyles=function(e){l._.each(r[e],function(e){e.remove()})},l.getInnerProperty=function(e,n){for(var t=e,r=n;0<r.length;){var o=r.shift();if(i.isNull(t)||!i.isObject(t)||i.isFunction(t)||i.isArray(t))return null;t=t[o]}return t},l.formatSeconds=function(e){var n=parseInt(e,10)%60,t=parseInt(e/3600,10),r=parseInt((e-3600*t)/60,10);return t<10&&(t="0"+t),r<10&&(r="0"+r),n<10&&(n="0"+n),0<parseInt(t,10)?t+":"+r+":"+n:r+":"+n},l.timeStringToSeconds=function(e){var n=(e||"").split(":");return i.reduce(n,function(e,n){return 60*e+parseInt(n,10)},0)},l.leftPadding=function(e,n){for(var t=e?e.toString():"";t.length<n;)t="0"+t;return t},l.getColorString=function(e){return"#"+l.leftPadding(e.toString(16),6).toUpperCase()},l.hexToRgb=function(e){return[(16711680&e)>>16,(65280&e)>>8,255&e]},l.changeColor=function(e,n,t){var r=t?Math.max:Math.min,o=t?0:255,i=Math.round(255*n)*(t?-1:1),a=l.hexToRgb(e);return[l.leftPadding(r(a[0]+i,o).toString(16),2),l.leftPadding(r(a[1]+i,o).toString(16),2),l.leftPadding(r(a[2]+i,o).toString(16),2)].join("")},l.decode64=function(e){e=e.replace(/\n/g,"");var n,t="",r=0,o=[];if(window.atob)return atob(e);do{for(n=0;n<4;n++)o[n]="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(e.charAt(r++));t+=String.fromCharCode(o[0]<<2|o[1]>>4,64==o[2]?0:(15&o[1])<<4|o[2]>>2,64==o[3]?0:(3&o[2])<<6|o[3])}while(r<e.length);return t.replace(/\0/g,"")},l.pixelPing=function(e){var n=new Image;n.onerror=n.onabort=function(){l.d("onerror:",e)},n.src=l.getNormalizedTagUrl(e)},l.pixelPings=function(e){i.isEmpty(e)||i.each(e,function(e){l.pixelPing(e)},this)},l.stringToBoolean=function(e){return"string"==typeof e?-1<e.toLowerCase().indexOf("true")||-1<e.toLowerCase().indexOf("yes"):!!e},l.regexEscape=function(e){return e.replace(/[<>()\[\]{}]/g,"\\$&")},l.getNormalizedTagUrl=function(r,e){var n=(new Date).getTime(),t=escape(document.URL),o=function(e,t){i.each(e,function(e){var n=new RegExp("("+l.regexEscape(e)+")","gi");r=r.replace(n,t)},this)};return o(l.TEMPLATES.RANDOM_PLACE_HOLDER,n),o(l.TEMPLATES.REFERAK_PLACE_HOLDER,t),e&&o(l.TEMPLATES.EMBED_CODE_PLACE_HOLDER,e),r},l.safeSeekRange=function(e){return{start:0<e.length?e.start(0):0,end:0<e.length?e.end(0):0}},l.loadedJS=l.loadedJS||{},l.jsOnSuccessList=l.jsOnSuccessList||{},l.safeFuncCall=function(e){if("function"==typeof e)try{e.apply()}catch(e){l.log("Can not invoke function!",e)}},l.loadScriptOnce=function(e,n,t,r){return l.jsOnSuccessList[e]=l.jsOnSuccessList[e]||[],l.loadedJS[e]?("loaded"===l.loadedJS[e]?l.safeFuncCall(n):"loading"===l.loadedJS[e]&&l.jsOnSuccessList[e].unshift(n),!1):(l.loadedJS[e]="loading",o.ajax({url:e,type:"GET",cache:!0,dataType:"script",timeout:r||15e3,success:function(){l.loadedJS[e]="loaded",l.jsOnSuccessList[e].unshift(n),l._.each(l.jsOnSuccessList[e],function(e){l.safeFuncCall(e)},this),l.jsOnSuccessList[e]=[]},error:function(){l.safeFuncCall(t)}}),!0)};try{l.localStorage=window.localStorage}catch(e){l.log(e)}l.localStorage||(l.localStorage={getItem:function(e){return e&&this.hasOwnProperty(e)?unescape(document.cookie.replace(new RegExp("(?:^|.*;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*((?:[^;](?!;))*[^;]?).*"),"$1")):null},key:function(e){return unescape(document.cookie.replace(/\s*\=(?:.(?!;))*$/,"").split(/\s*\=(?:[^;](?!;))*[^;]?;\s*/)[e])},setItem:function(e,n){e&&(document.cookie=escape(e)+"="+escape(n)+"; expires=Tue, 19 Jan 2038 03:14:07 GMT; path=/",this.length=document.cookie.match(/\=/g).length)},length:0,removeItem:function(e){e&&this.hasOwnProperty(e)&&(document.cookie=escape(e)+"=; expires=Thu, 01 Jan 1970 00:00:00 GMT; path=/",this.length--)},hasOwnProperty:function(e){return new RegExp("(?:^|;\\s*)"+escape(e).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=").test(document.cookie)}},l.localStorage.length=(document.cookie.match(/\=/g)||l.localStorage).length),l.setItem=function(e,n){try{l.localStorage.setItem(e,n)}catch(e){l.log(e)}},l.ensureNumber=function(e,n){var t;return(null===e||i.isArray(e))&&(e=NaN),t=i.isNumber(e)?e:Number(e),isFinite(t)?t:void 0===n?null:n},l.JSON=window.JSON}(OO,OO._,OO.$)},{}],5:[function(e,X,J){(function(z){!function(){var e="object"==typeof self&&self.self===self&&self||"object"==typeof z&&z.global===z&&z||this||{},n=e._,r=Array.prototype,a=Object.prototype,c="undefined"!=typeof Symbol?Symbol.prototype:null,o=r.push,u=r.slice,E=a.toString,i=a.hasOwnProperty,t=Array.isArray,l=Object.keys,d=Object.create,s=function(){},A=function(e){return e instanceof A?e:this instanceof A?void(this._wrapped=e):new A(e)};void 0===J||J.nodeType?e._=A:(void 0!==X&&!X.nodeType&&X.exports&&(J=X.exports=A),J._=A),A.VERSION="1.9.1";var f,_=function(o,i,e){if(void 0===i)return o;switch(null==e?3:e){case 1:return function(e){return o.call(i,e)};case 3:return function(e,n,t){return o.call(i,e,n,t)};case 4:return function(e,n,t,r){return o.call(i,e,n,t,r)}}return function(){return o.apply(i,arguments)}},p=function(e,n,t){return A.iteratee!==f?A.iteratee(e,n):null==e?A.identity:A.isFunction(e)?_(e,n,t):A.isObject(e)&&!A.isArray(e)?A.matcher(e):A.property(e)};A.iteratee=f=function(e,n){return p(e,n,1/0)};var g=function(o,i){return i=null==i?o.length-1:+i,function(){for(var e=Math.max(arguments.length-i,0),n=Array(e),t=0;t<e;t++)n[t]=arguments[t+i];switch(i){case 0:return o.call(this,n);case 1:return o.call(this,arguments[0],n);case 2:return o.call(this,arguments[0],arguments[1],n)}var r=Array(i+1);for(t=0;t<i;t++)r[t]=arguments[t];return r[i]=n,o.apply(this,r)}},T=function(e){if(!A.isObject(e))return{};if(d)return d(e);s.prototype=e;var n=new s;return s.prototype=null,n},I=function(n){return function(e){return null==e?void 0:e[n]}},O=function(e,n){return null!=e&&i.call(e,n)},m=function(e,n){for(var t=n.length,r=0;r<t;r++){if(null==e)return;e=e[n[r]]}return t?e:void 0},S=Math.pow(2,53)-1,h=I("length"),y=function(e){var n=h(e);return"number"==typeof n&&0<=n&&n<=S};A.each=A.forEach=function(e,n,t){var r,o;if(n=_(n,t),y(e))for(r=0,o=e.length;r<o;r++)n(e[r],r,e);else{var i=A.keys(e);for(r=0,o=i.length;r<o;r++)n(e[i[r]],i[r],e)}return e},A.map=A.collect=function(e,n,t){n=p(n,t);for(var r=!y(e)&&A.keys(e),o=(r||e).length,i=Array(o),a=0;a<o;a++){var l=r?r[a]:a;i[a]=n(e[l],l,e)}return i};var D=function(u){return function(e,n,t,r){var o=3<=arguments.length;return function(e,n,t,r){var o=!y(e)&&A.keys(e),i=(o||e).length,a=0<u?0:i-1;for(r||(t=e[o?o[a]:a],a+=u);0<=a&&a<i;a+=u){var l=o?o[a]:a;t=n(t,e[l],l,e)}return t}(e,_(n,r,4),t,o)}};A.reduce=A.foldl=A.inject=D(1),A.reduceRight=A.foldr=D(-1),A.find=A.detect=function(e,n,t){var r=(y(e)?A.findIndex:A.findKey)(e,n,t);if(void 0!==r&&-1!==r)return e[r]},A.filter=A.select=function(e,r,n){var o=[];return r=p(r,n),A.each(e,function(e,n,t){r(e,n,t)&&o.push(e)}),o},A.reject=function(e,n,t){return A.filter(e,A.negate(p(n)),t)},A.every=A.all=function(e,n,t){n=p(n,t);for(var r=!y(e)&&A.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(!n(e[a],a,e))return!1}return!0},A.some=A.any=function(e,n,t){n=p(n,t);for(var r=!y(e)&&A.keys(e),o=(r||e).length,i=0;i<o;i++){var a=r?r[i]:i;if(n(e[a],a,e))return!0}return!1},A.contains=A.includes=A.include=function(e,n,t,r){return y(e)||(e=A.values(e)),("number"!=typeof t||r)&&(t=0),0<=A.indexOf(e,n,t)},A.invoke=g(function(e,t,r){var o,i;return A.isFunction(t)?i=t:A.isArray(t)&&(o=t.slice(0,-1),t=t[t.length-1]),A.map(e,function(e){var n=i;if(!n){if(o&&o.length&&(e=m(e,o)),null==e)return;n=e[t]}return null==n?n:n.apply(e,r)})}),A.pluck=function(e,n){return A.map(e,A.property(n))},A.where=function(e,n){return A.filter(e,A.matcher(n))},A.findWhere=function(e,n){return A.find(e,A.matcher(n))},A.max=function(e,r,n){var t,o,i=-1/0,a=-1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var l=0,u=(e=y(e)?e:A.values(e)).length;l<u;l++)null!=(t=e[l])&&i<t&&(i=t);else r=p(r,n),A.each(e,function(e,n,t){o=r(e,n,t),(a<o||o===-1/0&&i===-1/0)&&(i=e,a=o)});return i},A.min=function(e,r,n){var t,o,i=1/0,a=1/0;if(null==r||"number"==typeof r&&"object"!=typeof e[0]&&null!=e)for(var l=0,u=(e=y(e)?e:A.values(e)).length;l<u;l++)null!=(t=e[l])&&t<i&&(i=t);else r=p(r,n),A.each(e,function(e,n,t){((o=r(e,n,t))<a||o===1/0&&i===1/0)&&(i=e,a=o)});return i},A.shuffle=function(e){return A.sample(e,1/0)},A.sample=function(e,n,t){if(null==n||t)return y(e)||(e=A.values(e)),e[A.random(e.length-1)];var r=y(e)?A.clone(e):A.values(e),o=h(r);n=Math.max(Math.min(n,o),0);for(var i=o-1,a=0;a<n;a++){var l=A.random(a,i),u=r[a];r[a]=r[l],r[l]=u}return r.slice(0,n)},A.sortBy=function(e,r,n){var o=0;return r=p(r,n),A.pluck(A.map(e,function(e,n,t){return{value:e,index:o++,criteria:r(e,n,t)}}).sort(function(e,n){var t=e.criteria,r=n.criteria;if(t!==r){if(r<t||void 0===t)return 1;if(t<r||void 0===r)return-1}return e.index-n.index}),"value")};var C=function(a,n){return function(r,o,e){var i=n?[[],[]]:{};return o=p(o,e),A.each(r,function(e,n){var t=o(e,n,r);a(i,e,t)}),i}};A.groupBy=C(function(e,n,t){O(e,t)?e[t].push(n):e[t]=[n]}),A.indexBy=C(function(e,n,t){e[t]=n}),A.countBy=C(function(e,n,t){O(e,t)?e[t]++:e[t]=1});var v=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;A.toArray=function(e){return e?A.isArray(e)?u.call(e):A.isString(e)?e.match(v):y(e)?A.map(e,A.identity):A.values(e):[]},A.size=function(e){return null==e?0:y(e)?e.length:A.keys(e).length},A.partition=C(function(e,n,t){e[t?0:1].push(n)},!0),A.first=A.head=A.take=function(e,n,t){return null==e||e.length<1?null==n?void 0:[]:null==n||t?e[0]:A.initial(e,e.length-n)},A.initial=function(e,n,t){return u.call(e,0,Math.max(0,e.length-(null==n||t?1:n)))},A.last=function(e,n,t){return null==e||e.length<1?null==n?void 0:[]:null==n||t?e[e.length-1]:A.rest(e,Math.max(0,e.length-n))},A.rest=A.tail=A.drop=function(e,n,t){return u.call(e,null==n||t?1:n)},A.compact=function(e){return A.filter(e,Boolean)};var R=function(e,n,t,r){for(var o=(r=r||[]).length,i=0,a=h(e);i<a;i++){var l=e[i];if(y(l)&&(A.isArray(l)||A.isArguments(l)))if(n)for(var u=0,d=l.length;u<d;)r[o++]=l[u++];else R(l,n,t,r),o=r.length;else t||(r[o++]=l)}return r};A.flatten=function(e,n){return R(e,n,!1)},A.without=g(function(e,n){return A.difference(e,n)}),A.uniq=A.unique=function(e,n,t,r){A.isBoolean(n)||(r=t,t=n,n=!1),null!=t&&(t=p(t,r));for(var o=[],i=[],a=0,l=h(e);a<l;a++){var u=e[a],d=t?t(u,a,e):u;n&&!t?(a&&i===d||o.push(u),i=d):t?A.contains(i,d)||(i.push(d),o.push(u)):A.contains(o,u)||o.push(u)}return o},A.union=g(function(e){return A.uniq(R(e,!0,!0))}),A.intersection=function(e){for(var n=[],t=arguments.length,r=0,o=h(e);r<o;r++){var i=e[r];if(!A.contains(n,i)){var a;for(a=1;a<t&&A.contains(arguments[a],i);a++);a===t&&n.push(i)}}return n},A.difference=g(function(e,n){return n=R(n,!0,!0),A.filter(e,function(e){return!A.contains(n,e)})}),A.unzip=function(e){for(var n=e&&A.max(e,h).length||0,t=Array(n),r=0;r<n;r++)t[r]=A.pluck(e,r);return t},A.zip=g(A.unzip),A.object=function(e,n){for(var t={},r=0,o=h(e);r<o;r++)n?t[e[r]]=n[r]:t[e[r][0]]=e[r][1];return t};var L=function(i){return function(e,n,t){n=p(n,t);for(var r=h(e),o=0<i?0:r-1;0<=o&&o<r;o+=i)if(n(e[o],o,e))return o;return-1}};A.findIndex=L(1),A.findLastIndex=L(-1),A.sortedIndex=function(e,n,t,r){for(var o=(t=p(t,r,1))(n),i=0,a=h(e);i<a;){var l=Math.floor((i+a)/2);t(e[l])<o?i=l+1:a=l}return i};var N=function(i,a,l){return function(e,n,t){var r=0,o=h(e);if("number"==typeof t)0<i?r=0<=t?t:Math.max(t+o,r):o=0<=t?Math.min(t+1,o):t+o+1;else if(l&&t&&o)return e[t=l(e,n)]===n?t:-1;if(n!=n)return 0<=(t=a(u.call(e,r,o),A.isNaN))?t+r:-1;for(t=0<i?r:o-1;0<=t&&t<o;t+=i)if(e[t]===n)return t;return-1}};A.indexOf=N(1,A.findIndex,A.sortedIndex),A.lastIndexOf=N(-1,A.findLastIndex),A.range=function(e,n,t){null==n&&(n=e||0,e=0),t||(t=n<e?-1:1);for(var r=Math.max(Math.ceil((n-e)/t),0),o=Array(r),i=0;i<r;i++,e+=t)o[i]=e;return o},A.chunk=function(e,n){if(null==n||n<1)return[];for(var t=[],r=0,o=e.length;r<o;)t.push(u.call(e,r,r+=n));return t};var P=function(e,n,t,r,o){if(!(r instanceof n))return e.apply(t,o);var i=T(e.prototype),a=e.apply(i,o);return A.isObject(a)?a:i};A.bind=g(function(n,t,r){if(!A.isFunction(n))throw new TypeError("Bind must be called on a function");var o=g(function(e){return P(n,o,t,this,r.concat(e))});return o}),A.partial=g(function(o,i){var a=A.partial.placeholder,l=function(){for(var e=0,n=i.length,t=Array(n),r=0;r<n;r++)t[r]=i[r]===a?arguments[e++]:i[r];for(;e<arguments.length;)t.push(arguments[e++]);return P(o,l,this,this,t)};return l}),(A.partial.placeholder=A).bindAll=g(function(e,n){var t=(n=R(n,!1,!1)).length;if(t<1)throw new Error("bindAll must be passed function names");for(;t--;){var r=n[t];e[r]=A.bind(e[r],e)}}),A.memoize=function(r,o){var i=function(e){var n=i.cache,t=""+(o?o.apply(this,arguments):e);return O(n,t)||(n[t]=r.apply(this,arguments)),n[t]};return i.cache={},i},A.delay=g(function(e,n,t){return setTimeout(function(){return e.apply(null,t)},n)}),A.defer=A.partial(A.delay,A,1),A.throttle=function(t,r,o){var i,a,l,u,d=0;o||(o={});var s=function(){d=!1===o.leading?0:A.now(),i=null,u=t.apply(a,l),i||(a=l=null)},e=function(){var e=A.now();d||!1!==o.leading||(d=e);var n=r-(e-d);return a=this,l=arguments,n<=0||r<n?(i&&(clearTimeout(i),i=null),d=e,u=t.apply(a,l),i||(a=l=null)):i||!1===o.trailing||(i=setTimeout(s,n)),u};return e.cancel=function(){clearTimeout(i),d=0,i=a=l=null},e},A.debounce=function(t,r,o){var i,a,l=function(e,n){i=null,n&&(a=t.apply(e,n))},e=g(function(e){if(i&&clearTimeout(i),o){var n=!i;i=setTimeout(l,r),n&&(a=t.apply(this,e))}else i=A.delay(l,r,this,e);return a});return e.cancel=function(){clearTimeout(i),i=null},e},A.wrap=function(e,n){return A.partial(n,e)},A.negate=function(e){return function(){return!e.apply(this,arguments)}},A.compose=function(){var t=arguments,r=t.length-1;return function(){for(var e=r,n=t[r].apply(this,arguments);e--;)n=t[e].call(this,n);return n}},A.after=function(e,n){return function(){if(--e<1)return n.apply(this,arguments)}},A.before=function(e,n){var t;return function(){return 0<--e&&(t=n.apply(this,arguments)),e<=1&&(n=null),t}},A.once=A.partial(A.before,2),A.restArguments=g;var M=!{toString:null}.propertyIsEnumerable("toString"),V=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],b=function(e,n){var t=V.length,r=e.constructor,o=A.isFunction(r)&&r.prototype||a,i="constructor";for(O(e,i)&&!A.contains(n,i)&&n.push(i);t--;)(i=V[t])in e&&e[i]!==o[i]&&!A.contains(n,i)&&n.push(i)};A.keys=function(e){if(!A.isObject(e))return[];if(l)return l(e);var n=[];for(var t in e)O(e,t)&&n.push(t);return M&&b(e,n),n},A.allKeys=function(e){if(!A.isObject(e))return[];var n=[];for(var t in e)n.push(t);return M&&b(e,n),n},A.values=function(e){for(var n=A.keys(e),t=n.length,r=Array(t),o=0;o<t;o++)r[o]=e[n[o]];return r},A.mapObject=function(e,n,t){n=p(n,t);for(var r=A.keys(e),o=r.length,i={},a=0;a<o;a++){var l=r[a];i[l]=n(e[l],l,e)}return i},A.pairs=function(e){for(var n=A.keys(e),t=n.length,r=Array(t),o=0;o<t;o++)r[o]=[n[o],e[n[o]]];return r},A.invert=function(e){for(var n={},t=A.keys(e),r=0,o=t.length;r<o;r++)n[e[t[r]]]=t[r];return n},A.functions=A.methods=function(e){var n=[];for(var t in e)A.isFunction(e[t])&&n.push(t);return n.sort()};var U=function(u,d){return function(e){var n=arguments.length;if(d&&(e=Object(e)),n<2||null==e)return e;for(var t=1;t<n;t++)for(var r=arguments[t],o=u(r),i=o.length,a=0;a<i;a++){var l=o[a];d&&void 0!==e[l]||(e[l]=r[l])}return e}};A.extend=U(A.allKeys),A.extendOwn=A.assign=U(A.keys),A.findKey=function(e,n,t){n=p(n,t);for(var r,o=A.keys(e),i=0,a=o.length;i<a;i++)if(n(e[r=o[i]],r,e))return r};var w,k,F=function(e,n,t){return n in t};A.pick=g(function(e,n){var t={},r=n[0];if(null==e)return t;A.isFunction(r)?(1<n.length&&(r=_(r,n[1])),n=A.allKeys(e)):(r=F,n=R(n,!1,!1),e=Object(e));for(var o=0,i=n.length;o<i;o++){var a=n[o],l=e[a];r(l,a,e)&&(t[a]=l)}return t}),A.omit=g(function(e,t){var n,r=t[0];return A.isFunction(r)?(r=A.negate(r),1<t.length&&(n=t[1])):(t=A.map(R(t,!1,!1),String),r=function(e,n){return!A.contains(t,n)}),A.pick(e,r,n)}),A.defaults=U(A.allKeys,!0),A.create=function(e,n){var t=T(e);return n&&A.extendOwn(t,n),t},A.clone=function(e){return A.isObject(e)?A.isArray(e)?e.slice():A.extend({},e):e},A.tap=function(e,n){return n(e),e},A.isMatch=function(e,n){var t=A.keys(n),r=t.length;if(null==e)return!r;for(var o=Object(e),i=0;i<r;i++){var a=t[i];if(n[a]!==o[a]||!(a in o))return!1}return!0},w=function(e,n,t,r){if(e===n)return 0!==e||1/e==1/n;if(null==e||null==n)return!1;if(e!=e)return n!=n;var o=typeof e;return("function"===o||"object"===o||"object"==typeof n)&&k(e,n,t,r)},k=function(e,n,t,r){e instanceof A&&(e=e._wrapped),n instanceof A&&(n=n._wrapped);var o=E.call(e);if(o!==E.call(n))return!1;switch(o){case"[object RegExp]":case"[object String]":return""+e==""+n;case"[object Number]":return+e!=+e?+n!=+n:0==+e?1/+e==1/n:+e==+n;case"[object Date]":case"[object Boolean]":return+e==+n;case"[object Symbol]":return c.valueOf.call(e)===c.valueOf.call(n)}var i="[object Array]"===o;if(!i){if("object"!=typeof e||"object"!=typeof n)return!1;var a=e.constructor,l=n.constructor;if(a!==l&&!(A.isFunction(a)&&a instanceof a&&A.isFunction(l)&&l instanceof l)&&"constructor"in e&&"constructor"in n)return!1}r=r||[];for(var u=(t=t||[]).length;u--;)if(t[u]===e)return r[u]===n;if(t.push(e),r.push(n),i){if((u=e.length)!==n.length)return!1;for(;u--;)if(!w(e[u],n[u],t,r))return!1}else{var d,s=A.keys(e);if(u=s.length,A.keys(n).length!==u)return!1;for(;u--;)if(d=s[u],!O(n,d)||!w(e[d],n[d],t,r))return!1}return t.pop(),r.pop(),!0},A.isEqual=function(e,n){return w(e,n)},A.isEmpty=function(e){return null==e||(y(e)&&(A.isArray(e)||A.isString(e)||A.isArguments(e))?0===e.length:0===A.keys(e).length)},A.isElement=function(e){return!(!e||1!==e.nodeType)},A.isArray=t||function(e){return"[object Array]"===E.call(e)},A.isObject=function(e){var n=typeof e;return"function"===n||"object"===n&&!!e},A.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(n){A["is"+n]=function(e){return E.call(e)==="[object "+n+"]"}}),A.isArguments(arguments)||(A.isArguments=function(e){return O(e,"callee")});var G=e.document&&e.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof G&&(A.isFunction=function(e){return"function"==typeof e||!1}),A.isFinite=function(e){return!A.isSymbol(e)&&isFinite(e)&&!isNaN(parseFloat(e))},A.isNaN=function(e){return A.isNumber(e)&&isNaN(e)},A.isBoolean=function(e){return!0===e||!1===e||"[object Boolean]"===E.call(e)},A.isNull=function(e){return null===e},A.isUndefined=function(e){return void 0===e},A.has=function(e,n){if(!A.isArray(n))return O(e,n);for(var t=n.length,r=0;r<t;r++){var o=n[r];if(null==e||!i.call(e,o))return!1;e=e[o]}return!!t},A.noConflict=function(){return e._=n,this},A.identity=function(e){return e},A.constant=function(e){return function(){return e}},A.noop=function(){},A.property=function(n){return A.isArray(n)?function(e){return m(e,n)}:I(n)},A.propertyOf=function(n){return null==n?function(){}:function(e){return A.isArray(e)?m(n,e):n[e]}},A.matcher=A.matches=function(n){return n=A.extendOwn({},n),function(e){return A.isMatch(e,n)}},A.times=function(e,n,t){var r=Array(Math.max(0,e));n=_(n,t,1);for(var o=0;o<e;o++)r[o]=n(o);return r},A.random=function(e,n){return null==n&&(n=e,e=0),e+Math.floor(Math.random()*(n-e+1))},A.now=Date.now||function(){return(new Date).getTime()};var Y={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},H=A.invert(Y),x=function(n){var t=function(e){return n[e]},e="(?:"+A.keys(n).join("|")+")",r=RegExp(e),o=RegExp(e,"g");return function(e){return e=null==e?"":""+e,r.test(e)?e.replace(o,t):e}};A.escape=x(Y),A.unescape=x(H),A.result=function(e,n,t){A.isArray(n)||(n=[n]);var r=n.length;if(!r)return A.isFunction(t)?t.call(e):t;for(var o=0;o<r;o++){var i=null==e?void 0:e[n[o]];void 0===i&&(i=t,o=r),e=A.isFunction(i)?i.call(e):i}return e};var B=0;A.uniqueId=function(e){var n=++B+"";return e?e+n:n},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var W=/(.)^/,j={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,q=function(e){return"\\"+j[e]};A.template=function(i,e,n){!e&&n&&(e=n),e=A.defaults({},e,A.templateSettings);var t,r=RegExp([(e.escape||W).source,(e.interpolate||W).source,(e.evaluate||W).source].join("|")+"|$","g"),a=0,l="__p+='";i.replace(r,function(e,n,t,r,o){return l+=i.slice(a,o).replace(K,q),a=o+e.length,n?l+="'+\n((__t=("+n+"))==null?'':_.escape(__t))+\n'":t?l+="'+\n((__t=("+t+"))==null?'':__t)+\n'":r&&(l+="';\n"+r+"\n__p+='"),e}),l+="';\n",e.variable||(l="with(obj||{}){\n"+l+"}\n"),l="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+l+"return __p;\n";try{t=new Function(e.variable||"obj","_",l)}catch(e){throw e.source=l,e}var o=function(e){return t.call(this,e,A)},u=e.variable||"obj";return o.source="function("+u+"){\n"+l+"}",o},A.chain=function(e){var n=A(e);return n._chain=!0,n};var Q=function(e,n){return e._chain?A(n).chain():n};A.mixin=function(t){return A.each(A.functions(t),function(e){var n=A[e]=t[e];A.prototype[e]=function(){var e=[this._wrapped];return o.apply(e,arguments),Q(this,n.apply(A,e))}}),A},A.mixin(A),A.each(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=r[n];A.prototype[n]=function(){var e=this._wrapped;return t.apply(e,arguments),"shift"!==n&&"splice"!==n||0!==e.length||delete e[0],Q(this,e)}}),A.each(["concat","join","slice"],function(e){var n=r[e];A.prototype[e]=function(){return Q(this,n.apply(this._wrapped,arguments))}}),A.prototype.value=function(){return this._wrapped},A.prototype.valueOf=A.prototype.toJSON=A.prototype.value,A.prototype.toString=function(){return String(this._wrapped)},"function"==typeof define&&define.amd&&define("underscore",[],function(){return A})}()}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],6:[function(e,n,t){"use strict";function u(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,n){var t=[],r=!0,o=!1,i=void 0;try{for(var a,l=e[Symbol.iterator]();!(r=(a=l.next()).done)&&(t.push(a.value),!n||t.length!==n);r=!0);}catch(e){o=!0,i=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw i}}return t}(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var r=e("underscore"),fe=(r.isFunction,r.find),_e=r.isFinite,pe=r.filter,ge=r.delay,Te=r.each,Ie=r.contains,d=r.pairs;e("../html5-common/js/utils/InitModules/InitOOUnderscore.js"),e("../html5-common/js/utils/constants.js"),e("../html5-common/js/utils/utils.js"),function(){var Ae={};OO.Ads.manager(function(){var ce=function(){return!(OO.iosMajorVersion<10&&OO.isIphone)},Ee=function(e){throw new Error("GOOGLE IMA: ".concat(e))};return new function(){var s=this;this.name="google-ima-ads-manager",this.ready=!1,this.runningUnitTests=!1,this.sharedVideoElement=null,this.initTime=Date.now(),this.enableIosSkippableAds=!1;var c,E,l,A,n,i,f,_=null,t=!1,e=null,p=null,g=null,r=!1,o=null,a=null,u=(OO.CSS.VISIBLE_POSITION,{left:OO.CSS.INVISIBLE_POSITION,visibility:"hidden"}),d="ooyalaImaPluginTimeout";this.initialize=function(e,n){Ae[n]=s,_=e;var t=OO.DEBUG?"_debug.js":".js",r="//imasdk.googleapis.com/js/sdkloader/ima3".concat(t);T(),I(),s.runningUnitTests?U(!0):_.loadAdModule(s.name,r,U)};var T=function(){s.ready=!1,E=!0,s.startImaOnVtcPlay=!1,s.capturedUserClick=!1,s.initialPlayRequestTime=-1,s.adRequestTime=-1,s.adResponseTime=-1,s.mainContentDuration=0,s.initialPlayRequested=!1,s.canSetupAdsRequest=!0,s.adTagUrl=null,s.currentMedia=null,s.currentImpressionTime=0,s.adFinalTagUrl=null,s.adPosition=-1,s.adsReady=!1,s.additionalAdTagParameters=null,s.adsRequested=!1,s.adsRequestTimeoutRef=null,s.disableFlashAds=!1,s.contentEnded=!1,s.pauseAdOnClick=null,s.isFullscreen=!1,s.maxAdsRequestTimeout=15e3,s.uiRegistered=!1,s.metadataReady=!1,s.allAdInfo=null,s.currentAMCAdPod=null,s.currentIMAAd=null,s.currentNonLinearIMAAd=null,s.isReplay=!1,s.requestAdsOnReplay=!0,s.preloadAds=!1,f=!1,M(),s.hasPreroll=!1,s.adPlaybackStarted=!1,s.savedVolume=-1,s.showAdControls=!1,s.useGoogleAdUI=!1,s.useGoogleCountdown=!1,s.useInsecureVpaidMode=!1,s.imaIframeZIndex=10004,s.adRulesLoadError=!1,n=!1,i=A=l=a=o=null},I=function(){_.addPlayerListener(_.EVENTS.INITIAL_PLAY_REQUESTED,y),_.addPlayerListener(_.EVENTS.CONTENT_COMPLETED,v),_.addPlayerListener(_.EVENTS.PLAYHEAD_TIME_CHANGED,R),_.addPlayerListener(_.EVENTS.SIZE_CHANGED,N),_.addPlayerListener(_.EVENTS.CONTENT_CHANGED,re),_.addPlayerListener(_.EVENTS.REPLAY_REQUESTED,S),_.addPlayerListener(_.EVENTS.FULLSCREEN_CHANGED,L)};this.loadMetadata=function(e,n,t){s.mainContentDuration=t.duration/1e3,s.allAdInfo=e.all_ads;var r=fe(e.all_ads,function(e){return"r"==e.position_type});E=!!r,s.adRulesLoadError=!1,s.adTagUrl=null,E&&(s.adTagUrl=r.tag_url,s.adPosition=0),s.requestAdsOnReplay=!0,_.adManagerSettings.hasOwnProperty(_.AD_SETTINGS.REPLAY_ADS)&&(s.requestAdsOnReplay=_.adManagerSettings[_.AD_SETTINGS.REPLAY_ADS]),s.preloadAds=!1,_.adManagerSettings.hasOwnProperty(_.AD_SETTINGS.PRELOAD_ADS)&&(s.preloadAds=_.adManagerSettings[_.AD_SETTINGS.PRELOAD_ADS]),s.maxAdsRequestTimeout=15e3,_e(_.adManagerSettings[_.AD_SETTINGS.AD_LOAD_TIMEOUT])&&(0<_.adManagerSettings[_.AD_SETTINGS.AD_LOAD_TIMEOUT]||s.runningUnitTests)&&(s.maxAdsRequestTimeout=_.adManagerSettings[_.AD_SETTINGS.AD_LOAD_TIMEOUT]),s.additionalAdTagParameters=null,e.hasOwnProperty("additionalAdTagParameters")&&(s.additionalAdTagParameters=e.additionalAdTagParameters),s.showAdControls=!1,s.playerControlsOverAds=_.pageSettings&&!0===_.pageSettings.playerControlsOverAds,s.playerControlsOverAds?s.showAdControls=!0:e.hasOwnProperty("showAdControls")&&(s.showAdControls=e.showAdControls),s.autoHideAdControls=!0,s.showAdControls&&!s.playerControlsOverAds&&(s.autoHideAdControls=!1),s.useGoogleAdUI=!1,e.hasOwnProperty("useGoogleAdUI")&&(s.useGoogleAdUI=e.useGoogleAdUI),s.useGoogleCountdown=!1,e.hasOwnProperty("useGoogleCountdown")&&(s.useGoogleCountdown=e.useGoogleCountdown),s.useInsecureVpaidMode=!1,e.hasOwnProperty("vpaidMode")&&(s.useInsecureVpaidMode="insecure"===e.vpaidMode),s.disableFlashAds=!1,e.hasOwnProperty("disableFlashAds")&&(s.disableFlashAds=e.disableFlashAds),s.imaIframeZIndex=10004,e.hasOwnProperty("iframeZIndex")&&(s.imaIframeZIndex=e.iframeZIndex),s.enableIosSkippableAds=!1,e.hasOwnProperty("enableIosSkippableAds")&&(s.enableIosSkippableAds=e.enableIosSkippableAds),e.hasOwnProperty("setMaxRedirects")&&("number"==typeof e.setMaxRedirects?s.maxRedirects=e.setMaxRedirects:"string"==typeof e.setMaxRedirects&&(s.maxRedirects=+e.setMaxRedirects)),i?l||k():w(),s.metadataReady=!0,Y();var o=O();o&&0<o.length&&E&&(s.canSetupAdsRequest=!1)},this.registerUi=function(){s.uiRegistered=!0,_.ui.useSingleVideoElement&&!s.sharedVideoElement&&_.ui.ooyalaVideoElement[0]&&"video"===_.ui.ooyalaVideoElement[0].className&&s.setupSharedVideoElement(_.ui.ooyalaVideoElement[0]),w(),V()},this.setupSharedVideoElement=function(e){s.sharedVideoElement&&OO.isIphone&&"function"==typeof s.sharedVideoElement.removeEventListener&&s.sharedVideoElement.removeEventListener("webkitendfullscreen",j),s.sharedVideoElement=e,s.sharedVideoElement&&OO.isIphone&&"function"==typeof s.sharedVideoElement.addEventListener&&s.sharedVideoElement.addEventListener("webkitendfullscreen",j)},this.buildTimeline=function(){var e=[];if(E)return(o={})[OO.VIDEO.ENCODING.IMA]="",[new _.Ad({position:0,duration:0,adManager:s.name,ad:{},streams:o,adType:_.ADTYPE.UNKNOWN_AD_REQUEST})];var n=O();if(n)for(var t=0;t<n.length;t++){var r=n[t];if("r"!=r.position_type){var o;(o={})[OO.VIDEO.ENCODING.IMA]="";var i={position:r.position/1e3,adManager:s.name,ad:r,streams:o,adType:_.ADTYPE.UNKNOWN_AD_REQUEST,mainContentDuration:s.mainContentDuration};"p"===r.position_type&&(i.positionType="p",i.position=r.position);var a=new _.Ad(i);e.push(a)}}return e};var O=function(){return s.allAdInfo?pe(s.allAdInfo,m):null},m=function(e){if(!e)return!1;var n=e.tag_url,t="r"==e.position_type;return E==t&&n&&"string"==typeof n};this.playAd=function(e,n){if(null!=e)if(n?a=e:o=e,a!==e||s.currentAMCAdPod!==e){s.currentAMCAdPod&&de(!0),s.currentAMCAdPod=e,s.currentAMCAdPod?s.currentAMCAdPod.ad||Ee("playAd() called but amcAdPod.ad is null."):Ee("playAd() called but amcAdPod is null.");var t=ee();t&&t.style&&(t.style.zIndex=s.imaIframeZIndex),E&&s.currentAMCAdPod.adType==_.ADTYPE.UNKNOWN_AD_REQUEST?n&&(s.canSetupAdsRequest=!0,V()):(!_.ui.useSingleVideoElement&&_.ui.adVideoElement&&_.ui.adVideoElement.css(u),E&&s.currentAMCAdPod.ad.forced_ad_type!==_.ADTYPE.NONLINEAR_OVERLAY?oe():s.currentAMCAdPod.ad.forced_ad_type!=_.ADTYPE.NONLINEAR_OVERLAY?(h(),s.adTagUrl=s.currentAMCAdPod.ad.tag_url,s.adPosition=s.currentAMCAdPod.ad.position/1e3,V()):(s.currentAMCAdPod&&s.currentNonLinearIMAAd&&(s.currentAMCAdPod.width=s.currentNonLinearIMAAd.getWidth(),s.currentAMCAdPod.height=s.currentNonLinearIMAAd.getHeight(),s.currentAMCAdPod.paddingWidth=50,s.currentAMCAdPod.paddingHeight=50,N()),_.sendURLToLoadAndPlayNonLinearAd(s.currentAMCAdPod,s.currentAMCAdPod.id,null)))}else n||(o=s.currentAMCAdPod,s.adsReady&&C())},this.cancelOverlay=function(e){s.cancelAd(e)},this.cancelAd=function(e){e&&s.currentAMCAdPod&&e.id!=s.currentAMCAdPod.id&&Ee("AMC canceling ad that is not the current one playing."),OO.log("GOOGLE IMA: ad got canceled by AMC"),E||G(),de(!0)},this.pauseAd=function(e){A&&s.adPlaybackStarted&&A.pause()},this.resumeAd=function(e){s.startImaOnVtcPlay?(s.startImaOnVtcPlay=!1,A&&A.start()):A&&s.adPlaybackStarted&&(OO.isIphone&&s.sharedVideoElement&&(ce()||s.sharedVideoElement.webkitEnterFullscreen(),s.sharedVideoElement.play()),A.resume())},this.getVolume=function(){var e=1;return A&&(e=A.getVolume()),e},this.setVolume=function(e){A?A.getVolume()===e||!s.capturedUserClick&&0!==e&&s.requiresMutedAutoplay()||(s.savedVolume=-1,A.setVolume(e),!s.videoControllerWrapper||s.adPlaybackStarted&&!s.sharedVideoElement||s.videoControllerWrapper.raiseVolumeEvent()):s.savedVolume=e},this.setupUnmutedPlayback=function(){s.capturedUserClick=!0,s.currentIMAAd||i&&i.initialize()},this.getCurrentTime=function(){var e=0;return A&&s.currentIMAAd&&0<=A.getRemainingTime()&&A.getRemainingTime()<=s.currentIMAAd.getDuration()&&(e=s.currentIMAAd.getDuration()-A.getRemainingTime()),e},this.getDuration=function(){var e=0;return s.currentIMAAd&&(e=s.currentIMAAd.getDuration()),e},this.adVideoFocused=function(){};var S=function(){l||k(),s.isReplay=!0,h(),M(),s.contentEnded=!1,s.adRulesLoadError=!1,E&&V()},h=function(){$(),G(),l&&l.contentComplete(),s.currentIMAAd=null,s.currentNonLinearIMAAd=null,s.adsRequested=!1},y=function(e,n){s.initialPlayRequestTime=(new Date).valueOf(),OO.log("_onInitialPlayRequested"),i||(x(),_.unregisterAdManager(s.name),Ee("onInitialPlayRequested called but _IMAAdDisplayContainer not created yet.")),s.initialPlayRequested=!0,s.isReplay=!1,i.initialize(),s.capturedUserClick=s.capturedUserClick||!n,E&&A&&A.init(p.clientWidth,p.clientHeight,google.ima.ViewMode.NORMAL),C(),s.canSetupAdsRequest=!0,V()},D=function(){var e=!1,n=E&&!s.hasPreroll&&s.currentAMCAdPod&&s.currentAMCAdPod.adType===_.ADTYPE.UNKNOWN_AD_REQUEST;return s.willPlayAdMuted()&&s.videoControllerWrapper&&!n&&(s.startImaOnVtcPlay=!0,s.videoControllerWrapper.raiseUnmutedPlaybackFailed(),e=!0),e},C=function(){var e=s.currentAMCAdPod&&o===s.currentAMCAdPod||E;if(A&&s.initialPlayRequested&&!n&&p&&e)try{!D()&&A&&(OO.log("Starting IMA Ads Manager"),A.start()),n=!(o=null),E&&!s.hasPreroll&&s.currentAMCAdPod&&s.currentAMCAdPod.adType===_.ADTYPE.UNKNOWN_AD_REQUEST&&(_.notifyPodStarted(s.currentAMCAdPod.id,1),de(!0))}catch(e){x(e)}},v=function(){0==s.contentEnded&&(s.contentEnded=!0,l&&l.contentComplete())},R=function(e,n,t){c||M(),f||(c.currentTime=n,c.duration=t)},L=function(e,n){s.isFullscreen=n,N()},N=function(){P()},P=function(){if(A&&p){var e=s.isFullscreen?google.ima.ViewMode.FULLSCREEN:google.ima.ViewMode.NORMAL,n=p.clientWidth,t=p.clientHeight;s.currentAMCAdPod&&s.currentNonLinearIMAAd&&(s.currentAMCAdPod.width&&(n=s.currentAMCAdPod.width,s.currentAMCAdPod.paddingWidth&&(n+=s.currentAMCAdPod.paddingWidth)),s.currentAMCAdPod.height&&(t=s.currentAMCAdPod.height,s.currentAMCAdPod.paddingHeight&&(t+=s.currentAMCAdPod.paddingHeight))),A.resize(n,t,e)}},M=function(){c?c.currentTime=0:c={duration:0,currentTime:0}},V=function(){if(!s.adsRequested&&s.canSetupAdsRequest&&s.adTagUrl&&s.uiRegistered&&_.currentEmbedCode&&l&&b()){google&&google.ima&&google.ima.settings&&google.ima.settings.setDisableFlashAds(s.disableFlashAds);var e=new google.ima.AdsRequest;if(s.additionalAdTagParameters){var n=0<s.adTagUrl.indexOf("?")?"&":"?",t=[],r=null;for(r in s.additionalAdTagParameters)t.push("".concat(r,"=").concat(s.additionalAdTagParameters[r]));s.adTagUrl+=n+t.join("&")}e.adTagUrl=OO.getNormalizedTagUrl(s.adTagUrl,_.currentEmbedCode),s.adFinalTagUrl=e.adTagUrl;var o=_.ui.width,i=_.ui.height;e.linearAdSlotWidth=o,e.linearAdSlotHeight=i,e.nonLinearAdSlotWidth=o,e.nonLinearAdSlotHeight=i;var a=s.willPlayAdMuted();OO.log("IMA: setAdWillPlayMuted = ".concat(a)),e.setAdWillPlayMuted(a),h(),Z(),l.requestAds(e),s.adRequestTime=(new Date).valueOf(),_.onAdRequest(s.name,s.adPosition),s.runningUnitTests&&0===s.maxAdsRequestTimeout?H():s.adsRequestTimeoutRef=ge(H,s.maxAdsRequestTimeout),s.adsRequested=!0}},b=function(){return!s.isReplay||s.requestAdsOnReplay},U=function(e){if(t=e,OO.log("onSdkLoaded!"),!e||!se())return x(),errorString="ERROR Google SDK failed to load",e&&!se()&&(errorString="ERROR Google SDK loaded but could not be validated"),_.onAdSdkLoadFailure(s.name,errorString),void _.unregisterAdManager(s.name);_.onAdSdkLoaded(s.name),w(),V()},w=function(){if(t&&s.uiRegistered){if(se()||Ee("IMA SDK loaded but does not contain valid data"),!i){google.ima.settings.setPlayerVersion("1.0"),google.ima.settings.setPlayerType("Ooyala"),_.uiLanguage?google.ima.settings.setLocale(_.uiLanguage):google.ima.settings.setLocale(OO.getLocale()),s.useInsecureVpaidMode?google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.INSECURE):google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED),google.ima.settings.setDisableCustomPlaybackForIOS10Plus(s.enableIosSkippableAds),s.maxRedirects&&"number"==typeof s.maxRedirects&&0<s.maxRedirects&&google.ima.settings.setNumRedirects(s.maxRedirects),p=_.ui.playerSkinPluginsElement?_.ui.playerSkinPluginsElement[0]:_.ui.pluginsElement[0];var e=s.sharedVideoElement;i=new google.ima.AdDisplayContainer(p,e)}k(),Y()}},k=function(){if(i){var e=google.ima.AdsManagerLoadedEvent.Type,n=google.ima.AdErrorEvent.Type;F(),(l=new google.ima.AdsLoader(i)).addEventListener(e.ADS_MANAGER_LOADED,B,!1),l.addEventListener(n.AD_ERROR,x,!1)}},F=function(){l&&(l.destroy(),l=null)},G=function(){A&&(A.stop(),A.destroy(),A=null,n=!1)};this.destroy=function(){p=null,$(),G(),F(),i&&(i.destroy(),i=null,s.capturedUserClick=!1),T(),_&&(_.removePlayerListener(_.EVENTS.INITIAL_PLAY_REQUESTED,y),_.removePlayerListener(_.EVENTS.CONTENT_COMPLETED,v),_.removePlayerListener(_.EVENTS.PLAYHEAD_TIME_CHANGED,R),_.removePlayerListener(_.EVENTS.SIZE_CHANGED,N),_.removePlayerListener(_.EVENTS.CONTENT_CHANGED,re),_.removePlayerListener(_.EVENTS.REPLAY_REQUESTED,S),_.removePlayerListener(_.EVENTS.FULL_SCREEN_CHANGED,L))},this.createAdVideoElementOnPlayerInit=function(){return[OO.VIDEO.ENCODING.IMA]};var Y=function(){i&&s.metadataReady&&!s.ready&&(s.ready=!0,_.onAdManagerReady(),_.reportPluginLoaded(Date.now()-s.initTime,s.name))},H=function(){OO.log("IMA Ad request timed out"),s.adsReady||x(d)},x=function(e){if(clearTimeout(s.adsRequestTimeoutRef),E&&(s.adsReady||(s.adRulesLoadError=!0),$()),G(),e===d&&F(),e){var n="ERROR Google IMA";if(e.getError){var t=e.getError(),r=!1,o=!1,i=!1,a={vastErrorCode:t.getVastErrorCode(),innerErrorCode:t.getInnerError(),errorCode:t.getErrorCode()};OO.log("GOOGLE_IMA:: SDK Error received: Error Code List",JSON.stringify(a));var l=google.ima.AdError.ErrorCode;switch(a.vastErrorCode){case l.VAST_MEDIA_LOAD_TIMEOUT:case l.VAST_LOAD_TIMEOUT:r=!0;break;case l.VAST_NO_ADS_AFTER_WRAPPER:case l.VAST_EMPTY_RESPONSE:o=!0;break;case l.VAST_MEDIA_ERROR:case l.VIDEO_PLAY_ERROR:i=!0}a.errorCode==l.VIDEO_PLAY_ERROR&&(i=!0),_.onSdkAdEvent(s.name,e.type,{errorData:t}),o?_.onAdRequestEmpty(s.name,s.adPosition,s.adFinalTagUrl,a,t.getMessage()):i?_.onAdPlaybackError(s.name,s.adPosition,s.adFinalTagUrl,a,t.getMessage(),s.currentMedia):_.onAdRequestError(s.name,s.adPosition,s.adFinalTagUrl,a,t.getMessage(),r),n="ERROR Google SDK: ".concat(e.getError())}else n="ERROR Google IMA plugin: ".concat(e);_?_.raiseAdError(n):OO.log(n)}de(!0)},B=function(e){clearTimeout(s.adsRequestTimeoutRef),s.adResponseTime=(new Date).valueOf();var n=s.adResponseTime-s.adRequestTime,t=s.adResponseTime-s.initialPlayRequestTime;_.onAdRequestSuccess(s.name,s.adPosition,n,t),_.onSdkAdEvent(s.name,e.type,{eventData:{}}),!E&&A&&(G(),s.currentIMAAd=null,s.currentNonLinearIMAAd=null);var r=new google.ima.AdsRenderingSettings;r.loadVideoTimeout=15e3,r.restoreCustomPlaybackStateOnAdBreakComplete=!1,r.useStyledNonLinearAds=!0,r.enablePreloading=s.preloadAds,s.useGoogleCountdown&&(r.uiElements=[google.ima.UiElements.COUNTDOWN,google.ima.UiElements.AD_ATTRIBUTION]),r.useStyledLinearAds=s.useGoogleAdUI,A=e.getAdsManager(c,r),s.videoControllerWrapper&&(s.videoControllerWrapper.readyForCss=!0),s.videoControllerWrapper&&s.videoControllerWrapper.applyStoredCss();var o=A.getCuePoints();s.hasPreroll=0<=o.indexOf(0);var i=google.ima.AdEvent.Type;A.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,x,!1,s);var a=[i.AD_BREAK_READY,i.AD_METADATA,i.ALL_ADS_COMPLETED,i.CLICK,i.COMPLETE,i.CONTENT_PAUSE_REQUESTED,i.CONTENT_RESUME_REQUESTED,i.DURATION_CHANGE,i.FIRST_QUARTILE,i.IMPRESSION,i.INTERACTION,i.LINEAR_CHANGED,i.LOADED,i.LOG,i.MIDPOINT,i.PAUSED,i.RESUMED,i.SKIPPABLE_STATE_CHANGED,i.SKIPPED,i.STARTED,i.THIRD_QUARTILE,i.USER_CLOSE,i.VOLUME_CHANGED,i.VOLUME_MUTED];Te(a,function(e){A.addEventListener(e,q,!1,s)},s),OO.isIos&&ne(),E&&!s.initialPlayRequested||A.init(p.clientWidth,p.clientHeight,google.ima.ViewMode.NORMAL),Y(),s.adsReady=!0,C()},W=function(){OO.log("GOOGLE_IMA:: Content Resume Requested by Google IMA!"),de(!0)},j=function(){s.videoControllerWrapper&&s.videoControllerWrapper.raisePauseEvent()},K=function(e){if(e&&_.pageSettings.companionAd&&_.pageSettings.companionAd.slots){var n=_.pageSettings.companionAd.slots,t=[],r=null;Te(n,function(n){n.width&&n.height&&(r=e.getCompanionAds(n.width,n.height)).length&&Te(r,function(e){t.push({slotSize:"".concat(n.width,"x").concat(n.height),ad:e.getContent()})})}),t.length&&_.showCompanion(t)}},q=function(e){if(Q(e))OO.log("Ignoring IMA EVENT: ",e.type,e);else{_.onSdkAdEvent(s.name,e.type,{adData:e.getAdData()});var n=google.ima.AdEvent.Type,t=e.getAd();switch(e.getAdData(),e.type){case n.LOADED:OO.log("GOOGLE_IMA:: starting playlist ad"),E&&(s.currentAMCAdPod&&s.currentNonLinearIMAAd&&s.cancelAd(s.currentAMCAdPod),g=p.getAttribute("style")||"",p.setAttribute("style","display: block; width: 100%; height: 100%; visibility: hidden; pointer-events: none;"),N(),D()),_.ui.useSingleVideoElement&&_.focusAdVideo(),s.currentMedia=t.getMediaUrl(),z();break;case n.STARTED:if(OO.isIos){var r=ee();r&&r.style&&(r.style.display="block")}s.videoControllerWrapper&&s.requiresMutedAutoplay()&&s.videoControllerWrapper.raiseVolumeEvent(),s.adPlaybackStarted=!0,t.isLinear()?(f=!0,_.ui.useSingleVideoElement||_.focusAdVideo(),0<=s.savedVolume&&(s.setVolume(s.savedVolume),s.savedVolume=-1),_.hidePlayerUi(s.showAdControls,!1,s.autoHideAdControls),ce()&&OO.isIphone&&!0===s.enableIosSkippableAds&&s.sharedVideoElement&&s.sharedVideoElement.webkitExitFullscreen()):s.currentNonLinearIMAAd=t,s.currentIMAAd=t,N(),oe(),s.videoControllerWrapper&&(t.isLinear()&&s.videoControllerWrapper.raisePlayEvent(),s.videoControllerWrapper.raiseTimeUpdate(s.getCurrentTime(),s.getDuration()),X()),E&&!t.isLinear()&&le();break;case n.RESUMED:s.videoControllerWrapper&&t.isLinear()&&s.videoControllerWrapper.raisePlayEvent();break;case n.USER_CLOSE:case n.SKIPPED:case n.COMPLETE:OO.isIos&&ne(),E&&(s.adResponseTime=(new Date).valueOf());var o=!1;e.type===n.SKIPPED&&(o=!0);var i=(new Date).valueOf()-s.currentImpressionTime;if(_.onAdCompleted(s.name,i,o,s.adFinalTagUrl),s.adPlaybackStarted=!1,s.videoControllerWrapper&&t&&t.isLinear()){J();var a=e.type===n.COMPLETE?s.getDuration():s.getCurrentTime();s.videoControllerWrapper.raiseTimeUpdate(a,s.getDuration()),s.videoControllerWrapper.raiseEndedEvent()}s.savedVolume=s.getVolume(),t&&t.isLinear()||(s.currentNonLinearIMAAd=null),de(!1),f=!1,te(e);break;case n.PAUSED:j();break;case n.ALL_ADS_COMPLETED:f=!1,OO.log("all google ima ads completed!"),$(),OO.isIos&&s.contentEnded&&_.isLastAdPlayed()&&W();break;case n.IMPRESSION:s.currentImpressionTime=(new Date).valueOf();var l=s.currentImpressionTime-s.adResponseTime,u="VAST";t&&t.g&&!0===t.g.vpaid&&(u="VPAID");var d="unknown";d=t&&t.isLinear()?0===t.getContentType().lastIndexOf("video",0)?_.ADTYPE.LINEAR_VIDEO:_.ADTYPE.LINEAR_OVERLAY:t&&0===t.getContentType().lastIndexOf("video",0)?_.ADTYPE.NONLINEAR_VIDEO:_.ADTYPE.NONLINEAR_OVERLAY,_.onAdSdkImpression(s.name,s.adPosition,l,u,d);break;case n.FIRST_QUARTILE:case n.MIDPOINT:case n.THIRD_QUARTILE:te(e);break;case n.VOLUME_CHANGED:case n.VOLUME_MUTED:e.type!==n.VOLUME_MUTED||s.adPlaybackStarted||A.resume(),s.videoControllerWrapper&&s.videoControllerWrapper.raiseVolumeEvent();break;case n.DURATION_CHANGE:s.videoControllerWrapper&&s.videoControllerWrapper.raiseDurationChange(s.getCurrentTime(),s.getDuration());break;case n.AD_BREAK_READY:break;case n.CLICK:_.adsClicked(),_.adsClickthroughOpened();break;case n.CONTENT_PAUSE_REQUESTED:E&&t&&0!=t.getAdPodInfo().getPodIndex()&&(s.adResponseTime=(new Date).valueOf()),function(){if(OO.log("GOOGLE_IMA:: Content Pause Requested by Google IMA!"),f=!0,E){var e={position_type:"r",forced_ad_type:_.ADTYPE.LINEAR_VIDEO},n={};if(n[OO.VIDEO.ENCODING.IMA]="",c.currentTime<=0){var t={position:_.FORCED_AD_POSITION,adManager:s.name,ad:e,streams:n,adType:_.ADTYPE.LINEAR_VIDEO,mainContentDuration:s.mainContentDuration};_.appendToTimeline([new _.Ad(t)]),de(!0)}else _.forceAdToPlay(s.name,e,_.ADTYPE.LINEAR_VIDEO,n)}}();break;case n.CONTENT_RESUME_REQUESTED:W()}}},Q=function(e){var n=google.ima.AdEvent.Type,t=[n.COMPLETE,n.SKIPPED,n.FIRST_QUARTILE,n.MIDPOINT,n.PAUSED,n.RESUMED,n.THIRD_QUARTILE,n.USER_CLOSE];return!e||!s.adPlaybackStarted&&Ie(t,e.type)},z=function(){p&&null!=g&&p.setAttribute("style",g),g=null},X=function(){J(),s.runningUnitTests||(e=setInterval(function(){f?s.videoControllerWrapper.raiseTimeUpdate(s.getCurrentTime(),s.getDuration()):J()},500))},J=function(){clearInterval(e),e=null},Z=function(){E&&_.adManagerWillControlAds(s.name)},$=function(){E&&_&&_.adManagerDoneControllingAds(s.name)},ee=function(){var e=null;return p&&(e=p.querySelector("iframe")),e},ne=function(){var e=ee();e&&e.style&&(e.style.display="none")},te=function(e){OO.log("Google IMA Ad playthrough",e.type)},re=function(){s.contentEnded=!1,$(),h(),M()},oe=function(){var e=null;return s.currentIMAAd&&s.currentAMCAdPod&&(s.currentIMAAd.isLinear()?(e=_.ADTYPE.LINEAR_VIDEO,ie()):(e=_.ADTYPE.NONLINEAR_OVERLAY,ae())),e},ie=function(){s.currentIMAAd||Ee("Trying to start linear ad and this.currentIMAAd is falsy"),s.currentAMCAdPod||Ee("Trying to start linear ad and this.currentAMCAdPod is falsy");var e=s.currentAMCAdPod.id,n={},t=1;n.indexInPod=1,n.name=null,n.duration=0,n.hasClickUrl=!1,n.skippable=!1;try{var r=s.currentIMAAd.getAdPodInfo();t=r.getTotalAds(),n.indexInPod=r.getAdPosition()}catch(e){Ee("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")}"function"==typeof s.currentIMAAd.getTitle&&(n.name=s.currentIMAAd.getTitle()),"function"==typeof s.currentIMAAd.getDuration&&(n.duration=s.currentIMAAd.getDuration()),"function"==typeof s.currentIMAAd.isSkippable&&(n.skippable=s.currentIMAAd.isSkippable()),1==n.indexInPod&&_.notifyPodStarted(e,t),K(s.currentIMAAd),_.notifyLinearAdStarted(e,n)},ae=function(){s.currentAMCAdPod||Ee("Trying to start non linear overlay and this.currentAMCAdPod is falsy"),_.notifyPodStarted(s.currentAMCAdPod.id);var e={position_type:"t",forced_ad_type:_.ADTYPE.NONLINEAR_OVERLAY};K(s.currentIMAAd),de(!0),_.forceAdToPlay(s.name,e,_.ADTYPE.NONLINEAR_OVERLAY)},le=function(){var e={position_type:"r",forced_ad_type:_.ADTYPE.NONLINEAR_OVERLAY};K(s.currentIMAAd),_.forceAdToPlay(s.name,e,_.ADTYPE.NONLINEAR_OVERLAY)},ue=function(e){if(s.currentAMCAdPod){var n=s.currentAMCAdPod.id;s.currentAMCAdPod=null,f=!1,e?_.notifyPodEnded(n):(t=n,_.notifyNonlinearAdEnded(t),E||h())}var t},de=function(e){if(s.currentAMCAdPod)if(s.currentIMAAd){var n=s.currentIMAAd;if(s.currentIMAAd=null,n.isLinear()){var t=n.getAdPodInfo();t||(e&&ue(!0),Ee("IMA ad returning bad value for this.currentIMAAd.getAdPodInfo().")),_.notifyLinearAdEnded(s.currentAMCAdPod.id);var r=t.getAdPosition(),o=t.getTotalAds();(!_.ui.useSingleVideoElement&&r==o||e)&&ue(!0)}else ue(s.currentAMCAdPod.isRequest)}else ue(!0);z(),s.currentIMAAd=null,s.adPlaybackStarted=!1},se=function(){return google&&google.ima&&google.ima.AdDisplayContainer};this.registerVideoControllerWrapper=function(e){s.videoControllerWrapper=e},this.setRequiresMutedAutoplay=function(e){r=!e},this.requiresMutedAutoplay=function(){return!r&&(OO.isSafari&&11<=OO.macOsSafariVersion||OO.isIos||OO.isAndroid||OO.isChrome&&66<=OO.chromeMajorVersion)},this.willPlayAdMuted=function(){return s.requiresMutedAutoplay()&&!s.capturedUserClick}}});var l=function(e){var t=this,r=e;this.controller={},this.disableNativeSeek=!0,this.isControllingVideo=!0,this.readyForCss=!1;var n=null,o=1;this.sharedElementTake=function(){t.isControllingVideo=!0},this.sharedElementGive=function(){t.isControllingVideo=!1},this.subscribeAllEvents=function(){r.registerVideoControllerWrapper(t)},this.setVideoUrl=function(e){return!0},this.load=function(e){},this.setInitialTime=function(e){},this.play=function(){r.resumeAd()},this.pause=function(){r.pauseAd()},this.seek=function(e){},this.mute=function(){var e=r.getVolume();e&&(o=e),r.setVolume(0)},this.unmute=function(e){e&&r.setupUnmutedPlayback(),r.setVolume(o||1)},this.setVolume=function(e,n){o=e,n?t.mute():r.setVolume(e)},this.getCurrentTime=function(){return r.getCurrentTime()},this.applyCss=function(e){t.readyForCss?i(e):n=e},this.applyStoredCss=function(){t.applyCss(n)},this.onAdsPlayed=function(){};var i=function(e){if(e&&t.isControllingVideo&&r.sharedVideoElement){var o=document.querySelector(r.sharedVideoElement.className,"#"+r.sharedVideoElement.id);d(e).forEach(function(e){var n=u(e,2),t=n[0],r=n[1];o.style[t]=r})}};this.destroy=function(){r.sharedVideoElement=null};var a=function(e,n){t.isControllingVideo&&t.controller.notify(e,n)};this.raisePlayEvent=function(){a(t.controller.EVENTS.PLAY,{}),a(t.controller.EVENTS.PLAYING)},this.raiseEndedEvent=function(){a(t.controller.EVENTS.ENDED)},this.raisePauseEvent=function(){a(t.controller.EVENTS.PAUSED)},this.raiseVolumeEvent=function(){var e=r.getVolume();0===e?a(t.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!0}):(a(t.controller.EVENTS.MUTE_STATE_CHANGE,{muted:!1}),a(t.controller.EVENTS.VOLUME_CHANGE,{volume:e}))},this.raiseTimeUpdate=function(e,n){l(t.controller.EVENTS.TIME_UPDATE,e,n)},this.raiseDurationChange=function(e,n){l(t.controller.EVENTS.DURATION_CHANGE,e,n)},this.raiseUnmutedPlaybackFailed=function(){a(t.controller.EVENTS.UNMUTED_PLAYBACK_FAILED)},this.notifyUnmutedContentAutoPlaybackSucceeded=function(){r.setRequiresMutedAutoplay(!1)};var l=function(e,n,t){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1;a(e,{currentTime:n,duration:t,buffer:r,seekRange:{begin:0,end:0}})}};OO.Video.plugin(new function(){var e=this;this.name="GoogleIMAVideoTech",this.encodings=[OO.VIDEO.ENCODING.IMA],this.features=[OO.VIDEO.FEATURE.VIDEO_OBJECT_SHARING_TAKE],this.technology=OO.VIDEO.TECHNOLOGY.HTML5,this.create=function(e,n,t,r,o){var i=Ae[o],a=new l(i);return a.controller=t,a.subscribeAllEvents(),a},this.createFromExisting=function(e,n,t){var r=Ae[t];r.setupSharedVideoElement(document.getElementById(e));var o=new l(r);return o.controller=n,o.subscribeAllEvents(),o},this.destroy=function(){e.encodings=[],e.create=function(){},e.createFromExisting=function(){}},this.maxSupportedElements=-1})}()},{"../html5-common/js/utils/InitModules/InitOOUnderscore.js":2,"../html5-common/js/utils/constants.js":3,"../html5-common/js/utils/utils.js":4,underscore:7}],7:[function(e,n,t){arguments[4][5][0].apply(t,arguments)},{dup:5}]},{},[6]);