define(["jquery","version!fly/managers/debug","managers/disqus","managers/page-vars"],function(e,s,o,n){var s=s.init("disqusComments");e.widget("tr.disqusComments",e.fly.base,{_create:function(){var t=this;if(window.trPageVars.services.disqus.enabled)if("article"==n.tracking.data.pageType||"blog_post"==n.tracking.data.pageType){s.log("setup on demand");var m={};m["click .show-comments-container > .btn"]="_showComments",m["click .hide-comments-container > .btn"]="_hideComments",t._on(e(document),m),e(".show-comments-container").removeClass("collapsed"),"#postComments"==document.location.hash&&(t._showComments(),setTimeout(function(){e("html, body").scrollTop(e("#postComments").offset().top-100)},1e3))}else o.init()},_showComments:function(){s.log("_showComments"),o.init(),e(".show-comments-container").addClass("collapsed"),e(".hide-comments-container").removeClass("collapsed"),e("#postComments").removeClass("collapsed")},showCommentsShareBar:function(){s.log("showCommentsShareBar"),e(".show-comments-container > .btn:visible").length>0&&(omnitureMgr.trackEvent("moduleClick",{moduleInfo:"disqus-ondemand-show-share"}),o.init(),e(".show-comments-container").addClass("collapsed"),e(".hide-comments-container").removeClass("collapsed"),e("#postComments").removeClass("collapsed"))},_hideComments:function(){s.log("_hideComments"),e(".show-comments-container").removeClass("collapsed"),e(".hide-comments-container").addClass("collapsed"),e("#postComments").addClass("collapsed")}})});