/*! jQuery UI - v1.9.2 - 2012-12-11
* http://jqueryui.com
* Includes: jquery.ui.widget.js
* Copyright (c) 2012 jQuery Foundation and other contributors Licensed MIT */

/*
 * Lazy Load - jQuery plugin for lazy loading images
 *
 * Copyright (c) 2007-2013 Mika Tuupola
 *
 * Licensed under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 *
 * Project home:
 *   http://www.appelsiini.net/projects/lazyload
 *
 * Version:  1.9.3
 *
 */

/*!
Waypoints - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/

/*!
* jQuery throttle / debounce - v1.1 - 3/7/2010
* http://benalman.com/projects/jquery-throttle-debounce-plugin/
*
* Copyright (c) 2010 "Cowboy" Ben Alman
* Dual licensed under the MIT and GPL licenses.
* http://benalman.com/about/license/
*/

// Script: jQuery throttle / debounce: Sometimes, less is more!
//
// *Version: 1.1, Last updated: 3/7/2010*
//
// Project Home - http://benalman.com/projects/jquery-throttle-debounce-plugin/
// GitHub - http://github.com/cowboy/jquery-throttle-debounce/
// Source - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.js
// (Minified) - http://github.com/cowboy/jquery-throttle-debounce/raw/master/jquery.ba-throttle-debounce.min.js (0.7kb)
//
// About: License
//
// Copyright (c) 2010 "Cowboy" Ben Alman,
// Dual licensed under the MIT and GPL licenses.
// http://benalman.com/about/license/
//
// About: Examples
//
// These working examples, complete with fully commented code, illustrate a few
// ways in which this plugin can be used.
//
// Throttle - http://benalman.com/code/projects/jquery-throttle-debounce/examples/throttle/
// Debounce - http://benalman.com/code/projects/jquery-throttle-debounce/examples/debounce/
//
// About: Support and Testing
//
// Information about what version or versions of jQuery this plugin has been
// tested with, what browsers it has been tested in, and where the unit tests
// reside (so you can test it yourself).
//
// jQuery Versions - none, 1.3.2, 1.4.2
// Browsers Tested - Internet Explorer 6-8, Firefox 2-3.6, Safari 3-4, Chrome 4-5, Opera 9.6-10.1.
// Unit Tests - http://benalman.com/code/projects/jquery-throttle-debounce/unit/
//
// About: Release History
//
// 1.1 - (3/7/2010) Fixed a bug in <jQuery.throttle> where trailing callbacks
// executed later than they should. Reworked a fair amount of internal
// logic as well.
// 1.0 - (3/6/2010) Initial release as a stand-alone project. Migrated over
// from jquery-misc repo v0.4 to jquery-throttle repo v1.0, added the
// no_trailing throttle parameter and debounce functionality.
//
// Topic: Note for non-jQuery users
//
// jQuery isn't actually required for this plugin, because nothing internal
// uses any jQuery methods or properties. jQuery is just used as a namespace
// under which these methods can exist.
//
// Since jQuery isn't actually required for this plugin, if jQuery doesn't exist
// when this plugin is loaded, the method described below will be created in
// the `Cowboy` namespace. Usage will be exactly the same, but instead of
// $.method() or jQuery.method(), you'll need to use Cowboy.method().

/*!
Waypoints Inview Shortcut - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/

/*!
Waypoints Sticky Element Shortcut - 3.1.1
Copyright © 2011-2015 Caleb Troughton
Licensed under the MIT license.
https://github.com/imakewebthings/waypoints/blog/master/licenses.txt
*/

/*!
 * jQuery UI Core 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/category/ui-core/
 */

/*!
 * jQuery UI Mouse 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/mouse/
 *
 * Depends:
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Slider 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/slider/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

/*!
 * jQuery UI Position 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/position/
 */

/*!
 * jQuery UI Draggable 1.9.2
 * http://jqueryui.com
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/draggable/
 *
 * Depends:
 *	jquery.ui.core.js
 *	jquery.ui.mouse.js
 *	jquery.ui.widget.js
 */

define("fly/utils/object-helper-1.0",["jquery"],function(e){return{deepFind:function(e,t){if(!e||!t)return null;var n=t.split("."),s=n.length;for(i=0;i<s;i++){if(!e.hasOwnProperty(n[i]))return null;e=e[n[i]]}return e}}}),define("fly/utils/data-prefix-1.0",["jquery","version!fly/utils/string-helper"],function(e,t){var i=function(i,n){var s=e(this),o=s.data(n),a={};if(i)return e.each(o,function(e,n){0===e.indexOf(i)&&(e=e.substr(i.length),a[t.lowerFirst(e)]=n)}),a};return e.fn.dataPrefix=i,i}),define("fly/libs/jquery.widget-1.9.2",["jquery"],function(e){var t=0,i=Array.prototype.slice,n=e.cleanData;e.cleanData=function(t){for(var i,s=0;null!=(i=t[s]);s++)try{e(i).triggerHandler("remove")}catch(e){}n(t)},e.widget=function(t,i,n){var s,o,a,r,l=t.split(".")[0];t=t.split(".")[1],s=l+"-"+t,n||(n=i,i=e.Widget),e.expr[":"][s.toLowerCase()]=function(t){return!!e.data(t,s)},e[l]=e[l]||{},o=e[l][t],a=e[l][t]=function(e,t){if(!this._createWidget)return new a(e,t);arguments.length&&this._createWidget(e,t)},e.extend(a,o,{version:n.version,_proto:e.extend({},n),_childConstructors:[]}),r=new i,r.options=e.widget.extend({},r.options),e.each(n,function(t,s){e.isFunction(s)&&(n[t]=function(){var e=function(){return i.prototype[t].apply(this,arguments)},n=function(e){return i.prototype[t].apply(this,e)};return function(){var t,i=this._super,o=this._superApply;return this._super=e,this._superApply=n,t=s.apply(this,arguments),this._super=i,this._superApply=o,t}}())}),a.prototype=e.widget.extend(r,{widgetEventPrefix:o?r.widgetEventPrefix:t},n,{constructor:a,namespace:l,widgetName:t,widgetBaseClass:s,widgetFullName:s}),o?(e.each(o._childConstructors,function(t,i){var n=i.prototype;e.widget(n.namespace+"."+n.widgetName,a,i._proto)}),delete o._childConstructors):i._childConstructors.push(a),e.widget.bridge(t,a)},e.widget.extend=function(t){for(var n,s,o=i.call(arguments,1),a=0,r=o.length;a<r;a++)for(n in o[a])void 0!==(s=o[a][n])&&(e.isPlainObject(s)?t[n]=e.isPlainObject(t[n])?e.widget.extend({},t[n],s):e.widget.extend({},s):t[n]=s);return t},e.widget.bridge=function(t,n){var s=n.prototype.widgetFullName||t;e.fn[t]=function(o){var a="string"==typeof o,r=i.call(arguments,1),l=this;return o=!a&&r.length?e.widget.extend.apply(null,[o].concat(r)):o,a?this.each(function(){var i,n=e.data(this,s);return n?e.isFunction(n[o])&&"_"!==o.charAt(0)?(i=n[o].apply(n,r),i!==n&&void 0!==i?(l=i&&i.jquery?l.pushStack(i.get()):i,!1):void 0):e.error("no such method '"+o+"' for "+t+" widget instance"):e.error("cannot call methods on "+t+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new n(o,this))}),l}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(i,n){n=e(n||this.defaultElement||this)[0],this.element=e(n),this.uuid=t++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),i),this.bindings=e(),this.hoverable=e(),this.focusable=e(),n!==this&&(e.data(n,this.widgetName,this),e.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===n&&this.destroy()}}),this.document=e(n.style?n.ownerDocument:n.document||n),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(t,i){var n,s,o,a=t;if(0===arguments.length)return e.widget.extend({},this.options);if("string"==typeof t)if(a={},n=t.split("."),t=n.shift(),n.length){for(s=a[t]=e.widget.extend({},this.options[t]),o=0;o<n.length-1;o++)s[n[o]]=s[n[o]]||{},s=s[n[o]];if(t=n.pop(),void 0===i)return void 0===s[t]?null:s[t];s[t]=i}else{if(void 0===i)return void 0===this.options[t]?null:this.options[t];a[t]=i}return this._setOptions(a),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,"disabled"===e&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,i,n){var s,o=this;"boolean"!=typeof t&&(n=i,i=t,t=!1),n?(i=s=e(i),this.bindings=this.bindings.add(i)):(n=i,i=this.element,s=this.widget()),e.each(n,function(n,a){function r(){if(t||!0!==o.options.disabled&&!e(this).hasClass("ui-state-disabled"))return("string"==typeof a?o[a]:a).apply(o,arguments)}"string"!=typeof a&&(r.guid=a.guid=a.guid||r.guid||e.guid++);var l=n.match(/^(\w+)\s*(.*)$/),d=l[1]+o.eventNamespace,c=l[2];c?s.delegate(c,d,r):i.bind(d,r)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function i(){return("string"==typeof e?n[e]:e).apply(n,arguments)}var n=this;return setTimeout(i,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,i,n){var s,o,a=this.options[t];if(n=n||{},i=e.Event(i),i.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),i.target=this.element[0],o=i.originalEvent)for(s in o)s in i||(i[s]=o[s]);return this.element.trigger(i,n),!(e.isFunction(a)&&!1===a.apply(this.element[0],[i].concat(n))||i.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,i){e.Widget.prototype["_"+t]=function(n,s,o){"string"==typeof s&&(s={effect:s});var a,r=s?!0===s||"number"==typeof s?i:s.effect||i:t;s=s||{},"number"==typeof s&&(s={duration:s}),a=!e.isEmptyObject(s),s.complete=o,s.delay&&n.delay(s.delay),a&&e.effects&&(e.effects.effect[r]||!1!==e.uiBackCompat&&e.effects[r])?n[t](s):r!==t&&n[r]?n[r](s.duration,s.easing,o):n.queue(function(i){e(this)[t](),o&&o.call(n[0]),i()})}}),!1!==e.uiBackCompat&&(e.Widget.prototype._getCreateOptions=function(){return e.metadata&&e.metadata.get(this.element[0])[this.widgetName]})}),define("fly/components/base-1.0",["jquery","version!fly/utils/data-prefix","version!fly/libs/jquery.widget"],function(e){var t={},i={},n={setDefaultOptions:function(i,n){"string"==typeof i?(t[i]=t[i]||{},e.extend(!0,t[i],n)):e.extend(!0,t,i)},addDefaultEvents:function(i,s){var o;"string"==typeof i?(t[i]=t[i]||{},n.addDefaultEvent(i,s)):(o=i,e.each(o,function(e,t){n.addDefaultEvent(e,t)}))},addDefaultEvent:function(e,t){i[e]=i[e]||[],i[e].push(t)}};return e.widget("fly.base",{options:{defaultsDisabled:!1,defaultOptionsDisabled:!1,defaultEventsDisabled:!1},_setup:function(){var t=this,n=i[this.widgetName]||[];this.$element=this.element,this.$document=this.document,this.$window=this.window,n.length&&e.each(n,function(i,n){var s={};e.each(n,function(e,i){s[(t.widgetEventPrefix+e).toLowerCase()]=i}),t.$element.on(s)})},_getCreateOptions:function(){var t=this.getDefaultOptions(),i=this.getDataOptions(this.element);return e.extend(!0,{},t,i)},getDefaultOptions:function(){var e=this.options,i={};return e.defaultsDisabled||e.defaultOptionsDisabled||(i=t[this.widgetName]||{}),i},getDataOptions:function(e,t){return t=t||this.widgetName,e.data(t+"Options")||e.dataPrefix(t)},_triggerGlobal:function(e,t){this.$document.trigger(e,t)},_create:function(){this.$element=this.element},setOptionsFromData:function(){}}),n}),define("fly/managers/components-1.0",["jquery","version!fly/utils/string-helper","version!fly/utils/object-helper","version!fly/managers/debug","version!fly/components/base"],function(e,t,i,n,s){var o,a={attr:"data-component",includeContext:!0},r=n.init("components"),l={};return e(document).on("domUpdated",function(e,t){t=t||{},o.process(t.$context)}),o={process:function(i){var n=this;this.findByAttr(i).each(function(i,s){var o=e(s),a=o.data(),r=t.toCleanArray(a.component);e.each(r,function(e,t){n.init(t,o)})})},init:function(t,i,n){var s,o,a=l[t];a&&(n=n||{},s=e.makeArray(a.require)||[],o=t,a.alias&&(o=a.alias,n=e.extend(!0,{},a.options||{},n)),require(s,function(){i&&i.length&&e.isFunction(i[o])&&i[o](n)}),r.log("init: ",t,i,n))},setConfig:function(t){if(!e.isPlainObject(t))throw new Error("Component setConfig failure. Map is in the wrong format.");e.extend(a,t)},register:function(t){if(!e.isPlainObject(t))throw new Error("Component register failure. Map is in the wrong format.");e.each(t,function(e,t){l[e]=t,t.options&&s.setDefaultOptions(e,t.options),t.events&&s.addDefaultEvents(e,t.events)}),r.log("register: ",t)},findByAttr:function(t,i,n){var s,o="";return i=i&&!e.isArray(i)?[i]:i,i?e.each(i,function(e,t){o+=e>0?", ":"",o+="["+a.attr+'="'+t+'"], ['+a.attr+"*='\""+t+"\"']"}):o="["+a.attr+"]",t=t||e(document.body),s=t.find(o),n=void 0!==n?n:a.includeContext,n&&(s=s.addBack(o)),s}}}),define("fly/managers/tealium-1.0",["jquery","version!fly/managers/debug","version!fly/utils/guid"],function(e,t,i){var n=(e.support.touch,t.get("tealium"));return{trackingData:{},viewGuid:null,resetGuidEnabled:!0,init:function(e){this.trackingData=e,n.log("tealium::init:","loading tracking data",this.trackingData)},explicitTrackView:function(e){var e=void 0===e?{}:e;utag.view(e)},explicitTrackLink:function(e){var e=void 0===e?{}:e;utag.link(e)},setViewGuid:function(e){this.viewGuid=e,n.log("tealium::setViewGuid",this.viewGuid)},resetViewGuid:function(){return this.resetGuidEnabled&&(this.viewGuid=i.generate()),n.log("tealium::resetViewGuid",this.viewGuid),this.viewGuid},getViewGuid:function(){return this.viewGuid},syncResetViewGuid:function(){var e="";return e=this.resetViewGuid(),this.resetGuidEnabled=!this.resetGuidEnabled,e},getTrackingData:function(){return this.trackingData}}}),define("managers/tealium",["jquery","version!fly/managers/tealium","managers/page-vars","version!fly/managers/debug","utils/cookie"],function(e,t,i,n,s){function o(t){var i=e.support.touch?"vclick":"click";t.find("[data-omniture-track]").on(i,function(t){var i,n=e(this),s=n.data(),o=s.omnitureTrack;e.isPlainObject(o)?(i=o.data,o=o.event):i=s.omnitureTrackData,r.log("fire tracking event"),r.log("event info: ",o,i),omnitureMgr.trackEvent(o,i)})}function a(){adBlockCookieValue=s.read("adblock_status"),adBlockCookieValue=adBlockCookieValue&&0!==adBlockCookieValue.length?adBlockCookieValue:"",window.utag_data._adBlockStatus=adBlockCookieValue,window._sp_&&"function"==typeof window._sp_.isAdBlocking&&window._sp_.isAdBlocking(function(e){s.write("adblock_status",e?"is_adblocking":"not_adblocking")})}var r=n.get("tealium");"undefined"!=typeof _utag_obj&&!0===_utag_obj.isEnabled&&require(["optional!"+(window.trPageVars.services.tealium&&window.trPageVars.services.tealium.enabled?"tealium":"feature-disabled")]);var l={trackVideo:function(t,n){var s={_noLinkTrack:"LEVT",_videoAction:t,link_text:t,siteHier:i.tracking.data.siteHier,siteSection:i.tracking.data.siteSection,siteEdition:i.tracking.data.siteEdition,siteType:i.tracking.data.siteType,deviceType:i.tracking.data.deviceType,pageType:i.tracking.data.pageType,topicId:i.tracking.data.topicId,pageViewGuid:i.tracking.data.pageViewGuid,articleAuthorId:i.tracking.data.articleAuthorId,articleAuthorName:i.tracking.data.articleAuthorName,articleId:i.tracking.data.articleId,collectionId:i.tracking.data.collectionId};s="object"!=typeof s?{}:s,n="object"!=typeof n?s:e.extend(s,n),r.log(t,n),omnitureMgr.trackEvent(t,n)},_trackClickViaUtag:function(t,n,s,o,a){try{!0===i.tracking.enabled?(a="object"!=typeof a?{}:a,o="object"!=typeof o?a:e.extend(a,o),e.inArray(t,["om","omnitureMgr","utag"])>=0?(window[t][n](o),"object"==typeof window.s&&(window.s.events=""),r.log(s+" ping: ",o)):r.log("Invalid tracking object",t)):r.log(s+" aborted; tracking is not enabled!")}catch(e){r.log(s+" failed:",e)}},trackCustomEvent:function(e,t,i){var n={link_text:e,_clickAction:i||e,_noLinkTrack:"LEVT"};t._siteCode="techrepublic",this._trackClickViaUtag("utag","link",e,t,n)},trackComment:function(t,i,n){var s={link_text:t,_clickAction:n||t};this._trackClickViaUtag("utag","link",t,i,e.extend({},this._getUdoStockData(),s))},_getUdoStockData:function(){var e=i.tracking.data;return{siteEdition:e.siteEdition,pageViewGuid:e.pageViewGuid,pageType:e.pageType,siteHier:e.siteHier,siteType:e.siteType,deviceType:e.deviceType,articleId:e.articleId,articleTitle:e.articleTitle,articleType:e.articleType,articlePubDate:e.articlePubDate,articleAuthorId:e.articleAuthorId,articleAuthorName:e.articleAuthorName,topicId:e.topicId,topicName:e.topicName}},getHbParams:function(t){var n=new Array("siteEdition","siteSection","siteType","articleId","articleType","articleTitle","mediaAutoPlay","mfr","pageType","pageTypeId","pageOntologyId","pageViewGuid","productId","productName","productSeriesId","productSeriesName","productSlug","productType","showId","showTitle","showEpisodeId","showEpisodeTitle","userState","userId","userType","userRegId","deviceType","dwAnonId","videoAutoPlay","testName","testVersion","testGroup"),s=[],o={};t||(t={});for(var a=0;a<n.length;a++)utag_data[n[a]]&&(s[n[a]]=utag_data[n[a]]);return e.extend(o,s,{siteRsids:utag_data._scAccount,siteCode:utag_data._siteCode,pageUrl:utag_data._pageUrl,sitePrimaryRsid:utag_data._sitePrimaryRsid,userStatus:utag_data.userType,siteHier:utag_data._siteCode&&utag_data.siteHier&&utag_data.siteHier.length>0?utag_data._siteCode+":"+utag_data.siteHier.join("|"):"",collectionId:utag_data.collectionId&&utag_data.collectionId.length>0?utag_data.collectionId[0]:"",test:i.tracking.data.testName?i.tracking.data.testName+"|"+i.tracking.data.testVersion+"|"+i.tracking.data.testGroup:"",abtest:i.tracking.data.testName?i.tracking.data.testName+"|"+i.tracking.data.testVersion+"|"+i.tracking.data.testGroup:""},t),r.log("getHbParams",o),o}};t.initClickTracking=o,t.initClickTracking(e(document)),t._trackSourcePoint=a;var d=["directory-search-bar-top","directory-search-bar-bottom"];return e(".directory-search-bar").find("button#directory-search-button").each(function(t){t<d.length&&1!=e("button#directory-search-button").length&&e(this).addClass(d[t])}),e("button#directory-search-button").click(function(t){var i=e(this);i.hasClass("directory-search-bar-top")?omnitureMgr.trackEvent("moduleClick",{moduleInfo:"resourcelibrary-search-top"}):i.hasClass("directory-search-bar-bottom")?omnitureMgr.trackEvent("moduleClick",{moduleInfo:"resourcelibrary-search-bottom"}):omnitureMgr.trackEvent("moduleClick",{moduleInfo:"resourcelibrary-search"})}),e("#author-bio-header .socialFollow a[data-social='twitter']").click(function(e){omnitureMgr.trackEvent("clickSocialShare",{socialCode:9,socialService:"twitterFollow"})}),e.extend(t,l)}),define("managers/edition",["jquery","version!fly/managers/debug","managers/page-vars"],function(e,t,i){t=t.init("edition");var n={as:{code:"as",name:"Asia",language:"en"},au:{code:"au",name:"Australia",language:"en"},eu:{code:"eu",name:"Europe",language:"en"},in:{code:"in",name:"India",language:"en"},uk:{code:"uk",name:"United Kingdom",language:"en"},us:{code:"us",name:"United States",language:"en"}},s={code:"us"};return{getEdition:function(e){return n[e||s.code].code},getName:function(e){return n[e||s.code].name},getLanguage:function(e){return n[e||s.code].language},isAsia:function(){return s.code===n.as.code},isAustralia:function(){return s.code===n.au.code},isEurope:function(){return s.code===n.eu.code},isIndia:function(){return s.code===n.in.code},isUnitedKingdom:function(){return s.code===n.uk.code},isUnitedStates:function(){return s.code===n.us.code},isLanguageEnglish:function(){return"en"===n[s.code].language},isLanguageEspanol:function(){return"es"===n[s.code].language}}}),define("translations/form-validate",["managers/edition"],function(e){return{en:{availableEmail:"Email is already in use",availableUsername:"User Name is already in use",email:"Please enter a valid email",equalTo:"Fields do not match",forumTopics:"You must choose 1 - {maxcount} options",generic:"There was a problem with your submission. Please check every field and try again.",minlength:"This field must be at least {minlength} characters",maxlength:"This field must be no more than {maxlength} characters",noSpecialCharacters:"The special characters @, &, and % are not allowed in this field",noUrl:"A url is not allowed in this field",phone:"Please enter a valid phone number",postalCode:"Please enter a valid postal code",required:{field:"This field is required",radio:"One of these fields is required",modalAuthenticate:"Please fill out all required fields"},validPassword:"Password must be a minimum of 6 characters and have any 3 of the 4 items: a number (0 through 9), a special character (such as !, $, #, %), an uppercase character (A through Z) or a lowercase (a through z) character (no spaces).","invalid.loginpassword":"Invalid email/username and password combination supplied. After 6 failed login attempts you will be locked out of your account.","locked.account":"Too many attempts. Wait 5 minutes and try again, or reset your password.","invalid.email":"That’s not a valid email address. Try another.","inuse.email":"Email is already in use","inuse.userName":"User Name is already in use"}}[e.getLanguage()]}),define("fly/utils/string-vars-1.0",["jquery"],function(e){return{compile:function(t,i,n){var s=this;return"string"!=typeof t?"":(n=e.makeArray(n),t=t.replace(/\{([^}]+)\}/g,function(t){var o=n,a="";return t=t.replace(/\|[^\}|]+/g,function(e){return o.push(e.substr(1)),""}),a=i[t.replace(/[{}]+/g,"")]||"",e.each(o,function(e,t){a=s.modify(t,a)}),a}))},modify:function(e,t){switch(e){case"lower":t=t.toLowerCase();break;case"upper":t=t.toUpperCase();break;case"urlencode":t=encodeURIComponent(t)}return t}}}),define("fly/components/form-validate-1.0",["jquery","version!fly/utils/string-helper","version!fly/utils/string-vars","version!fly/managers/debug","version!fly/components/base"],function(e,t,i,n){var s=e.support.touch?"vclick":"click",o=n.init("formValidate");e.widget("fly.formValidate",e.fly.base,{options:{inlineErrorTemplate:'<label for="{id}" class="validate-{type}">{message}</label>',globalErrorTemplate:'<div class="alert alert-{type}">{message}</div>',classFieldStatus:"validate-{type}",animation:"slide",fieldSelector:'[data-item="field"]',ignoreHidden:!0,ignoreSelector:null,validateOnChange:!0,scrollToErrors:!1,attributes:["required","maxlength","minlength"],rules:{},success:function(e,t){t.$form.submit()},failure:function(e,t){},placeError:function(e,t){t.is(":checkbox, :radio")&&t.parent("label").length?e.insertAfter(t.parent("label")):e.insertAfter(t)}},rules:{required:{message:function(e){return e.is(":radio")?"One of these fields is required":"This field is required"},test:function(e){var t;return e.is(":radio")?(t=e.closest("form").find(':radio[name="'+e.attr("name")+'"]'),t.is(":checked")):!!(e.is(":checkbox")?e.is(":checked"):e.val())}},mailcheck:{type:"warning",message:null,test:function(e,t){var i=this,n=e.closest("form");return require(["fly/libs/mailcheck-1.1"],function(){e.mailcheck({suggested:function(o,a){i.message='Did you mean <a class="mailcheck" data-_insert="mailcheck">'+a.domain+"</a>?",n.on(s+".mailcheck",'[data-_insert="mailcheck"]',function(){e.val(a.full).trigger("change")}),t.reject("mailcheck")},empty:function(e){n.off(".mailcheck"),t.resolve()}})}),t.promise()}},availableEmail:{remote:!0,message:"Email is already in use"},availableUsername:{remote:!0,message:"User Name is already in use"},minlength:{message:function(e){return"This field must be at least "+e.attr("minlength")+" characters"},test:function(e){return e.val().length>=e.attr("minlength")}},maxlength:{message:function(e){return"This field must be no more than "+e.attr("maxlength")+" characters"},test:function(e){return e.val().length<=e.attr("maxlength")}},email:{message:"Please enter a valid email",test:function(e){return/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,4}$/i.test(e.val())}},noUrl:{message:"A url is not allowed in this field",test:function(e){return!/http:\/\//i.test(e.val())}},noSpecialCharacters:{message:"The special characters @, &, and % are not allowed in this field",test:function(e){return/^[^@&%]+$/i.test(e.val())}},equalTo:{message:"Fields do not match",test:function(t){var i=e('input[name="'+t.data("validate-equal-to")+'"]');return i.length&&t.val()===i.val()}}},wasSubmitted:!1,isWorking:!1,isFormValid:!1,_create:function(){var e=this.options,t={};this._setup(),this.$form=this.$element,this.$form.attr("novalidate","novalidate"),this.globalErrors=[],this.ignoreSelector=":submit, :reset, :image, [disabled]",e.ignoreHidden&&(this.ignoreSelector+=", :hidden"),e.ignoreSelector&&(this.ignoreSelector+=", "+e.ignoreSelector),this.addRules(e.rules),this._on(this.$form,{submit:"_handleSubmit"}),e.validateOnChange&&(t["focusout :input:not("+this.ignoreSelector+", [data-_enabled])"]="_handleFocusOut",t["keyup :input:not("+this.ignoreSelector+", [readonly])"]="_handleChange",t["change :input:not("+this.ignoreSelector+")"]="_handleChange",this._on(this.$form,t))},_handleSubmit:function(e){this._off(this.$form,"focusout"),this.wasSubmitted=!0,this.isFormValid||(e.preventDefault(),e.stopImmediatePropagation(),this.validate())},_handleFocusOut:function(t){e(t.target).attr("data-_enabled","true"),this._handleChange(t)},_handleChange:function(t){var i=e(t.target);this.isFormValid=!1,(this.wasSubmitted||i.data("_enabled"))&&(i.data("_passed",!1),this.testField(i))},getRule:function(e){return void 0!==this.rules[e]&&this.rules[e]},getRulesToValidate:function(t){var i=this,n=t.data("validate")||[],s=e.isArray(n)?n:n.split(" ");return e.each(this.options.attributes,function(e,i){t.attr(i)&&s.unshift(i)}),e.grep(s,function(e,t){return i.getRule(e)})},addRules:function(t){e.isPlainObject(t)&&e.extend(this.rules,t)},removeRule:function(e){!1!==this.getRule(e)&&delete this.rules[e]},setFieldDelegate:function(e){var t=null;return e.is(":radio")&&(t=this.$form.find(':radio[name="'+e.attr("name")+'"]').first()),e.data("_field_delegate",t),e},testField:function(t){var i,n=this,s=[],a=t.data()||{},r=a.error||{},l=e.Deferred();return a._passed?(l.resolve(),l.promise()):(this.setFieldDelegate(t),a.remoteRequest&&a.remoteRequest.abort(),i=this.getRulesToValidate(t),o.log("test field: ",t," w/ rules:",i),e.each(i,function(i,a){var l,d=n.getRule(a),c=!0,u=!!d.remote,h=null;if(u&&(h=d.remoteUrl||t.data("remoteUrl"),n.removeError(t)),l=function(){var i=e.Deferred(),s=null;return s=u?n.requestRemote(h,t,a,i):d.test(t,i),!1===s?(c=!1,i.reject(a)):!0===s&&i.resolve(a),i.promise()},l=l(),s.push(l),e.when(l).fail(function(){o.log("rule failed: ",a,t)}).then(function(){r.name===a&&n.removeError(t),o.log("rule passed: ",a,t)}),!c)return!1}),e.when.apply(null,s).fail(function(e){var i=n.getRule(e),s=i.type?i.type:"error",a=t.data(),r=a.error||{};a.remoteTimeout&&clearTimeout(a.remoteTimeout),a.remoteRequest&&a.remoteRequest.abort(),r.message!=n.getMessage(e,t)&&(n.removeError(t),n.addInlineError(t,e)),"error"!==s?(l.resolve(),o.log("field passed: ",t," type: ",s)):(l.reject(),o.log("field failed: ",t))}).then(function(){t.data("_passed",!0),n.removeError(t),l.resolve(),o.log("field passed: ",t)}),l.promise())},requestRemote:function(t,i,n,s){var o={},a=null,r=null,l=i.data()||{};l.remoteTimeout&&(clearTimeout(l.remoteTimeout),l.remoteQueue.resolve(n)),o[i.attr("name")]=i.val(),r=setTimeout(function(){a=e.ajax({type:"POST",dataType:"json",url:t,data:o,timeout:5e3,success:function(t){switch(t){case!0:s.resolve(n);break;case!1:s.reject(n);break;default:e.isPlainObject(t)&&t.status?"success"===t.status?s.resolve(n):s.reject(n):s.resolve(n)}},complete:function(){i.data("remoteRequest",null)},error:function(e,t){s.resolve(n),i.data("_passed",!1)}}),i.data({remoteRequest:a,remoteQueue:null,remoteTimeout:null})},300),i.data({remoteQueue:s,remoteTimeout:r})},validate:function(){var t=this.options,i=this,n=[];this.isWorking||!1!==this._trigger("validate")&&(this.isWorking=!0,this.removeGlobalErrors(),this.$form.find(":input").not(this.ignoreSelector).each(function(){var t=e(this);n.push(i.testField(t))}),e.when.apply(null,n).fail(function(){o.log("validate failed"),i._trigger("failure",null,{$form:i.$form}),t.scrollToErrors&&i.scrollToErrors()}).then(function(){o.log("validate success"),i.isFormValid=!0,i._trigger("success",null,{$form:i.$form}),i.isFormValid=!1}).always(function(){i._trigger("validated"),i.isWorking=!1}))},scrollToErrors:function(){var t=this.options,i=this.$form.find("[data-validate-error]").first(),n=i.closest(t.fieldSelector),s=(n.length?n:i).offset().top;!1!==this._trigger("scroll",null,{offset:s})&&(s-=this.$window.height()/6,e("html, body").animate({scrollTop:s},"fast"))},removeError:function(t){t=t.data("_field_delegate")||t;var i=this,n=this.options,s=t.data("error");s&&("slide"===n.animation?s.$error.slideUp("fast",function(){e(this).remove(),i._completeRemoveError(s,t)}):(t.remove(),this._completeRemoveError(s,t)),t.removeClass(s.fieldClass).removeData("error"))},getMessage:function(t,i){var n=this.getRule(t),s=i.data("validate-message-"+t)||i.data("validate-message-"+t.toLowerCase());return s||!1===s||(s=e.isFunction(n.message)?n.message(i):n.message),s},addInlineError:function(t,n){t=t.data("_field_delegate")||t;var s,o,a,r,l=this,d=this.options,c=t.data("error")||{},u={name:n,position:"inline"};"error"!==c.type&&(a=this.getMessage(n,t),s=this.getRule(n),o=s.type||"error",r=i.compile(d.inlineErrorTemplate,{type:o,id:t.attr("id"),message:a}),e.extend(u,{type:o,message:a,$error:e(r).attr("data-validate-error",!0),fieldClass:i.compile(this.options.classFieldStatus,{type:o})}),t.addClass(u.fieldClass).data("error",u),!1!==a&&("slide"===d.animation?(u.$error=e("<div />").wrapInner(u.$error),u.$error.hide(),d.placeError.call(this,u.$error,t),u.$error.slideDown("fast",function(){l._completeAddError(u,t)})):(d.placeError.call(this,u.$error,t),this._completeAddError(u,t))))},addGlobalError:function(t,n){n=n||"error";var s,o=this,a=this.options,r={position:"global",type:n,message:t};s=i.compile(a.globalErrorTemplate,{type:n,message:t}),e.extend(r,{$error:e(s).attr("data-validate-error",!0)}),"slide"===a.animation?(r.$error=e("<div />").wrapInner(r.$error),r.$error.hide().prependTo(this.$form).slideDown("fast",function(){o._completeAddError(r)})):(this.$form.prepend(r.$error),this._completeAddError(r)),this.globalErrors.push(r)},removeGlobalErrors:function(){var t=this;e.each(this.globalErrors,function(e,i){i.$error.remove(),t._completeRemoveError(i)})},removeInlineErrors:function(){var t=this;this.$form.find("[data-validate-error]").each(function(){var i=e(this),n=i.data();n.error&&t.removeError(i),n.remoteRequest&&n.remoteRequest.abort()})},_completeAddError:function(t,i){this._trigger("errorAdded",null,e.extend(t,{$field:i})),this.$document.trigger("displayChange",{type:"errorAdded"})},_completeRemoveError:function(t,i){this._trigger("errorRemoved",null,e.extend(t,{$field:i})),this.$document.trigger("displayChange",{type:"errorRemoved"})},_disable:function(){this.removeGlobalErrors(),this.removeInlineErrors()},_destroy:function(){this._disable()}})}),define("components/form-validate-1.0",["jquery","translations/form-validate","version!fly/utils/string-vars","version!fly/managers/debug","version!fly/components/form-validate"],function(e,t,i,n){var s=e.support.touch?"vclick":"click",o=n.init("formValidate");e.widget("fly.formValidate",e.fly.formValidate,{rules:{required:{message:function(e){return e.is(":radio")?t.required.radio:t.required.field},test:function(t){var i,n;return t.is(":text")?n=e.trim(t.val()):t.is(":checkbox")?n=t.is(":checked"):t.is("select")?n=!!(t.val().indexOf("NOTSELECTED")<0&&t.val()):t.is(":radio")?(i=t.closest("form").find(':radio[name="'+t.attr("name")+'"]'),n=i.is(":checked")):n=t.val(),!!n}},mailcheck:{type:"warning",message:null,test:function(e,t){var i=this,n=e.closest("form");return require(["fly/libs/mailcheck-1.1"],function(){e.mailcheck({suggested:function(o,a){i.message='Did you mean <a class="mailcheck" data-_insert="mailcheck">'+a.domain+"</a>?",n.on(s+".mailcheck",'[data-_insert="mailcheck"]',function(){e.val(a.full).trigger("change")}),t.reject("mailcheck")},empty:function(e){n.off(".mailcheck"),t.resolve()}})}),t.promise()}},availableEmail:{remote:!0,message:t.availableEmail},availableUsername:{remote:!0,remoteUrl:window.trPageVars.user.urls.userName,message:t.availableUsername},minlength:{message:function(e){return i.compile(t.minlength,{minlength:e.attr("minlength")})},test:function(e){return e.val().length>=e.attr("minlength")}},maxlength:{message:function(e){return i.compile(t.maxlength,{maxlength:e.attr("maxlength")})},test:function(e){return e.val().length<=e.attr("maxlength")}},email:{message:t.email,test:function(e){return/^[A-Z0-9._%+\-]+@[A-Z0-9.\-]+\.[A-Z]{2,63}$/i.test(e.val())}},noUrl:{message:t.noUrl,test:function(e){return!/http:\/\//i.test(e.val())}},noSpecialCharacters:{message:t.noSpecialCharacters,test:function(e){return/^[^@&%]+$/i.test(e.val())}},equalTo:{message:t.equalTo,test:function(t){var i=e('input[name="'+t.data("validate-equal-to")+'"]');return i.length&&t.val()===i.val()}},forumTopics:{message:function(e){return i.compile(t.forumTopics,{maxcount:e.data("maxcount")})},test:function(t){return numChecked=t.find("input").filter(":checked").length,maxCount=t.data("maxcount"),numChecked>=maxCount?e.each(t.find(":checkbox"),function(t,i){!1===this.checked&&e(this).attr("disabled",!0)}):e.each(t.find(":checkbox"),function(t,i){e(this).attr("disabled",!1)}),o.log("Num Checked: "+numChecked+", Max Count: "+maxCount),numChecked<=maxCount&&numChecked>0}},other:{message:function(e){return t.required.field},test:function(e){return $select=e.closest("form").find('[data-other="'+e.attr("name")+'"]'),"Other"!=$select.val()||!!e.val()}},postalCodeUS:{message:t.postalCode,test:function(e){var t=e.val(),i=!1;return/^\d{5}([ +-]??\d{4})??$/.test(t)&&(i=!0),t.length>=1&&t.length<=15&&i}},postalCodeCA:{message:t.postalCode,test:function(e){var t=e.val(),i=!1;return/^(?!.*[DFIOQU])[A-VXY][0-9][A-Z] ?[0-9][A-Z][0-9]$/.test(t)&&(i=!0),t.length>=1&&t.length<=15&&i}},postalCodeINTL:{message:t.postalCode,test:function(e){var t=e.val(),i=!1;return/[A-Z0-9]{0,8}[ -]?[A-Z0-9]{0,8}/.test(t)&&(i=!0),t.length>=1&&t.length<=15&&i}},phone:{message:t.phone,test:function(e){var t=e.val(),i=!1;return/^[0-9()+ -.x]+$/gm.test(t)&&(i=!0),t.length>=1&&t.length<=24&&i}},validPassword:{message:t.validPassword,test:function(e){var t=e.val(),i=0;return/[0-9]+/.test(t)&&i++,/[a-z]+/.test(t)&&i++,/[A-Z]+/.test(t)&&i++,/[\(\)\.@`!#\$%\^&*+=\-\[\]\\';,/\{\}\|":<>\?~_]+/.test(t)&&i++,i>=3&&t.length>=6&&-1==t.indexOf(" ")}}},options:{validateOnChange:!1,globalErrorPlacement:null},_create:function(){var e=this.options,t={};this._super(),this.ignoreSelector=":submit, :reset, :image, :hidden, [disabled]",e.validateOnChange&&(t["focusout fieldset [data-validate]:not("+this.ignoreSelector+", [data-_enabled])"]="_handleFieldsetFocusOut",
t["keyup fieldset [data-validate]:not("+this.ignoreSelector+")"]="_handleFieldsetChange",t["change fieldset [data-validate]:not("+this.ignoreSelector+")"]="_handleFieldsetChange",t.reset="_handleReset",this._on(this.$form,t)),"editProfileBasics"==e.formType&&this._handleEditBasicProfileForm()},validate:function(){var t=this.options,i=this,n=[];this.isWorking||(this.isWorking=!0,this.removeGlobalErrors(),this.$form.find(":input, fieldset [data-validate]").not(this.ignoreSelector).each(function(){var t=e(this),s=t.attr("data-validate")?t.attr("data-validate"):"";i.wasSubmitted&&(s.indexOf("postalCode")>=0||s.indexOf("validPassword")>=0||s.indexOf("phone")>=0)&&t.data("_passed")&&t.data("_passed",!1),i.wasSubmitted&&""===e.trim(t.val())&&t.data("_passed")&&t.data("_passed",!1),i.wasSubmitted&&t.is("select")&&t.val().indexOf("NOTSELECTED")>=0&&t.data("_passed")&&t.data("_passed",!1),i.wasSubmitted&&t.is(":checkbox")&&!t.is(":checked")&&t.data("_passed")&&t.data("_passed",!1),0===t.parents("fieldset [data-validate]").length&&n.push(i.testField(t))}),e.when.apply(null,n).fail(function(){o.log("validate failed"),i._trigger("failure",null,{$form:i.$form}),t.scrollToErrors&&i.scrollToErrors()}).then(function(){o.log("validate success"),i.isFormValid=!0,i._trigger("success",null,{$form:i.$form}),i.isFormValid=!1}).always(function(){i.isWorking=!1}))},testField:function(t){var i,n=this,s=[],a=t.data()||{},r=a.error||{},l=e.Deferred();return a._passed?(l.resolve(),l.promise()):(this.setFieldDelegate(t),a.remoteRequest&&a.remoteRequest.abort(),i=this.getRulesToValidate(t),o.log("test field: ",t," w/ rules:",i),e.each(i,function(i,a){var l,d=n.getRule(a),c=!0,u=!!d.remote,h=null;if(u&&(h=d.remoteUrl||t.data("remoteUrl"),n.removeError(t)),l=function(){var i=e.Deferred(),s=null;return s=u?n.requestRemote(h,t,a,i):d.test(t,i),!1===s?(c=!1,i.reject(a)):!0===s&&i.resolve(a),i.promise()},l=l(),s.push(l),e.when(l).fail(function(){o.log("rule failed: ",a,t)}).then(function(){r.name===a&&n.removeError(t),o.log("rule passed: ",a,t)}),!c)return!1}),e.when.apply(null,s).fail(function(e){var i=n.getRule(e),s=i.type?i.type:"error",a=t.data();a.error,a.remoteTimeout&&clearTimeout(a.remoteTimeout),a.remoteRequest&&a.remoteRequest.abort(),n.removeError(t),n.addInlineError(t,e),"error"!==s?(l.resolve(),o.log("field passed: ",t," type: ",s)):(l.reject(),o.log("field failed: ",t))}).then(function(){t.data("_passed",!0),n.removeError(t),l.resolve(),o.log("field passed: ",t)}),l.promise())},_handleFieldsetFocusOut:function(t){o.log("_handleFieldsetFocusOut"),e(t.target).closest("fieldset [data-validate]").attr("data-_enabled","true"),this._handleFieldsetChange(t)},_handleFieldsetChange:function(t){o.log("_handleFieldsetChange");var i=e(t.target).closest("fieldset [data-validate]");this.isFormValid=!1,(this.wasSubmitted||i.data("_enabled"))&&(i.data("_passed",!1),this.testField(i))},_handleReset:function(t){o.log("_handleReset");var i=e(t.target),n=i.find("input, select, textarea, fieldset");e.each(n,function(t,i){e(i).data("_passed",!1),"checkbox"==i.type&&e(i).prop("disabled",!1)})},_handleEditBasicProfileForm:function(){var t=this;this.$facebookUsername=this.$element.find("#user_facebookUsername"),this.$linkedInUsername=this.$element.find("#user_linkedInUsername"),this.$twitterUsername=this.$element.find("#user_twitterUsername"),this.$socialVerify=this.$element.find("#user_socialVerify"),""===e.trim(this.$facebookUsername.val())&&""===e.trim(this.$linkedInUsername.val())&&""===e.trim(t.$twitterUsername.val())||t.$socialVerify.attr("required",!0),this.$element.find("#user_facebookUsername, #user_linkedInUsername, #user_twitterUsername").focusout(function(){""!==e.trim(t.$facebookUsername.val())||""!==e.trim(t.$linkedInUsername.val())||""!==e.trim(t.$twitterUsername.val())?t.$socialVerify.attr("required",!0):t.$socialVerify.attr("required",!1)})},addInlineError:function(t,n){t=t.data("_field_delegate")||t;var s,o,a,r,l=this.options,d=t.data("error")||{},c={name:n,position:"inline"};"error"!==d.type&&(a=this.getMessage(n,t),s=this.getRule(n),o=s.type||"error",r=i.compile(l.inlineErrorTemplate,{type:o,id:t.attr("id"),message:a}),e.extend(c,{type:o,message:a,$error:e(r).attr("data-validate-error",!0),fieldClass:i.compile(this.options.classFieldStatus,{type:o})}),t.addClass(c.fieldClass).data("error",c),!1!==a&&("slide"===l.animation?(c.$error=e('<div class="warning-label" />').wrapInner(c.$error),l.placeError.call(this,c.$error,t)):(l.placeError.call(this,c.$error,t),this._completeAddError(c,t))),e(document).trigger("displayChange"))},removeError:function(e){e=e.data("_field_delegate")||e;var t=this.options,i=e.data("error");i&&("slide"===t.animation?i.$error.remove():(e.remove(),this._completeRemoveError(i,e)),e.removeClass(i.fieldClass).removeData("error"))},addGlobalError:function(t,n,s){n=n||"error";var o,a=this,r=this.options,l={position:"global",type:n,message:t};o=i.compile(r.globalErrorTemplate,{type:n,message:t}),e.extend(l,{$error:e(o).attr("data-validate-error",!0)}),"slide"===r.animation?(l.$error=e("<div />").wrapInner(l.$error),s?(l.$error.appendTo(s),a._completeAddError(l)):l.$error.hide().prependTo(this.$form).slideDown("fast",function(){a._completeAddError(l)})):(r.globalErrorPlacement?r.globalErrorPlacement.append(l.$error):this.$form.prepend(l.$error),this._completeAddError(l)),this.globalErrors.push(l)},getRulesToValidate:function(t){var i=this,n=t.attr("data-validate")||[],s=e.isArray(n)?n:n.split(" ");return e.each(this.options.attributes,function(e,i){t.attr(i)&&s.unshift(i)}),e.grep(s,function(e,t){return i.getRule(e)})}})}),define("managers/user-controller",["jquery","version!fly/utils/object-helper","version!fly/utils/string-helper","version!fly/utils/url-helper","version!fly/managers/debug","version!fly/managers/cookie","version!fly/managers/components","version!components/form-validate"],function(e,t,i,n,s,o,a){var r,l,d=!1,c=e.support.touch?"vclick":"click",u=e(document),h=e("<div>"),p=s.get("user"),m={},f=!1,g={permittedAppIds:[]},v=function(e){d?e():h.on("addEventQueue",e)},y={baseUrl:window.location.protocol+"//"+window.location.host,loadUserOnInit:!0,autoReplaceContent:!0,cookieName:"fly_user",urls:{login:"/user/login/",register:"/user/registration/",update:"/user/update/",forgotPassword:"/user/forgotten-password/",userData:{urlType:"relative",url:"/user/get-data/"}},events:{submit:function(){},submitted:function(){},userDataLoaded:function(e,t){r.updateDisplay()}},formValidate:{}};return l={initGating:function(t){t=t||u,t.find("[data-user-gate]").each(function(t,i){var n=e(i),s=n.data("_user-gate-init"),o=n.is("form")?"submit":c;s||(n.on(o+".userGate",l.handleGatedEvent),n.data("_user-gate-init",!0))})},handleGatedEvent:function(t){var i=e(this),n=i.data(),s=n.userGate,o=n.userShowParams,a=function(){i.data("userGateDisable",!0),setTimeout(function(){i.is("form")?i.submit():i[0].click(),i.data("userGateDisable",!1)},150)};n.userGateDisable||(t.preventDefault(),t.stopImmediatePropagation(),r.gate(a,s,o))},initForms:function(t){t=t||u,t.find("form[data-user-submit]").each(function(t,i){var n=e(i);n.data("_user-submit-init")||(r.initForm(n,n.data("user-submit")),n.data("_user-submit-init",!0))})}},r={init:function(t){var i;if(!d){this.setConfig(t),this.registerEvents(y.events),e.each(y.urls,function(e,t){t.urlType&&t.url?"relative"==t.urlType?y.urls[e]=t.url:y.urls[e]=y.baseUrl+t.url:0!==t.indexOf("http")&&(y.urls[e]=y.baseUrl+t)});var n=this;y.loadUserOnInit&&(i=o.get(y.cookieName),i?(this.setUserData(i),this.loadUserData(),h.one("userDataLoadFailure",function(){n.updateDisplay()})):n.updateDisplay()),this.process(),p.log("init: ",y),d=!0,h.trigger("addEventQueue"),h.trigger("init")}},process:function(){l.initGating(),l.initForms()},setLoggedIn:function(e){e=e||{},f=!0,this.setUserData(e)},setLoggedOut:function(){f=!1,this.updateDisplay(),e(document).trigger("userhasloggedout")},setUserData:function(t){e.extend(!0,g,t)},setConfig:function(t){e.extend(!0,y,t)},gate:function(e,t,i){var n=function(){try{e()}catch(e){p.log("gate: nextAction failed",e)}};p.log("gate: ",g),h.off("loginComplete.userGate"),f?n():(h.on("loginComplete.userGate",n),t&&!i.appId&&(i.appId=t),i.redirectUrl||(i.redirectUrl=window.location.href),"newsletter-sub-widget"==i.regSource||"newsletterPage"==i.regSource||"newsletter-button"==i.regSource||"newsletterPromo"==i.regSource?(omnitureMgr.trackEvent("trackRegistrationOpen",{registrationFormType:i.appId,position:i.regSource,location:i.regSource}),r.redirect("register",i)):(omnitureMgr.trackEvent("trackOpenLoginForm",{location:i.regSource,position:i.regSource}),r.redirect("login",i)))},initForm:function(t,i){var n=this;t.formValidate(e.extend(!0,{},y.formValidate,{success:function(e){n.submitForm(t,i)}}))},submitForm:function(s,o){var a=s.data("formValidate"),r=s.attr("action"),l=s.serializeArray()||[],d=e('[data-component="recaptcha"]',s);h.trigger("submit",{action:o}),h.trigger(o+"Submit"),l.push({name:"viewType",value:"json"}),e.ajax({dataType:"json",type:"POST",url:r,data:e.param(l)}).done(function(s,r,l){var d;if(s=s||{},y.autoReplaceContent&&s.content){var c="modal-"+i.fromCamelCase(o),u=e(".modal."+c);u.length>0&&u.each(function(){var t=e(this);t.is(":visible")?t.empty().append(s.content):t.remove()})}"success"===s.status?(s.appId=n.getParam("appId"),"register"===o&&(s.regSource=n.getParam("regSource"),s.position=n.getParam("position")),h.trigger(o+"Success",s)):"failure"===s.status&&(d=t.deepFind(s,"messages.error")||[],e.each(d.reverse(),function(e,t){a.addGlobalError(t,"error")}),h.trigger(o+"Failure",s))}).fail(function(t,i){a.addGlobalError("We are having technical difficulties. Please try again.","error"),h.trigger(o+"LoadFailure",t),"login"==o&&1==s.data("user-emailalert")&&e.ajax({dataType:"json",type:"POST",url:window.location.protocol+"//"+window.location.host+"/js/error",data:{urlCalled:r,response:t.responseText,error:i+" ("+t.status+")",email:s.find("#login_email").val()}})}).always(function(){if(void 0!==d)try{d.recaptcha("reload")}catch(e){}h.trigger("submitted",{action:o}),h.trigger(o+"Submitted")})},registerEvents:function(t){this.inIframe||v(function(){e.each(t,function(t,i){h.on(t,e.proxy(i,r)),t=t.split(".")[0],m[t]||(m[t]=function(e){h.trigger(t,e),p.log(t+": ",e)})})})},removeEvents:function(e){v(function(){h.off(e)})},redirect:function(e,t){if(e=y.urls[e]||e,t&&e.indexOf("?")<0){e+="?";for(var i in t)e+=i+"="+encodeURIComponent(t[i])+"&"}window.location.href=e},loadUserData:function(){var i,n=this;e.ajax({dataType:"json",type:"POST",url:y.urls.userData}).done(function(e){i=t.deepFind(e,"user")||{},n.setUserData(i),f=e.isLoggedIn||!1,h.trigger("userDataLoaded",i),p.log("user data loaded: ",e)}).fail(function(e,t){h.trigger("userDataLoadFailure"),p.log("user data load failure: ",e)})},updateDisplay:function(t,i){i=i||e("body");var n=i.find('[data-user-view="loggedIn"]'),s=i.find('[data-user-view="loggedOut"]'),o=i.find("[data-user-var]");t=t||g,f&&o.each(function(){var i=e(this),n=i.data("userVar"),s=i.data("userVarAttr");t[n]&&(s?i.attr(s,t[n]):i.text(t[n]))}),f?(n.show().css("visibility","visible"),s.hide(),e("body").removeClass("not-logged-in")):(s.show().css("visibility","visible"),n.hide(),e("body").addClass("not-logged-in")),h.trigger("displayUpdate"),u.trigger("displayChange",{type:"userDisplayUpdate"})},getConfig:function(){return y},getUserData:function(){return g}}}),define("managers/user",["jquery","managers/user-controller","version!fly/utils/url-helper","version!fly/managers/components"],function(e,t,i,n){var s=window.trPageVars,o=s.user.siloId;return t.setConfig({urls:{contactAuthor:window.location.protocol+"//"+window.location.host+"/user/contact-author/xhr/",shareArticle:window.location.protocol+"//"+window.location.host+"/user/share-email/xhr/"},formValidate:{scrollToErrors:!0},cookieName:"purs_"+o}),t}),define("fly/components/alert-1.0",["jquery","version!fly/components/base"],function(e){var t=e.support.touch?"vclick":"click";e.widget("fly.alert",e.fly.base,{options:{animation:"slide"},_create:function(){var e={};this._setup(),e[t+' [data-close="alert"]']="_handleClose",this._on(this.$element,e)},_handleClose:function(e){e.preventDefault(),this.close()},close:function(){switch(this.options.animation){case"slide":this.$element.slideUp("fast",e.proxy(this._completeClose,this));break;case"fade":this.$element.fadeOut("fast",e.proxy(this._completeClose,this));break;default:this.$element.remove(),this._completeClose()}},_completeClose:function(){this._trigger("closed",null,{$alert:this.$element})}})}),define("fly/components/carousel-1.0",["jquery","version!fly/utils/string-helper","version!fly/components/base"],function(e,t){var i=e.support.touch?"vclick":"click";e.widget("fly.carousel",e.fly.base,{options:{currentSlide:0,numOfVisibleSlides:1,incrementAmount:1,slideHeight:null,slideWidth:null,hidePreviousOnFirstSlide:!1,updatePagination:!1,pageUrlAttribute:"page-location",autoplayDelay:6e3,autoplayPauseOnHover:!0,autoplayPauseOnBlur:!0,classSelected:"selected",classActive:"active",classFocus:"focused",transitionType:"fade",transitionDuration:400,transitionEasing:"linear"},transitionTypes:{fade:{init:function(){var e=this.options;this.vertical=!1,this.items.slides.$elements.not("."+e.classSelected).hide()},showSlide:function(t){var i=this.options;e(this.items.slides.$elements[i.currentSlide]).fadeOut(i.transitionDuration,i.transitionEasing),e(this.items.slides.$elements[t]).fadeIn(i.transitionDuration,i.transitionEasing)}},slideHorizontal:{init:function(){var e=this.options;this.items.canvas.$element.css("left",-this.slideWidth*e.currentSlide)},showSlide:function(e){var t=this.options;this.items.canvas.$element.animate({left:-this.slideWidth*e},t.transitionDuration,t.transitionEasing)}},slideHorizontalInfinite:{init:function(){var e=this.options;this.infinite=!0,this.items.canvas.$element.css("left","0"),e.slideWidth&&-1==e.incrementAmount&&(e.incrementAmount=Math.floor(this.items.container.$element.width()/parseInt(e.slideWidth)))},showSlide:function(t){var i=this.options;if(t>0)this.items.canvas.$element.animate({left:-this.slideWidth*t},i.transitionDuration,i.transitionEasing,function(){for(var i=0;i<t;i++)this.items.canvas.$element.append(this.items.slides.$elements[i]);this.items.canvas.$element.css("left","0"),this.items.slides.$elements=e(this.items.slides.selector,this.$element)}.bind(this));else if(t<0){for(var n=this.items.slides.$elements.length-1;n>=this.items.slides.$elements.length+t;n--)this.items.canvas.$element.prepend(this.items.slides.$elements[n]);this.items.canvas.$element.css("left",this.slideWidth*t+"px"),this.items.slides.$elements=e(this.items.slides.selector,this.$element),this.items.canvas.$element.animate({left:"0"},i.transitionDuration,i.transitionEasing)}}},slideVertical:{init:function(){var e=this.options;this.vertical=!0,this.items.canvas.$element.css("top",-e.slideHeight*e.currentSlide)},showSlide:function(e){var t=this.options;this.items.canvas.$element.animate({top:-t.slideHeight*e},t.transitionDuration,t.transitionEasing)}},slideVerticalInfinite:{init:function(){var e=this.options;this.infinite=!0,this.vertical=!0,this.items.canvas.$element.css("top",-e.slideHeight*e.currentSlide)},showSlide:function(t){var i=this.options;if(t>0)this.items.canvas.$element.animate({top:-i.slideHeight*t},i.transitionDuration,i.transitionEasing,function(){for(var i=0;i<t;i++)this.items.canvas.$element.append(this.items.slides.$elements[i]);this.items.canvas.$element.css("top","0"),this.items.slides.$elements=e(this.items.slides.selector,this.$element)}.bind(this));else if(t<0){for(var n=this.items.slides.$elements.length-1;n>=this.items.slides.$elements.length+t;n--)this.items.canvas.$element.prepend(this.items.slides.$elements[n]);this.items.canvas.$element.css("top",i.slideHeight*t+"px"),this.items.slides.$elements=e(this.items.slides.selector,this.$element),this.items.canvas.$element.animate({top:"0"},i.transitionDuration,i.transitionEasing)}}}},_create:function(i){var n=this.options;this._setup(),this.items={viewport:{selector:'[data-item="viewport"]'},canvas:{selector:'[data-item="canvas"]'},slides:{selector:'[data-item="slide"]'},next:{selector:'[data-to="next"]'},prev:{selector:'[data-to="prev"]'},jumps:{selector:'[data-to]:not([data-to="next"], [data-to="prev"])'}},e.each(this.items,function(t,i){this.items[t].$elements=e(i.selector,this.$element),this.items[t].$element=this.items[t].$elements.length>0?e(this.items[t].$elements[0]):null}.bind(this)),this.items.container={$element:this.items.viewport.$element.parent()},this.infinite||(e(this.items.slides.$elements[n.currentSlide]).addClass(n.classSelected),this.items.jumps.$elements.length>0&&e('[data-to="'+n.currentSlide+'"]',this.items.jumps.$elements).addClass(n.classSelected)),this.$element.addClass(t.fromCamelCase(n.transitionType)),this.transitionTypes[n.transitionType].init.bind(this)(),this._setupEvents(),this.vertical||(this.items.viewport.$element.height(n.slideHeight),this.items.canvas.$element.height(n.slideHeight),this.items.slides.$elements.height(n.slideHeight),this.setWidths()),this.$element.addClass(n.classActive),e(this.items.slides.$elements[n.currentSlide]).addClass(n.classSelected),this.items.jumps.$elements.length>0&&e(this.items.jumps.$elements[n.currentSlide]).addClass(n.classSelected),n.hidePreviousOnFirstSlide&&n.currentSlide>0&&this.checkPreviousButton(n.currentSlide),n.autoplayDelay>0&&this.autoplay()},_setupEvents:function(){var t=this,n=t.options,s={};s[i+" "+this.items.next.selector]="next",s[i+" "+this.items.prev.selector]="previous",this.infinite||(s[i+" "+this.items.jumps.selector]=function(i){t.goto(parseInt(e(i.target).data("to"),10))}),this.items.slides.$elements.on("hover",function(i){t.items.slides.$elements.removeClass(n.classFocus),e(this).addClass(n.classFocus)}),this.vertical||this._on(this.$window,{resize:function(e){t.setWidths()}}),n.autoplayDelay>0&&(n.autoplayPauseOnHover&&e.extend(s,{mouseenter:function(e){t.interval&&t.pause()},mouseleave:function(e){t.interval||t.autoplay()}}),n.autoplayPauseOnBlur&&this._on(this.$window,{blur:function(e){t.interval&&t.pause()},focus:function(e){t.interval||t.autoplay()}})),this._on(this.$element,s)},_autoplayNextSlide:function(){var e=this.options;this.showSlide(this.infinite?e.incrementAmount:(e.currentSlide+e.incrementAmount)%this.items.slides.$elements.length)},_updatePushState:function(e){history.pushState&&history.pushState(null,null,e)},showSlide:function(t){var i=this.options;this.transitionTypes[i.transitionType].showSlide.bind(this)(t),this.infinite||(this.items.slides.$elements.removeClass(i.classSelected),this.items.jumps.$elements.removeClass(i.classSelected),e(this.items.slides.$elements[t]).addClass(i.classSelected),this.items.jumps.$elements.length>0&&e(this.items.jumps.$elements[t]).addClass(i.classSelected),i.currentSlide=t),i.updatePagination&&this._updatePushState(e(this.items.slides.$elements[t]).data(i.pageUrlAttribute)),this._trigger("slidechanged")},next:function(){var e=this.options;this.pause(!0),this.showSlide(this.infinite?e.incrementAmount:(e.currentSlide+e.incrementAmount)%this.items.slides.$elements.length),e.hidePreviousOnFirstSlide&&this.checkPreviousButton(e.currentSlide),this._trigger("next")},previous:function(){var e=this.options;this.pause(!0),this.showSlide(this.infinite?-e.incrementAmount:(e.currentSlide+this.items.slides.$elements.length-e.incrementAmount)%this.items.slides.$elements.length),e.hidePreviousOnFirstSlide&&this.checkPreviousButton(e.currentSlide),this._trigger("previous")},goto:function(e){var t=this.options;this.pause(!0),this.showSlide(e),t.hidePreviousOnFirstSlide&&this.checkPreviousButton(e),this._trigger("goto")},autoplay:function(){var e=this.options;e.autoplayDelay>0&&(this.interval=setInterval(this._autoplayNextSlide.bind(this),e.autoplayDelay),this._trigger("play"))},pause:function(e){var t=this.options;clearInterval(this.interval),this.interval=null,this._trigger("pause"),e&&(t.autoplayDelay=0,this._trigger("stop"))},setWidths:function(){var e=this.options;this.slideWidth=e.slideWidth?parseInt(e.slideWidth):this.items.container.$element.width()/this.options.numOfVisibleSlides,this.items.slides.$elements.width(this.slideWidth),this.items.canvas.$element.width(this.slideWidth*this.items.slides.$elements.length),this.items.canvas.$element.css("left",-this.slideWidth*e.currentSlide)},checkPreviousButton:function(t){0===t?e(this.items.prev.selector).css("visibility","hidden"):e(this.items.prev.selector).css("visibility","visible")}})}),define("components/carousel-1.0",["jquery","version!fly/components/carousel"],function(e){e.widget("fly.carousel",e.fly.carousel,{options:{},_create:function(){this.options,this._super("_create"),$jumps=this.$element.find(".jump"),this._setJumps($jumps)},_setJumps:function(e){e.width(100/e.size()+"%")}})}),define("fly/components/dropdown-1.0",["jquery","version!fly/components/base"],function(e){var t="ontouchstart"in window||"onmsgesturechange"in window,i=e.mobile?"vclick":"click";e.widget("fly.dropdown",e.fly.base,{options:{classSelected:"selected",event:"click",selectorTrigger:'[data-item="trigger"]'},$element:null,$trigger:null,enterTimeout:null,leaveTimeout:null,_create:function(){var e=this.options,n={};this._setup(),t&&(e.event="click"),this.$element=this.$element,this.$trigger=this.$element.find(e.selectorTrigger).first(),"click"===e.event?(n[i]="_handleClick",this._on(this.$trigger,n)):"hover"===e.event&&this._on(this.$element,{mouseenter:"_handleMouseEnter",mouseleave:"_handleMouseLeave"})},_handleClick:function(e){e.preventDefault(),this.toggle()},_handleMouseEnter:function(e){var t=this;clearTimeout(this.leaveTimeout),this.enterTimeout=setTimeout(function(){t.show()},50)},_handleMouseLeave:function(e){var t=this;clearTimeout(this.enterTimeout),this.leaveTimeout=setTimeout(function(){t.hide()},150)},_handleDocClick:function(t){var i=e(t.target);0===this.$element.has(i).length&&e.contains(document.documentElement,i[0])&&this.hide()},show:function(){var e=this,t=this.options,n={};this.$element.addClass(t.classSelected),setTimeout(function(){n[i]="_handleDocClick",e._on(e.$document,n)},1),this._trigger("shown",null,{$element:this.$element,$trigger:this.$trigger})},hide:function(){var e=this.options;this.$element.removeClass(e.classSelected),this._off(this.$document,i),this._trigger("hidden",null,{$element:this.$element,$trigger:this.$trigger})},toggle:function(){var e=this.options;this[this.$element.hasClass(e.classSelected)?"hide":"show"]()}})}),define("fly/components/modal-1.0",["jquery","version!fly/components/base"],function(e){var t=e.support.touch?"vclick":"click";e.widget("fly.modal",e.fly.base,{options:{content:null,position:"absolute",classModal:"modal",classBackdrop:"modal-backdrop",classShow:"show",classFixed:"fixed",enableKeyEvents:!0,openOnInit:!1,template:null},$modal:null,$backdrop:null,$body:null,isOpen:!1,eventData:{},_create:function(){var i=this.options,n="fixed"===i.position?" "+i.classFixed:"",s={},o={};this._setup(),this.$modal=this.$element.addClass(i.classModal+n),this.$backdrop=e("<div>").addClass(i.classBackdrop+n),this.$body=e(document.body),this.top=parseInt(this.$modal.css("top"),10),i.content&&this.setContent(i.content),this.eventData={$modal:this.$modal,$backdrop:this.$backdrop},s[t]="_handleClose",o[t+' [data-close="modal"]']="_handleClose",this._on(this.$backdrop,s),this._on(this.$modal,o)},_init:function(){this.options.openOnInit&&this.open()},_handleKeyboard:function(e){27==e.keyCode&&this.close()},_handleClose:function(e){e.preventDefault(),this.close()},open:function(){var e=this.options;this.isOpen||!1!==this._trigger("open",null,this.eventData)&&(this.$backdrop.addClass(e.classShow).appendTo(this.$body),this.$modal.addClass(e.classShow).appendTo(this.$body),this.position(),e.enableKeyEvents&&this._on(this.$document,{keyup:"_handleKeyboard"}),this.isOpen=!0,this._trigger("opened",null,this.eventData))},close:function(){var e=this.options;this.isOpen&&!1!==this._trigger("close",null,this.eventData)&&(this.$backdrop.removeClass(e.classShow),this.$modal.removeClass(e.classShow),this._off(this.$document,"keyup"),this.isOpen=!1,this._trigger("closed",null,this.eventData))},setContent:function(t){var i,n=this.options,s=this,o=e(t);o.hasClass(n.classModal)&&(o.removeClass(n.classModal),i=o.prop("attributes"),e.each(i,function(){"class"===this.name?s.$modal.addClass(this.value):s.$modal.attr(this.name,this.value)}),o=o.children()),this.$modal.empty().append(o),this._trigger("contentSet",null,e.extend({},this.eventData,{$modal:this.$modal,$content:o}))},position:function(){var e=this.options,t=this.$window.height(),i=isNaN(this.top)?(t-this.$modal.outerHeight())/3:this.top;i<20&&(i=20),"absolute"==e.position&&(i+=this.$window.scrollTop(),this.$backdrop.css({height:this.$document.height()})),this.$modal.css({top:i}),this._trigger("positioned",null,{$modal:this.$modal})},_destroy:function(){this.$backdrop.remove()}}),e(document).on(t+".modal-api.data-api",'[data-open="modal"]',function(t){var i=e(this),n=i.data(),s=n.$modal;t.preventDefault(),s||(s=e(n.target||i.attr("href")),i.data("$modal",s)),s.length&&s.modal().modal("open")})}),define("fly/components/loading-1.0",["jquery","version!fly/utils/string-vars","version!fly/components/base"],function(e,t){e.widget("fly.loading",e.fly.base,{options:{disabled:!1,delay:100,timeout:25e3,initState:"",template:'<div class="{baseClass} {stateClass}"><span class="text">{text}</span></div>',classes:{base:"loader",idle:"",loading:"loading",end:"load-end",error:"load-error"},text:{idle:"",loading:"Loading",end:"The End",error:"Error Encountered :("}},_create:function(){this._setup(),this._state=null,this._timeoutId=null},_init:function(){var e=this.options;!e.disabled&&e.initState&&(this._setContent(e.initState),this._state=e.initState)},_setContent:function(i,n){var s,o=this.options;if("remove"===i)return void this.$element.empty();s=t.compile(o.template,e.extend({state:i,baseClass:o.classes.base,stateClass:o.classes[i],text:o.text[i]},n)),this.$element.html(s)},add:function(){var t=this.options;!1!==this._trigger("add")&&(this.update("loading"),"number"==typeof t.timeout&&t.timeout>0&&(this._timeoutId=setTimeout(e.proxy(this.remove,this),t.timeout)),this._trigger("added"))},remove:function(){!1!==this._trigger("remove")&&(this.update("remove"),this._trigger("removed"))},update:function(e,t){var i=this.options,n={state:e};!1!==this._trigger("update",null,n)&&(this._state=e,i.disabled||(clearTimeout(this._timeoutId),this._setContent(e,t),this._trigger("updated",null,n)))},isLoading:function(){return"loading"===this._state},getState:function(){return this._state},_setOption:function(e,t){var i=this.options;"data"===e?this.$element.data("data",t):"disabled"===e&&(!0===t?this.$element.empty():this._setContent(i.initState)),this._super(e,t)},_destroy:function(){this.$element.remove()}})}),define("fly/components/modal-async-1.0",["jquery","version!fly/utils/object-helper","version!fly/components/modal","version!fly/components/loading","version!fly/utils/data-prefix"],function(e,t){var i=e.support.touch?"vclick":"click";e.widget("fly.modalAsync",e.fly.modal,{options:{url:null,requestData:{},responseKey:"modal",loader:{disabled:!1}},isContentLoaded:!1,_create:function(){this._super(),this._setupLoader()},open:function(){this.isOpen||(this.isContentLoaded||this.loadContent(),this._super())},_setupLoader:function(){this.loader=e.fly.loading(this.options.loader),this.loader.$element.appendTo(this.$element)},loadContent:function(){var i=this.options,n=this;this.loader.add(),e.ajax({dataType:"json",url:i.url,data:i.requestData}).done(function(s){var o=t.deepFind(s,i.responseKey)||{},a=o.html;if(!a)return void n.destroy();n._trigger("contentLoaded",null,e.extend({},this.eventData,{content:a})),n.isContentLoaded=!0,n.setContent(a),n.$backdrop.css({height:n.$document.height()})}).fail(function(e,t){n.destroy()}).always(function(){n.loader.remove()})},_destroy:function(){this._trigger("destroy"),this._super(),this.$modal.remove()}}),e(document).on(i+".modalAsync-api.data-api",'[data-open="modalAsync"]',function(t){var i,n=e(this),s=n.data(),o=s.$modal;n.data("modalOptions").checkIE?$checkIE=n.data("modalOptions").checkIE:$checkIE=!1,!$checkIE||-1==navigator.appVersion.indexOf("MSIE 8.")&&-1==navigator.appVersion.indexOf("MSIE 7.")?(t.preventDefault(),t.stopImmediatePropagation(),o?o.open():(i=n.data("modalAsyncOptions")||n.dataPrefix("modalAsync"),o=e.fly.modalAsync(e.extend(!0,{},{openOnInit:!0,destroy:function(){n.removeData("$modal")}},i)),n.data("$modal",o))):($url="//"+location.host+n.attr("href"),window.open($url))})}),define("fly/utils/data-selector-1.0",["jquery"],function(e){e.extend(e.expr[":"],{data:e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}})})}),define("fly/components/tabs-1.0",["jquery","version!fly/components/base","version!fly/utils/data-selector"],function(e){var t=e.support.touch?"vclick":"click";e.widget("fly.tabs",e.fly.base,{options:{tabSelector:'[data-item="trigger"]',classSelected:"selected",enableDeselect:!1},_create:function(){var e=this.options,i={};this._setup(),i[t+" "+e.tabSelector]="_handleClick",this._on(this.$element,i)},_handleClick:function(t){var i=this.options,n=e(t.target).closest(i.tabSelector);t.preventDefault(),this.change(n)},_getContent:function(t){var i,n=t.data()||{},s=n.$content||[];return s.length?s:(i=n.target||t.attr("href"),s=e(i),t.data("$content",s),s)},_show:function(e){var t,i=this.options;!1!==this._trigger("show",null,{$tab:e})&&(t=this._getContent(e),e.addClass(i.classSelected),t.addClass(i.classSelected),this._trigger("shown",null,{$tab:e,$content:t}))},_hide:function(e){var t,i=this.options;!1!==this._trigger("hide",null,{$tab:e})&&(t=this._getContent(e),e.removeClass(i.classSelected),t.removeClass(i.classSelected),this._trigger("hidden",null,{$tab:e,$content:t}))},change:function(e){var t,i=this.options;if(t=this.$element.find(i.tabSelector+"."+i.classSelected),e.data(),e.hasClass(i.classSelected))return void(i.enableDeselect&&this._hide(t));this._hide(t),this._show(e)}}),e(document).on(t+".tabs-api","[data-tabs-show]",function(t){var i,n=e(this),s=n.data(),o=e(s.tabsShow||n.attr("href"));t.preventDefault(),o.length&&(i=o.parents(":data(tabs)"),i.length&&i.data("tabs").change(o))})}),define("components/tabs-1.0",["jquery","version!fly/managers/debug","version!fly/managers/cookie","version!fly/utils/data-selector","version!fly/components/loading","version!fly/components/tabs"],function(e,t,i){var n=e.support.touch?"vclick":"click",s=t.init("tabs");e.widget("fly.tabs",e.fly.tabs,{options:{cookie:{enabled:!1,name:"fly_tabs",domain:"techrepublic.com"},pushStateHash:!0},_create:function(){var t,n=this.options;this._super("_create"),this.elementId=this.$element.attr("id")||null,this.viewedTabs=i.get(n.cookie.name)||{},this.hasTabData=!!(n.cookie.enabled&&this.elementId in this.viewedTabs),s.log("CookieData: ",this.viewedTabs),s.log("Cookie enabled: "+n.cookie.enabled+", ElementId: "+this.elementId+", Have tab data? "+this.hasTabData),this.hasTabData&&(s.log("Does data exist: ",this.viewedTabs[this.elementId]),t=this.$element.find("[href='"+this.viewedTabs[this.elementId]+"']"),this.change(t)),window.location.hash&&this.change(e('[data-target="'+window.location.hash+'"],[href="'+window.location.hash+'"]'))},_show:function(e){var t=this.options,n=this._getContent(e);e.addClass(t.classSelected),n.addClass(t.classSelected),s.log("Cookie enabled check: ",t.cookie.enabled),t.cookie.enabled&&(this.viewedTabs[this.elementId]=e.attr("href"),s.log("Set cookie: ",JSON.stringify(this.viewedTabs)),i.set(t.cookie.name,JSON.stringify(this.viewedTabs),{expires:365,path:"/",domain:t.cookie.domain})),this._trigger("shown",null,{$tab:e,$content:n})},_getContent:function(t){var i,n=t.data()||{},s=n.$content||[];return s.length?s:(i=n.target||t.attr("href"),s=e(i),
$container=e(s[0]).find("[data-tab-url]"),url=$container.data("tab-url"),url?(loader=e.fly.loading({disabled:!1}),loader.$element.prependTo(s),loader.add(),e(s[0]).find(".alert").remove(),this._requestTabData(url,function(i){i?($container.data("tab-url",!1),$container.append(i)):(e('<div class="alert alert-error">There was an error loading tab data. Please switch tabs and try again.</div>').prependTo(s),t.data("$content",[])),loader.remove()})):t.data("$content",s),s)},_requestTabData:function(t,i){s.log("AJAX requesting tab from ",t),e.ajax({url:t,type:"GET",dataType:"json"}).done(function(n){s.log("success requesting tab from ",t),"function"==typeof i&&i(!n.error&&e(n.html))}).fail(function(){s.log("AJAX error"),"function"==typeof i&&i(!1)}).always(function(){s.log("AJAX complete")})},change:function(e){var t,i=this.options,n=e.data("target"),o=window.location.pathname?window.location.pathname:"";e.hasClass(i.classSelected)||(n||(n=e.attr("href")),t=this.$element.find(i.tabSelector+"."+i.classSelected),e.data(),this._hide(t),this._show(e),i.pushStateHash&&(s.log("Updating URL:",o),history.pushState(null,document.title,o+n)))}}),e(document).on(n+".tabs-api",'[data-show="tabs"]',function(t){var i,n=e(this),s=n.data(),o=e(s.target||n.attr("href"));t.preventDefault(),o.length&&(i=o.parents(":data(tabs)"),i.length&&i.data("tabs").change(o))})}),define("optional",[],{load:function(e,t,i){var n=function(e){var t={};return"object"==typeof console&&"function"==typeof console.log&&console.log("The RequireJS Optional plugin is returning the following default response for the module: "+e,t),t},s=function(e){i(e)};t([e],s,function(e){var i=e.requireModules&&e.requireModules[0];"object"==typeof console&&"function"==typeof console.error&&console.error("Failed to load RequireJS module: "+i+"; the Optional plugin is handling the following exception:",e),i&&(requirejs.undef(i),define(i,[],function(){return n(i)}),t([i],s))})}}),define("utils/urs-helper",["jquery","version!fly/managers/debug","optional!urs"],function(e,t){t=t.init("ursHelper");var i={309:344,311:344,312:344,356:344};return{getSocialAppId:function(e){return i[e]},getUrs:function(e,t){var i={};return"object"==typeof window.URS&&"function"==typeof URS.getInstance&&"function"==typeof URS.newInstance&&(i=URS.getInstance(e,"v2.2"),i=URS.newInstance({appId:e,environment:URS.ursEnvironments.LIVE,version:"v2.2",clientToken:"5924deb58c854a58"}),t&&t(i)),i},getSocialSite:function(e){return site=e.toLowerCase(),e.indexOf("facebook")>=0?URS.social.sites.FACEBOOK:URS.social.sites.LINKED_IN}}}),define("components/dnb",["jquery","version!fly/managers/debug","version!fly/utils/url-helper","version!fly/components/base"],function(e,t,i){var n=t.init("dnb");e.widget("tr.dnb",e.fly.base,{appId:356,csrfToken:null,regSource:"download",dnbUrl:"/user/dnb/",rdsUrl:"/resource-library/rds/logevent",_create:function(){this._setup()},setRegSource:function(e){this.regSource=e},setupDNBPixel:function(t){var i=this;i._logRDS(19),this.csrfToken=t,require(["dnb_sync","dnb_coretag"],function(){dnbvid.getData("vid1250","json","T",function(t){var s=t.hasOwnProperty("jobSeniority")?t.jobSeniority:"";t.hasOwnProperty("duns")&&(n.log("Looking up DNB using duns: ",t.duns),i._logRDS(25),e.ajax({type:"POST",url:i.dnbUrl,data:{csrfToken:i.csrfToken,call:"retrievePixel",param:t.duns,jobseniority:s}}).done(function(e){i._populateForm(e)}))})})},_logRDS:function(t){var i=this;e.ajax({dataType:"json",url:i.rdsUrl,data:{eventId:t,promo:"",appId:i.appId,regSource:i.regSource},type:"GET"})},_populateForm:function(t){var i=!1;t.hasOwnProperty("contact")&&(e("#user_siloUserData").val(t.contact.jobSeniority),e("#user_firstName").val(t.contact.givenName).trigger("change"),e("#user_lastName").val(t.contact.familyName).trigger("change"),e("#user_jobFunc").val(t.contact.jobFunction).trigger("change"),e("#user_phone").val(t.contact.telephoneNumber).trigger("change"),""!==t.contact.telephoneNumber&&(i=!0)),t.hasOwnProperty("company")&&(e("#user_country").val(t.company.country).trigger("change"),e("#user_company").val(t.company.companyName).trigger("change"),e("#user_address1").val(t.company.address1).trigger("change"),e("#user_city").val(t.company.city).trigger("change"),e("#user_state").val(t.company.state).trigger("change"),e("#user_postalCode").val(t.company.zip).trigger("change"),i||e("#user_phone").val(t.company.phoneNumber).trigger("change"),e("#user_industry").val(t.company.industry).trigger("change"),e("#user_companySize").val(t.company.companySize).trigger("change"))},dnbEmailSearch:function(t,i){n.log("Performing email search");var s=this;this.csrfToken=t,this._logRDS(20),e.ajax({type:"POST",url:s.dnbUrl,data:{csrfToken:s.csrfToken,call:"searchEmail",param:i}}).done(function(t){if(t.hasOwnProperty("contact")&&s._populateForm(t),!t.hasOwnProperty("company")){s._logRDS(21);var n=e("#user_country").val();e.ajax({type:"POST",url:s.dnbUrl,data:{csrfToken:s.csrfToken,call:"searchDomain",param:i,country:n}}).done(function(e){s._populateForm(e)})}})},setupCompanySearch:function(){n.log("Setting up autocomplete on company");var t=this;require(["version!libs/jquery/ui/jquery.ui.autocomplete"],function(){e("#user_company").autocomplete({source:function(i,n){e.post(t.dnbUrl,{csrfToken:t.csrfToken,call:"searchCompany",country:e("#user_country").val(),term:e("#user_company").val()},n)},minLength:3,select:function(i,n){t._logRDS(23),e.ajax({type:"POST",url:t.dnbUrl,data:{csrfToken:t.csrfToken,call:"lookupCompany",param:n.item.id}}).done(function(e){t._populateForm(e)})},search:function(e,i){t._logRDS(22)}}).data("autocomplete")._renderItem=function(t,i){return e("<li></li>").data("item.autocomplete",i).append('<a class="ui-corner-all"><div class="autocomplete-company-div">'+i.companyName+'</div><div class="autocomplete-address-div">'+(i.address?i.address:"")+(i.location?"<br>"+i.location:"")+"</div></a>").appendTo(t)}})},setupCountryEvent:function(){var t=this;e("#user_country").change(function(e){e.originalEvent&&t._clearFields()})},_clearFields:function(){e("#user_company").val("").trigger("change"),e("#user_industry").val("").trigger("change"),e("#user_address1").val("").trigger("change"),e("#user_city").val("").trigger("change"),e("#user_state").val("").trigger("change"),e("#user_companySize").val("").trigger("change"),e("#user_postalCode").val("").trigger("change"),e("#user_phone").val("").trigger("change")}})}),define("managers/dnb",["jquery","components/dnb"],function(e){return e.tr.dnb()}),define("components/authentication",["jquery","version!fly/managers/debug","version!fly/managers/components","managers/page-vars","version!fly/utils/url-helper","utils/cookie","utils/urs-helper","translations/form-validate","managers/dnb","version!fly/components/base","version!components/form-validate","version!fly/components/loading"],function(e,t,n,s,o,a,r,l,d){t=t.init("authentication");var c=["STUDENT","RETIRED","UNEMPLOYED","OTHERNOTEMP"],u=["company","companySize","industry"],h=["AU","BR","CA","CU","IN","MX","US"],p=["state"],m=["CA","US"];e.widget("tr.authentication",e.fly.base,{options:{classSelected:"selected",classShow:"show",classActive:"active",classFade:"fade"},appId:309,longformAppId:356,position:"header-register",trackingMap:{309:"|short",311:"|community",312:"|newsletters",356:"|long"},step:"start",steps:["customQuestions","forgot","gatedUpdate","login","loginOrRegister","register","socialRegister","start"],$form:null,$modal:null,loading:!1,nextAction:null,redirect:!1,refresh:!1,hash:!1,socialRegistration:!1,userData:null,globalErrors:[],_create:function(){t.log("Initialize authentication component"),this._setup(),this._setupPageEvents(),this._loadUserData(),this._checkForOpenLoginOnLoad()},_setupPageEvents:function(){var i=this;this.$document.on("click","[data-authentication]",function(n){var s=e(this).data("authentication");t.log("Authentication data: ",s),s.appId&&(i.appId=s.appId),s.position&&(i.position=s.position),d.setRegSource(i.position),s.step?i.step=s.step:i.step="start",s.hash&&(i.hash=s.hash),s.redirect&&(i.redirect=s.redirect),"boolean"==typeof s.refresh&&(i.refresh=s.refresh),s.newsletter&&(i.newsletter=s.newsletter),i.socialRegistration=!1,i.getUserData(function(e,n){t.log("User login status: ",n.isLoggedIn),n.isLoggedIn||i._show(i.step)})})},_show:function(i){t.log("Show step: ",i);var o=this;if(!this.loading)if("start"==i||"loginOrRegister"==i&&this.appId==this.longformAppId)this.loading=!0,this.$modal&&this.$modal.remove(),e.ajax({data:{appId:o.appId},dataType:"json",url:s.user.urls.modal}).done(function(t){o.$modal=e(t.html).addClass("appId"+o.appId).appendTo(e("body")),o.$form=o.$modal.find("form"),o.$buttons=o.$modal.find("button"),o.loader=e.fly.loading({template:'<div class="{baseClass} {stateClass} modal-loading-circle"></div>'}),o._setStep(i),n.process(o.$modal),o._setupModalEvents(),o.loading=!1}).fail(function(){t.log("Request for modal failed")});else{this.globalErrors=[],this.$form.data("formValidate").removeGlobalErrors();var a=this.$modal.find("._"+this.step),r=100*(2*a[0].children.length+.5);setTimeout(function(){o._setStep(i)},r),o._fadeOutStep()}},_setStep:function(t){var i=this;if(this.$modal){var n=this.$modal.find("._"+this.step+" input[type=email]").val();this.$modal.find("._"+t+" input[type=email]").val(n)}this.step=t,"register"!==this.step&&"socialRegister"!==this.step||this._populateCountry(),this.$errors=this.$form.find("._"+this.step+" div.alert-error"),this.$requiredError=this.$errors.find("div.required-error"),this.$modal&&(this.$modal.removeClass(this.steps.join(" ")).addClass(this.step+" "+this.options.classShow),"register"!==this.step&&"gatedUpdate"!==this.step||this.appId!==this.longformAppId?this.$modal.find("._"+this.step).addClass(this.options.classActive):(d.setupDNBPixel(i.$form.find("#authentication_csrf").val()),this.$modal.find("._register, div.longform-registration-1, div.gated-update-1").addClass(this.options.classActive)),this.$modal.find("input:not([type=hidden])").attr("disabled",!0),this.$modal.find("select:not([type=hidden])").attr("disabled",!0),this.$modal.find("._"+this.step+" input").removeAttr("disabled"),this.$modal.find("._"+this.step+" select").removeAttr("disabled"),this.$buttons.prop("disabled",!1),this.$modal.find("[data-app-ids]").each(function(t,n){var s=e(n);s.data("appIds").indexOf(i.appId)<0&&s.attr("disabled",!0)}),this.$modal.find('[data-focus="'+this.step+'"]').trigger("focus"),e("html").css("overflow","hidden"),e("body").addClass("noScroll"))},_fadeOutStep:function(){this.$modal.find(this.options.classFade).removeClass(this.options.classFade);var t=this.$modal.find(".active");t&&e(t).removeClass(this.options.classActive).addClass(this.options.classFade)},_setupModalEvents:function(){t.log("Setup modal events");var i=this;this.$modal&&(this.loader.$element.appendTo(this.$form),this._setupDropdownEvents(),d.setupCompanySearch(),d.setupCountryEvent(),this.$modal.find('[data-action="close"]').on("click",function(e){i.close()}),this.$modal.find('[data-action="social"]').on("click",function(n){i.loader.add(),i.socialSite=e(this).data("site"),t.log("Social authentication: ",i.socialSite);var s=r.getSocialAppId(i.appId);urs=r.getUrs(s,i._setupSocialEvents.bind(i)),urs.social.authenticate(i.socialSite),omnitureMgr.trackEvent("trackSocialRegistrationOpen",{registrationFormType:s+"|"+i.socialSite,position:i.position,location:i.position})}),this.$modal.find('[data-action="forgot"]').on("click",function(n){t.log("Forgot password clicked"),omnitureMgr.trackEvent("forgotPassword",{registrationFormType:i.appId});var o=i.$form.find("#login_email");i.$form.data("formValidate").testField(o)&&e.ajax({data:{email:o.val(),csrf:i.$form.find("#authentication_csrf").val()},dataType:"json",type:"POST",url:s.user.urls.forgot}).done(function(e){i._show("forgot")}).fail(function(){t.log("Request for forgot password failed"),i._displayError("generic")})}),this.$modal.find("input, select").on("blur, change",function(t){i._checkFieldComplete(e(this))}),this.$form.formValidate({scrollToErrors:!1,success:function(n){n.preventDefault(),t.log("Form validation success");var o=i.$form.serializeArray(),a={appId:i.appId},r=0===o.length?a:o.reduce(function(e,t){return e[t.name]=t.value,e},a);switch(i.step){case"start":t.log("Start form submitted"),i._show("loginOrRegister");break;case"loginOrRegister":t.log("Email check form submitted"),i.loader.add(),i.$buttons.prop("disabled",!0),e.ajax({data:r,dataType:"json",type:"POST",url:s.user.urls.checkEmail}).done(function(e){if(e.success){t.log("Email check success");var n;e.taken?(omnitureMgr.trackEvent("trackOpenLoginForm",{location:i.position,position:i.position}),n="login"):(omnitureMgr.trackEvent("trackRegistrationOpen",{registrationFormType:i.appId+i.trackingMap[i.appId],position:i.position,location:i.position}),n="register"),i.loader.remove(),i._show(n)}else i._displayError("generic");i.$modal.find("#authentication_csrf").val(e.csrf)}).fail(function(){t.log("Request for email check failed"),i._displayError("generic")});break;case"register":if(t.log("Registration form submitted"),i.loader.add(),i.$buttons.prop("disabled",!0),i.appId===i.longformAppId){if($first=i.$form.find("div.longform-registration-1"),$second=i.$form.find("div.longform-registration-2"),$third=i.$form.find("div.longform-registration-3"),$first.is(":visible")){d.dnbEmailSearch(i.$form.find("#authentication_csrf").val(),$first.find("#user_email").val()),t.log("Show registration step 2"),i._setFormStep($second,$first,"2");break}if($second.is(":visible")){t.log("Show registration step 3"),i._setFormStep($third,$second,"3");break}}e.ajax({data:r,dataType:"json",type:"POST",url:s.user.urls.authentication_register}).done(function(e){e.success?(t.log("Registration success"),omnitureMgr.trackEvent("newRegistration",{registrationFormType:i.appId+i.trackingMap[i.appId],position:i.position,location:i.position}),i._completeAuthentication()):i._displayError(e.error),i.$modal.find("#authentication_csrf").val(e.csrf)}).fail(function(){t.log("Request for registration failed"),i._displayError("generic")});break;case"login":t.log("Login form submitted"),i.loader.add(),i.$buttons.prop("disabled",!0),e.ajax({data:r,dataType:"json",type:"POST",url:s.user.urls.authentication_login}).done(function(e){e.success?(t.log("Login success"),omnitureMgr.trackEvent("trackLogin",{location:i.position}),i._completeAuthentication()):i._displayError(e.error),i.$modal.find("#authentication_csrf").val(e.csrf)}).fail(function(){t.log("Request for login failed"),i._displayError("generic")});break;case"forgot":t.log("Forgot password form submitted"),i.close();break;case"socialRegister":t.log("Social registration form submitted"),i.globalErrors=[],i.loader.add(),i.$buttons.prop("disabled",!0),urs.social.authenticate(i.socialSite,!0,{email:i.$form.find("#social_email").val(),country:i.$form.find("#country_dropdown_form_country").val()});break;case"gatedUpdate":if(t.log("Gated update form submitted"),i.loader.add(),i.$buttons.prop("disabled",!0),$first=i.$form.find("div.gated-update-1"),$second=i.$form.find("div.gated-update-2"),$first.is(":visible")){t.log("Show gated update step 2"),i._setFormStep($second,$first,"2"),i.$form.find("button").text("Finish & Download");break}e.ajax({data:r,dataType:"json",type:"POST",url:s.user.urls.update}).done(function(n){n.success?(t.log("Gated update success"),window.location=i.redirect):e.each(n.errors,function(e){i._displayError(e)}),i.$modal.find("#authentication_csrf").val(n.csrf)}).fail(function(){t.log("Request to update user data failed"),i._displayError("generic")});break;case"customQuestions":t.log("Custom questions form submitted"),i.loader.add(),e(document).trigger("customQuestionsSubmit",[i.$form,i.loader]);break;default:t.log("Current step not recognized")}},placeError:function(e,n){t.log("Form validation error: ",e,n),e.text()===l.required.field?i.$requiredError.html(e.text(l.required.modalAuthenticate)):i.$errors.append(e)}}))},_checkFieldComplete:function(t){""!==e.trim(t.val())&&t.val().indexOf("NOTSELECTED")<0?t.addClass("field-complete"):t.removeClass("field-complete")},_setFormStep:function(e,t,i){var n=this,s=100*(2*t.children.length+.5);this.loader.remove(),t.removeClass(this.options.classActive).addClass(this.options.classFade),setTimeout(function(){t.hide().removeClass(n.options.classFade),n.$form.find("div.step-counter .active-step").text(i),e.show().addClass(n.options.classActive),n.$buttons.prop("disabled",!1)},s)},_completeAuthentication:function(){t.log("Authentication complete");var e=this;this._loadUserData(),this.getUserData(function(t,i){return e.newsletter&&omnitureMgr.trackEvent("newsletterSubscribe",{newsletterId:e.newsletter.id,position:e.newsletter.position}),e.hash&&(window.location.hash=e.hash),e.redirect?void(window.location=e.redirect):"function"==typeof e.nextAction?(e.nextAction(e.userData),void(e.nextAction=null)):!0===e.refresh?void window.location.reload():void e.close()})},_loadUserData:function(){var i=this;this.userData=null,a.read("purs_3")?e.ajax({dataType:"json",url:s.user.urls.userData}).done(function(n){t.log("Load user data success"),i.userData=e.extend(!0,n.user,{isLoggedIn:n.isLoggedIn}),i._updateDisplay(),i.$element.trigger("userdataloaded",[i.userData])}).fail(function(){t.log("Request to load user data failed")}):this.userData={isLoggedIn:!1}},_updateDisplay:function(){t.log("Update display, user login status: ",this.userData.isLoggedIn);var i=this,n=e('[data-user-view="loggedIn"]'),s=e('[data-user-view="loggedOut"]');this.userData.isLoggedIn?(e("[data-user-var]").each(function(){var t=e(this),n=t.data("userVar"),s=t.data("userVarAttr");i.userData[n]&&(s?t.attr(s,i.userData[n]):t.text(i.userData[n]))}),n.show().css("visibility","visible"),s.hide(),e("body").removeClass("not-logged-in")):(s.show().css("visibility","visible"),n.hide(),e("body").addClass("not-logged-in"))},close:function(){t.log("Authentication modal close"),this.nextAction=null,this.$modal.removeClass(this.options.classShow),e("html").css("overflow",""),e("body").removeClass("noScroll")},_displayError:function(e){t.log("Display global error: ",e);var i=this.$form.data("formValidate");this.globalErrors.push(e),i.addGlobalError(l[e||"generic"]||l.generic,"error",this.$errors),this.$buttons.prop("disabled",!1),this.loader.remove()},_setupSocialEvents:function(i){t.log("Setup social authentication events");var n=this;i.common.addEventListener(URS.events.AUTH_COMPLETE,function(i,s){if(s.response.status.errors&&s.response.status.errors.length>0){var o=e.map(s.response.status.errors,function(e,t){return e.applicationCode});o.indexOf("invalid.noLink")>=0?(t.log("No account found, send user to social registration"),n.socialRegistration=!0,n._show("socialRegister")):o.indexOf("required.email")>=0?(t.log("Email not provided, send user to social email form"),n.$modal.find("._socialRegister").addClass("failed")):-1===e.inArray(o[0],n.globalErrors)&&n._displayError(o[0]),n.loader.remove(),n.$buttons.prop("disabled",!1)}else e.post("/user/social-login/",{email:s.response.receipt.account.emailAddress},function(e){if("success"===e.status){t.log("Social authentication success");var i=r.getSocialAppId(n.appId)+"|"+n.socialSite;n.socialRegistration?omnitureMgr.trackEvent("newRegistration",{registrationFormType:i,position:n.position,location:n.position}):omnitureMgr.trackEvent("trackLogin",{registrationFormType:i,ursId:s.response.receipt.account.registrationId,location:n.position}),n._completeAuthentication()}},"json")})},_populateCountry:function(){if($country=this.$form.find('select[id$="_country"]'),a.read("fly_geo")){var e=JSON.parse(a.read("fly_geo"));null!==e.countryCode&&(t.log("Populate country dropdown: ",e.countryCode),$country.val(e.countryCode.toUpperCase()).trigger("change"),$country.attr("disabled",!1))}},_setupDropdownEvents:function(){var e=this,t=this.$form.find("#user_jobFunc").val();this.$form.find('#user_industry option[value="NOTSELECTED"]').text("Industry"),this.$form.find('#user_companySize option[value="NOTSELECTED"]').text("Company Size"),this.$form.find('#user_jobFunc option[value="NOTSELECTED"]').remove(),this.$form.find('#user_jobFunc optgroup[label="Please select"]').remove(),this.$form.find("#user_jobFunc").prepend('<option value="NOTSELECTED">Job Function</option>'),this.$form.find('#user_country option[value="NOTSELECTED"], #country_dropdown_form_country option[value="NOTSELECTED"]').text("Country"),"NOTSELECTED"==t&&this.$form.find("#user_jobFunc").val(t),this._handleJobFuncDropDown(),this.$form.find("#user_jobFunc").change(function(){e._handleJobFuncDropDown()}),this._handleCountryDropDown(),this.$form.find("#user_country").change(function(){e._handleCountryDropDown()})},_handleJobFuncDropDown:function(){var n=this.$form.find("#user_jobFunc").val();if(t.log("Handle job function dropdown: ",n),"NOTSELECTED"!==n){var s="Phone";if(-1!=e.inArray(n,c))for(i=0;i<u.length;i++)this.$form.find("#user_"+u[i]).attr("disabled",!0).attr("required",!1).hide();else{for(i=0;i<u.length;i++)this.$form.find("#user_"+u[i]).attr("disabled",!1).attr("required",!0).show();s="Work Phone"}this.$form.find("#user_phone").attr("placeholder",s)}},_handleCountryDropDown:function(){var n=this.$form.find("#user_country").val();if(t.log("Handle country dropdown: ",n),this.$form.find('#user_state option[value*="NOTSELECTED"]').text("State/Province"),-1!=e.inArray(n,h))for(i=0;i<p.length;i++)this.$form.find("div.longform-registration-2, div.gated-update-2").removeClass(this.options.classActive),this.$form.find("#user_"+p[i]).attr("disabled",!1).attr("required",!0).show();else for(i=0;i<p.length;i++)this.$form.find("#user_"+p[i]).attr("disabled",!0).attr("required",!1).hide();-1!=e.inArray(n,m)?this.$form.find("#user_postalCode").attr("data-validate","postalCode"+n):this.$form.find("#user_postalCode").attr("data-validate","postalCodeINTL")},getUserData:function(e){this.userData?e(null,this.userData):this.$element.one("userdataloaded",e)},hasAccess:function(i){var n=this;i=e.extend(!0,{nextAction:null,requireUsername:!1},i),i.appId&&(n.appId=i.appId),i.position&&(n.position=i.position),i.step&&(n.step=i.step),t.log("User has access check: ",i),this.getUserData(function(e,t){t.isLoggedIn?"function"==typeof i.nextAction&&i.nextAction(t):(n.nextAction=i.nextAction,n._show(n.step))})},showModalStep:function(i,s,o){t.log("Show modal step: ",i);var a=this;this.loading=!0,o&&(this.redirect=o),this.$modal&&this.$modal.remove(),this.$modal=e(s).addClass("appId"+this.appId).appendTo(e("body")),this.$form=this.$modal.find("form"),this.$buttons=this.$modal.find("button"),this.loader=e.fly.loading({template:'<div class="{baseClass} {stateClass} modal-loading-circle"></div>'}),this.$modal.find("input, select").each(function(){a._checkFieldComplete(e(this))}),this._setStep(i),n.process(this.$modal),this._setupModalEvents(),this.loading=!1},_checkForOpenLoginOnLoad:function(){var i=o.getParam("openLogin");t.log("Open login param: ",i),"1"==i&&e("[data-authentication]").first().trigger("click")}})}),define("managers/components",["jquery","managers/page-vars","version!fly/managers/components","managers/tealium","version!fly/managers/debug","managers/user","version!fly/components/alert","version!fly/components/carousel","version!components/carousel","version!fly/components/dropdown","version!fly/components/modal","version!fly/components/modal-async","version!components/tabs","components/authentication"],function(e,t,i,n,s){var o=s.get("components");return i.register({alert:{},authentication:{},autoplayControls:{require:["components/autoplay-controls"]},carousel:{},dropdown:{},emailContact:{require:["components/email-contact"]},modalAsync:{require:["components/modal-async"],options:{contentSet:function(e,t){i.process(t.$modal)}}},tabs:{options:{shown:function(e,t){}}},dependentField:{require:["version!components/dependent-field"]},directorySuggestiveSearch:{require:["components/directory-suggestive-search"]},fixate:{require:"components/fixate"},formValidate:{require:["version!components/form-validate"],options:{scrollToErrors:!0}},googleCsa:{require:"components/google-csa"},disqusCount:{require:"components/disqus-count"},disqusComments:{require:"components/disqus-comments"},loadMore:{require:["components/load-more"],options:{componentRefresh:function(e,t){i.process(t.content)}}},loadMoreScroll:{require:["version!fly/components/load-more-scroll"]},socialLinks:{require:["version!components/social-links"],options:{clicked:function(e,i){o.log("social count clicked",e,i);try{omnitureMgr.trackEvent("clickSocialShare",{socialCode:omnitureMgr.getSocialCode(i.name),articleTitle:t.tracking.data.articleTitle}),dwMgr.trackSocialShare(e,{eventt:"share",lite_event_category:"social",ssite:i.name,wd:"sharebar",wdloc:"body"})}catch(e){o.log("Error on social click",e)}},loaded:function(){o.log("social count loaded")}}},socialButton:{require:["version!fly/components/social-button"],options:{clicked:function(){o.log("social button clicked")},loaded:function(){o.log("social button loaded")}}},imageGallery:{require:["version!components/image-gallery"]},imageGalleryThumb:{require:["version!fly/components/image-gallery-thumb"]},recaptcha:{require:"components/recaptcha"},customQuestions:{require:["version!components/custom-questions"]},newsletterSubscription:{require:["version!components/newsletter-subscription"],options:{subscribeClicked:function(e,t){omnitureMgr.trackEvent("newsletterSubscribe",{newsletterId:t.newsletterId,position:t.newsletterPos})},unsubscribeClicked:function(e,t){omnitureMgr.trackEvent("newsletterUnSubscribe",{newsletterId:t.newsletterId,position:t.newsletterPos})},sampleShown:function(e,t){}}},viewMore:{require:["components/view-more"]},loadAsync:{require:["version!components/load-async"],options:{contentSet:function(t,s){i.process(s.content),n.initClickTracking(e(s.content))}}},medusaAsync:{require:["version!components/medusa-async"],options:{contentSet:function(e,t){i.process(t.$content)}}},charCount:{require:["version!components/char-count"]},showHide:{require:["components/show-hide"]},forum:{require:["components/forum"],options:{contentSet:function(e,t){i.process(t.content)},actionSuccess:function(e,t,i){"forumactionsuccess"==e.type&&omnitureMgr.trackEvent("forumPost")}}},forumPeopleTag:{require:["version!components/forum-people-tag"]},memberProfile:{require:["version!components/member-profile"]},collectionLoader:{require:["version!components/collection-loader"]},editions:{require:["version!components/editions"]},brokenlink:{require:["version!components/brokenlink"]},autoFill:{require:["version!components/auto-fill"]},rds:{require:["version!components/rds"]},forumSearch:{require:["components/forum-search"]},vote:{require:["version!components/vote"]},userForm:{require:["version!components/user-form"]},formSocialLegal:{require:["version!components/form-social-legal"]},alertPreferences:{require:["version!components/alert-preferences"]},modal:{require:["version!components/modal"]},modalEnlargeImage:{require:"components/modal-enlarge-image"},stickyElement:{require:"components/sticky-element"},stickyMpu:{require:"components/sticky-mpu"},headerSearch:{require:"components/header-search"},headerNav:{require:"components/header-nav"},headerNavCoverStory:{require:"components/header-nav-cover-story"},lazyloadImages:{require:"components/lazyload-images"},medusaContentRecommendation:{require:["version!components/medusa-recommendation"]},initialCapitalLetter:{require:"components/initial-capital-letter"},taboola:{require:"components/taboola"},frontDoorCarousel:{require:"components/front-door-carousel"},userTracking:{require:"components/user-tracking"},startNewDiscussionButton:{require:"components/start-new-discussion-button"},videoControls:{require:"components/video-controls"},videoCarousel:{require:"components/video-carousel"},videoPlaylistConnector:{require:"components/video-playlist-connector"},trVideo:{require:"components/tr-video"},userSocialRegistration:{require:"components/user-social-registration"},woobox:{require:"components/woobox"},semSearch:{require:"components/sem-search"},profileShowMore:{require:"components/profile-show-more"},downloadAuthentication:{require:"components/download-authentication"}}),i}),define("managers/image-resolution",["jquery","utils/cookie"],function(e,t){var i={cookie:{name:"fly_img",domain:"default"},breakpointOptions:[],pixelRatioOptions:[1]};return{init:function(t){e.isPlainObject(t)&&(t=e.grep(t,function(e){return e}),e.extend(i,t)),i.breakpointOptions=i.breakpointOptions.sort(function(e,t){return e+t}),i.pixelRatioOptions=i.pixelRatioOptions.sort(function(e,t){return e+t}),this.setCookie()},getPixelRatio:function(){var t=window.devicePixelRatio||1,n=i.pixelRatioOptions[0];return e.each(i.pixelRatioOptions,function(e,i){i>=t&&(n=i)}),n},getBreakpoint:function(){var t=e(window).width(),n=i.breakpointOptions[0];return e.each(i.breakpointOptions,function(e,i){i>=t&&(n=i)}),n},setCookie:function(){var e={pixelRatio:this.getPixelRatio(),breakpoint:this.getBreakpoint()};t.write(i.cookie.name,e,{expires:365,path:"/"})}}}),define("managers/user-authentication",["jquery","components/authentication"],function(e){return e.tr.authentication()}),define("components/load-async-1.0",["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){var i=t.get("loadAsync");e.widget("tr.loadAsync",e.fly.base,{options:{url:null,data:{},replace:!0,delay:0},_create:function(){this.options,this._setup(),this.id=this.$element.attr("id"),this.id||(this.id="uid-"+Math.floor(1e5*Math.random()),this.$element.attr("id",this.id)),i.log("_create: ","container",this.id),this._load()},_load:function(){var t=this.options,n=this;i.log("_load: ","loading",n.id,t.url,t.data),setTimeout(function(){e.ajax({type:"GET",dataType:"json",url:t.url,data:t.data}).done(e.proxy(n._handleSuccess,n)).fail(e.proxy(n._handleFailure,n))},t.delay)},_handleSuccess:function(t){var n=this.options,s=this;if(i.log("_handleSuccess: ","response success?",t.success,s.id),t.success&&t.html)if(n.replace){var o=e(t.html);s.$element.replaceWith(o),s._trigger("contentSet",null,{content:o})}else s.$element.html(t.html),s._trigger("contentSet",null,{content:s.$element});else s._handleFailure(t)},_handleFailure:function(e){var t=(this.options,this);i.log("_handleFailure: ","error message",e,t.id)}})}),define("utils/video-delay-helper",["jquery","version!fly/managers/debug","managers/page-vars","managers/client-storage","version!fly/utils/url-helper"],function(e,t,i,n,s){var t=t.init("video-delay");return{callback:function(o,a){var r=0<e("[data-component=trVideo]").length,l=!("off"===s.getParam("autoplayEnabled")||"off"===n.read("autoplayEnabled")),d=i.video&&i.video.performance&&(i.video.performance.adstart||i.video.performance.contentstart);if(r&&l&&!d&&"mobile"!==i.tracking.data.deviceType){var c="techrepublic_video.adstart techrepublic_video.contentstart techrepublic_video.error",u=function(i){t.log(o+" was delayed for video"),a(!0),e(this).off(c,u)};e(window).one(c,u)}else t.log("Loading "+o+" Immediately"),a(!1)}}}),define("components/medusa-async-1.0",["jquery","version!fly/managers/debug","version!fly/managers/components","version!fly/utils/url-helper","utils/cookie","managers/page-vars","utils/video-delay-helper","managers/tealium","version!components/load-async"],function(e,t,i,n,s,o,a,r){var l=t.get("medusaAsync"),d=0,c=o.tracking.data,u=void 0!==c.upId&&c.upId>0?c.upId:Math.floor(1e9*Math.random());void 0===c.upId&&(c.upId=u),l.log("upId: "+u);var h=function(){try{return"localStorage"in window&&null!==window.localStorage&&localStorage}catch(e){return!1}}();e.widget("tr.medusaAsync",e.tr.loadAsync,{options:{url:null,enableABParam:!1,data:{}},_create:function(){var e=(this.options,this);window.TRFunctions.gdpr_consent_callback("script_medusa",function(){a.callback("medusaAsync",function(t){
t?l.log("Medusa was delayed for video"):l.log("Loading Medusa regardless of video"),e._setup(),e.id=e.$element.attr("id"),e.id||(e.id="uid-"+Math.floor(1e5*Math.random()),e.$element.attr("id",e.id)),l.log("_create: ","container",e.id),e._load()})})},_setup:function(){var t=this.options,i=null;e.isArray(c.topicId)?i=c.topicId[0]:c.topicId&&(i=c.topicId);var a="",r="";c.topicName&&(a=c.topicName instanceof Array?c.topicName[0]:c.topicName,r=c.topicName instanceof Array?c.topicName.slice(1).toString():"");var l=null;"string"===e.type(c.resourceLibraryId)&&(l=c.resourceLibraryId.split(":").pop());var p,m=s.read("b2b-aam-segments"),f={siteId:c.siteId,rsid:c.rsid,sl:"en",sc:c.siteEdition,pagetype:c.pageType,topicguid:i,topicbrcrm:c.siteSection,topicname:a,secondarytopicnames:r,assetguid:c.articleId,assettitle:c.articleTitle,assettype:c.articleType,ftag_cd:c["qp.ftag"],devicetype:c.deviceType,viewguid:o.guid,ursuserid:c.userId,docid:l,upId:u,bevtopic:m};if(h?p=decodeURIComponent(localStorage._ccmdt):e.cookie("_ccmdt")&&(p=e.cookie("_ccmdt")),p)for(var g,v=p.split("||"),y=0,b=v.length;y<b;y++)g=v[y].split("="),g[1]&&("tp"===g[0]?f.tp=g[1].replace(/;;$/,""):"cs"===g[0]?f.cs=g[1]:"ind"===g[0]?f.ind=g[1]:"fa"===g[0]&&(f.fa=g[1].replace(/;;$/,"")));e.extend(t.data,f),!0===t.enableABParam&&(t.url=t.url+window.location.search),this._super(),e.cookie("upid_"+u)&&0!==d?t.delay=1e3*d:e.cookie("upid_"+u,1,{expires:1}),d++,n.getParam("medusaDebug")&&(t.data.medusaDebug=n.getParam("medusaDebug"))},_load:function(){var t=this.options,i=this;l.log("_load: ","loading",i.id,t.url,t.data),setTimeout(function(){e.ajax({type:"POST",dataType:"json",url:t.url,data:t.data}).done(e.proxy(i._handleSuccess,i)).fail(e.proxy(i._handleFailure,i))},t.delay)},_handleSuccess:function(e){var t=(this.options,this);l.log("_handleSuccess: ","response success?",t.id,": ",e.success),l.log("_handleSuccess: ","response data - ",t.id,": ",e),e.success&&e.html?(t.$element.html(e.html),i.process(t.$element),r.initClickTracking(t.$element),t.$element.find(".medusa-rr").length>0&&(l.log("fire impression"),"undefined"!=typeof dwMgr&&dwMgr.trackEvent({mapp:"medusa_app",comptyp:"spot",comp:"ucwc",riaevent:"impression",objtyp:"medusa",objnm:"",s7:""}))):this._handleFailure(e)}})}),define("components/header-search",["jquery","version!fly/managers/debug","managers/tealium","version!fly/components/base"],function(e,t,i){t=t.init("headerSearch"),e.widget("fly.headerSearch",e.fly.base,{options:{},_create:function(){this._setup(),t.log("headerSearch init"),this.$overlayIconDesktop=this.$element.find(".smart-search-icon.smart-search-desktop"),this.$overlayIconMobile=this.$element.find(".smart-search-icon.smart-search-mobile"),this.$smartSearchDesktop=this.$element.find(".smart-search.smart-search-desktop"),this.$smartSearchMobile=this.$element.find(".smart-search.smart-search-mobile"),this.$input=this.$element.find(".smart-search-input"),this.$close=this.$element.find(".smart-search-close"),this.$resultsContainer=this.$element.find(".smart-search-results .smart-search-results-list"),this._setupEvents()},_setupEvents:function(){var i=this;searchOpen=!1,$lastFocusedInput=null,e(".navListMobile").is(":visible")&&this._setupSmartSearchHeight(),this.$overlayIconDesktop.add(this.$overlayIconMobile).click(function(){i._handleClick()}),this.$close.on("click",function(){i._handleClose()}),this.$input.on("input propertychange",function(e){var n=i.$input.val();n.length>0?i.$input.addClass("active-input"):i.$input.removeClass("active-input"),setTimeout(function(){if(n!=i.$input.val())return void t.log("User typing");i._updateResults()},250),13===e.keyCode&&omnitureMgr.trackEvent("moduleClick",{moduleInfo:"header-search-overlay"})}),e(".smart-search-input").focus(function(){$lastFocusedInput=e(this)}),e(window).on("resize",function(){$lastFocusedInput&&e(".smart-search-input").val($lastFocusedInput.val()),i.$input.val().length>0?i.$input.addClass("active-input"):i.$input.removeClass("active-input"),e(".navListMobile").is(":visible")?(i._setupSmartSearchHeight(),searchOpen?(e("html").addClass("search-open"),(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)&&e("html").css("position","fixed"),e(".search-small").addClass("active"),i.$smartSearchMobile.addClass("active")):(i.hideOverlay(),i.$overlayIconDesktop.removeClass("active"),i.$smartSearchDesktop.removeClass("active"))):(e("html").removeClass("search-open"),e("html").css("position","initial"),searchOpen?(i.showOverlay(),i.$overlayIconDesktop.addClass("active"),i.$smartSearchDesktop.addClass("active")):(e(".search-small").removeClass("active"),i.$smartSearchMobile.removeClass("active")))})},_handleClick:function(){this.$overlayIconDesktop.hasClass("active")||e(".search-small").hasClass("active")?this._handleClose():(0===e(".smart-search-results .smart-search-trending-content").html().length&&this._setupTrendingContentUnit(),omnitureMgr.trackEvent("moduleClick",{moduleInfo:"header-search"}),searchOpen=!0,e(".navListMobile").is(":visible")?(e("html").addClass("search-open"),(navigator.userAgent.indexOf("iPad")>-1||navigator.userAgent.indexOf("iPhone")>-1)&&e("html").css("position","fixed"),e(".search-small").addClass("active"),this.$smartSearchMobile.addClass("active")):(this.showOverlay(),this.$overlayIconDesktop.addClass("active"),this.$smartSearchDesktop.addClass("active")),this.$input.focus())},_handleClose:function(){omnitureMgr.trackEvent("moduleClick",{moduleInfo:"search-overlay-close"}),searchOpen=!1,e(".navListMobile").is(":visible")?this.$smartSearchMobile.removeClass("active"):(this.hideOverlay(),this.$smartSearchDesktop.removeClass("active")),this.$overlayIconDesktop.removeClass("active"),e(".search-small").removeClass("active"),e("html").removeClass("search-open"),e("html").css("position","initial")},showOverlay:function(){var t=e('<div id="smart-search-overlay"></div>'),i=this;e("#smart-search-overlay").length||e("body").append(t),t.on("click",function(){i._handleClose()})},hideOverlay:function(){e("#smart-search-overlay").remove()},_updateResults:function(){var n=this,s=this.$input.val();t.log("checking field value"),s.length>0?(e(".smart-search-button .search-button").addClass("hide"),e(".smart-search-button").addClass("active-input-button"),e(".smart-search-button .go-button").removeClass("hide"),e.ajax({url:"/search/smart-search/xhr/",data:{q:s},type:"GET",dataType:"json",success:function(t){t.error||(e(".smart-search-trending-content").addClass("hide"),n.$resultsContainer.html(t.html).removeClass("hide"),i.initClickTracking(n.$resultsContainer))},error:function(){t.log("Error fetching smart search results")}})):(e(".smart-search-button .search-button").removeClass("hide"),e(".smart-search-button").removeClass("active-input-button"),e(".smart-search-trending-content").removeClass("hide"),e(".smart-search-results .smart-search-results-list").addClass("hide"),e(".smart-search-button .go-button").addClass("hide"))},_setupTrendingContentUnit:function(){e.ajax({url:"/search/smart-search-trending-content/",type:"GET",dataType:"json",success:function(t){if(!t.error){var n=e(".smart-search-results .smart-search-trending-content");n.html(t.html),i.initClickTracking(n)}},error:function(){t.log("Error fetching smart search trending content")}})},_setupSmartSearchHeight:function(){var t=e(window).height()-e(".container-header").height()-e(".search-small .smart-search-close.smart-search-mobile").outerHeight()+33;e(".smart-search.smart-search-mobile").css("height",t)}})}),define("components/header-nav",["jquery","version!fly/managers/debug","managers/page-vars","version!fly/components/base"],function(e,t,i){t=t.init("headerNav"),e.widget("fly.headerNav",e.fly.base,{options:{hidingNavScrollThreshold:100,hidingNavSelector:".page-header .fixation",hidingNavClass:"hidden",headerContainerSelector:"header.page-header"},initialised:!1,_create:function(){function t(t){if(!e("html").hasClass("search-open")){var i=o.scrollTop();if(Math.abs(i-a)<s.hidingNavScrollThreshold&&i>s.hidingNavScrollThreshold)return;l&&i<a&&(r.removeClass(s.hidingNavClass),l=!1),!l&&i>s.hidingNavScrollThreshold&&i>a&&(r.addClass(s.hidingNavClass),l=!0),i>c&&!d&&(r.addClass("fixed"),c=n.getNavPosition(),d=!0),i<=c&&d&&(r.removeClass("fixed"),c=n.getNavPosition(),d=!1),a=i}}if(!this.initialised){this.initialised=!0,this._setup();var n=this,s=this.options;if(this.window=e(window),$headerContainer=e(s.headerContainerSelector),this._checkWidth(),this.window.resize(function(){n._checkWidth()}),"desktop"!=i.tracking.data.deviceType){var o=e(window),a=o.scrollTop(),r=e(s.hidingNavSelector),l=!1,d=!1,c=this.getNavPosition(),u=!!i.passiveEventsSupported&&{passive:!0};window.addEventListener("scroll",t,u)}}},getNavPosition:function(){return $headerContainer.length>0?$headerContainer.offset().top:0},_checkWidth:function(){var t=this.window.width(),i=e(".sectionLinks").is(":visible");t<=1310&&t>1200&&i?(this.element.find("ul.navList > li.alpha").insertBefore("li.alphaDrop"),this.element.find("ul.navList > li.beta").insertAfter("ul.menu-topics > li.alpha")):t<=1200&&t>1060&&i?(this.element.find("ul.navList > li.alpha").insertBefore("li.alphaDrop"),this.element.find("ul.navList > li.beta").insertAfter("ul.menu-topics > li.alpha"),this.element.find("ul.navList > li.gamma").insertAfter("ul.menu-topics > li.beta"),this.element.find("ul.navList > li.delta").insertAfter("ul.menu-topics > li.gamma")):t<=1060&&t>1023&&i?(this.element.find("ul.navList > li.alpha").insertBefore("li.alphaDrop"),this.element.find("ul.navList > li.beta").insertAfter("ul.menu-topics > li.alpha"),this.element.find("ul.navList > li.gamma").insertAfter("ul.menu-topics > li.beta"),this.element.find("ul.navList > li.delta").insertAfter("ul.menu-topics > li.gamma"),this.element.find("ul.navList > li.epsilon").insertAfter("ul.menu-topics > li.delta")):t<=875&&t>767&&!i?(this.element.find("ul.navList > li.alpha").insertBefore("li.alphaDrop"),this.element.find("ul.navList > li.beta").insertAfter("ul.menu-topics > li.alpha")):t>767&&(this.element.find("ul.menu-topics > li.epsilon").insertBefore("ul.navList > li.hasDrop"),this.element.find("ul.menu-topics > li.delta").insertBefore("ul.navList > li.epsilon"),this.element.find("ul.menu-topics > li.gamma").insertBefore("ul.navList > li.delta"),this.element.find("ul.menu-topics > li.beta").insertBefore("ul.navList > li.gamma"),this.element.find("ul.menu-topics > li.alpha").insertBefore("ul.navList > li.beta"))}})}),define("components/editions-1.0",["jquery","utils/cookie","version!fly/managers/debug","version!fly/components/base"],function(e,t,i){var n=i.get("editions"),s=e.support.touch?"vclick":"click";e.widget("fly.editions",e.fly.base,{options:{cookie:{name:"fly_edition",domain:".techrepublic.com"}},_create:function(){var e={};this._setup(),e[s+" [data-edition-set]"]="_handleClick",this._on(this.$element,e)},_handleClick:function(t){var i=e(t.target).closest("[data-edition-set]"),n=i.data("editionSet");n&&(t.preventDefault(),this.setCookie(n),window.setTimeout(function(){location.reload()},200))},setCookie:function(e){var i=this.options;n.log("Change edition to "+e),t.write(i.cookie.name,e,{path:"/",domain:i.cookie.domain})}})}),function(e,t,i,n){var s=e(t);e.fn.lazyload=function(n){function o(){var t=0;r.each(function(){var i=e(this);if(!l.skip_invisible||i.is(":visible"))if(e.abovethetop(this,l)||e.leftofbegin(this,l));else if(e.belowthefold(this,l)||e.rightoffold(this,l)){if(++t>l.failure_limit)return!1}else i.trigger("appear"),t=0})}var a,r=this,l={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:t,data_attribute:"original",skip_invisible:!0,appear:null,load:null,placeholder:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsQAAA7EAZUrDhsAAAANSURBVBhXYzh8+PB/AAffA0nNPuCLAAAAAElFTkSuQmCC"};return n&&(void 0!==n.failurelimit&&(n.failure_limit=n.failurelimit,delete n.failurelimit),void 0!==n.effectspeed&&(n.effect_speed=n.effectspeed,delete n.effectspeed),e.extend(l,n)),a=void 0===l.container||l.container===t?s:e(l.container),0===l.event.indexOf("scroll")&&a.bind(l.event,function(){return o()}),this.each(function(){var t=this,i=e(t);t.loaded=!1,void 0!==i.attr("src")&&!1!==i.attr("src")||i.is("img")&&i.attr("src",l.placeholder),i.one("appear",function(){if(!this.loaded){if(l.appear){var n=r.length;l.appear.call(t,n,l)}e("<img />").bind("load",function(){var n=i.attr("data-"+l.data_attribute);i.hide(),i.is("img")?i.attr("src",n):i.css("background-image","url('"+n+"')"),i[l.effect](l.effect_speed),t.loaded=!0;var s=e.grep(r,function(e){return!e.loaded});if(r=e(s),l.load){var o=r.length;l.load.call(t,o,l)}}).attr("src",i.attr("data-"+l.data_attribute))}}),0!==l.event.indexOf("scroll")&&i.bind(l.event,function(){t.loaded||i.trigger("appear")})}),s.bind("resize",function(){o()}),/(?:iphone|ipod|ipad).*os 5/gi.test(navigator.appVersion)&&s.bind("pageshow",function(t){t.originalEvent&&t.originalEvent.persisted&&r.each(function(){e(this).trigger("appear")})}),e(i).ready(function(){o()}),this},e.belowthefold=function(i,n){return(void 0===n.container||n.container===t?(t.innerHeight?t.innerHeight:s.height())+s.scrollTop():e(n.container).offset().top+e(n.container).height())<=e(i).offset().top-n.threshold},e.rightoffold=function(i,n){return(void 0===n.container||n.container===t?s.width()+s.scrollLeft():e(n.container).offset().left+e(n.container).width())<=e(i).offset().left-n.threshold},e.abovethetop=function(i,n){return(void 0===n.container||n.container===t?s.scrollTop():e(n.container).offset().top)>=e(i).offset().top+n.threshold+e(i).height()},e.leftofbegin=function(i,n){return(void 0===n.container||n.container===t?s.scrollLeft():e(n.container).offset().left)>=e(i).offset().left+n.threshold+e(i).width()},e.inviewport=function(t,i){return!(e.rightoffold(t,i)||e.leftofbegin(t,i)||e.belowthefold(t,i)||e.abovethetop(t,i))},e.extend(e.expr[":"],{"below-the-fold":function(t){return e.belowthefold(t,{threshold:0})},"above-the-top":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-screen":function(t){return e.rightoffold(t,{threshold:0})},"left-of-screen":function(t){return!e.rightoffold(t,{threshold:0})},"in-viewport":function(t){return e.inviewport(t,{threshold:0})},"above-the-fold":function(t){return!e.belowthefold(t,{threshold:0})},"right-of-fold":function(t){return e.rightoffold(t,{threshold:0})},"left-of-fold":function(t){return!e.rightoffold(t,{threshold:0})}})}(jQuery,window,document),define("libs/lazyload-1.9.3",function(){}),define("components/lazyload-images",["jquery","version!fly/components/base","version!libs/lazyload"],function(e){e.widget("fly.lazyloadImages",e.fly.base,{options:{threshold:200,skip_invisible:!1},_create:function(){this._super(),this._setupEvents(),this._lazyLoadImages()},_setupEvents:function(){this._on(this.$element,{ajaxStop:this._lazyLoadImages})},_lazyLoadImages:function(){var t=this.$element.find("img.lazy").removeClass("lazy").addClass("loading");t.load(function(t){e(t.currentTarget).removeClass("loading")}),t.lazyload(this.options)}})}),define("libs/waypoints/jquery.waypoints-3.1.1",["jquery"],function(){!function(){"use strict";function e(n){if(!n)throw new Error("No options passed to Waypoint constructor");if(!n.element)throw new Error("No element option passed to Waypoint constructor");if(!n.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+t,this.options=e.Adapter.extend({},e.defaults,n),this.element=this.options.element,this.adapter=new e.Adapter(this.element),this.callback=n.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=e.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=e.Context.findOrCreateByElement(this.options.context),e.offsetAliases[this.options.offset]&&(this.options.offset=e.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,t+=1}var t=0,i={};e.prototype.queueTrigger=function(e){this.group.queueTrigger(this,e)},e.prototype.trigger=function(e){this.enabled&&this.callback&&this.callback.apply(this,e)},e.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},e.prototype.disable=function(){return this.enabled=!1,this},e.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},e.prototype.next=function(){return this.group.next(this)},e.prototype.previous=function(){return this.group.previous(this)},e.invokeAll=function(e){var t=[];for(var n in i)t.push(i[n]);for(var s=0,o=t.length;s<o;s++)t[s][e]()},e.destroyAll=function(){e.invokeAll("destroy")},e.disableAll=function(){e.invokeAll("disable")},e.enableAll=function(){e.invokeAll("enable")},e.refreshAll=function(){e.Context.refreshAll()},e.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},e.viewportWidth=function(){return document.documentElement.clientWidth},e.adapters=[],e.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},e.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=e}(),function(){"use strict";function e(e){window.setTimeout(e,1e3/60)}function t(e){this.element=e,this.Adapter=s.Adapter,this.adapter=new this.Adapter(e),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},e.waypointContextKey=this.key,n[e.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,n={},s=window.Waypoint,o=window.onload;t.prototype.add=function(e){var t=e.options.horizontal?"horizontal":"vertical";this.waypoints[t][e.key]=e,this.refresh()},t.prototype.checkEmpty=function(){var e=this.Adapter.isEmptyObject(this.waypoints.horizontal),t=this.Adapter.isEmptyObject(this.waypoints.vertical);e&&t&&(this.adapter.off(".waypoints"),delete n[this.key])},t.prototype.createThrottledResizeHandler=function(){function e(){t.handleResize(),t.didResize=!1}var t=this;this.adapter.on("resize.waypoints",function(){t.didResize||(t.didResize=!0,s.requestAnimationFrame(e))})},t.prototype.createThrottledScrollHandler=function(){function e(){t.handleScroll(),t.didScroll=!1}var t=this;this.adapter.on("scroll.waypoints",function(){t.didScroll&&!s.isTouch||(t.didScroll=!0,s.requestAnimationFrame(e))})},t.prototype.handleResize=function(){s.Context.refreshAll()},t.prototype.handleScroll=function(){var e={},t={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in t){var n=t[i],s=n.newScroll>n.oldScroll,o=s?n.forward:n.backward;for(var a in this.waypoints[i]){var r=this.waypoints[i][a],l=n.oldScroll<r.triggerPoint,d=n.newScroll>=r.triggerPoint,c=l&&d,u=!l&&!d;(c||u)&&(r.queueTrigger(o),e[r.group.id]=r.group)}}for(var h in e)e[h].flushTriggers();this.oldScroll={x:t.horizontal.newScroll,y:t.vertical.newScroll}},t.prototype.innerHeight=function(){return this.element==this.element.window?s.viewportHeight():this.adapter.innerHeight()},t.prototype.remove=function(e){delete this.waypoints[e.axis][e.key],this.checkEmpty()},t.prototype.innerWidth=function(){return this.element==this.element.window?s.viewportWidth():this.adapter.innerWidth()},t.prototype.destroy=function(){var e=[];for(var t in this.waypoints)for(var i in this.waypoints[t])e.push(this.waypoints[t][i]);for(var n=0,s=e.length;n<s;n++)e[n].destroy()},t.prototype.refresh=function(){var e,t=this.element==this.element.window,i=this.adapter.offset(),n={};this.handleScroll(),e={horizontal:{contextOffset:t?0:i.left,contextScroll:t?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:t?0:i.top,contextScroll:t?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var s in e){var o=e[s];for(var a in this.waypoints[s]){var r,l,d,c,u,h=this.waypoints[s][a],p=h.options.offset,m=h.triggerPoint,f=0,g=null==m;h.element!==h.element.window&&(f=h.adapter.offset()[o.offsetProp]),"function"==typeof p?p=p.apply(h):"string"==typeof p&&(p=parseFloat(p),h.options.offset.indexOf("%")>-1&&(p=Math.ceil(o.contextDimension*p/100))),r=o.contextScroll-o.contextOffset,h.triggerPoint=f+r-p,l=m<o.oldScroll,d=h.triggerPoint>=o.oldScroll,c=l&&d,u=!l&&!d,!g&&c?(h.queueTrigger(o.backward),n[h.group.id]=h.group):!g&&u?(h.queueTrigger(o.forward),n[h.group.id]=h.group):g&&o.oldScroll>=h.triggerPoint&&(h.queueTrigger(o.forward),n[h.group.id]=h.group)}}for(var v in n)n[v].flushTriggers();return this},t.findOrCreateByElement=function(e){return t.findByElement(e)||new t(e)},t.refreshAll=function(){for(var e in n)n[e].refresh()},t.findByElement=function(e){return n[e.waypointContextKey]},window.onload=function(){o&&o(),t.refreshAll()},s.requestAnimationFrame=function(t){(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||e).call(window,t)},s.Context=t}(),function(){"use strict";function e(e,t){return e.triggerPoint-t.triggerPoint}function t(e,t){return t.triggerPoint-e.triggerPoint}function i(e){this.name=e.name,this.axis=e.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),n[this.axis][this.name]=this}var n={vertical:{},horizontal:{}},s=window.Waypoint;i.prototype.add=function(e){this.waypoints.push(e)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var n=this.triggerQueues[i],s="up"===i||"left"===i;n.sort(s?t:e);for(var o=0,a=n.length;o<a;o+=1){var r=n[o];(r.options.continuous||o===n.length-1)&&r.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(t){this.waypoints.sort(e);var i=s.Adapter.inArray(t,this.waypoints);return i===this.waypoints.length-1?null:this.waypoints[i+1]},i.prototype.previous=function(t){this.waypoints.sort(e);var i=s.Adapter.inArray(t,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(e,t){this.triggerQueues[t].push(e)},i.prototype.remove=function(e){var t=s.Adapter.inArray(e,this.waypoints);t>-1&&this.waypoints.splice(t,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(e){return n[e.axis][e.name]||new i(e)},s.Group=i}(),function(){"use strict";function e(e){this.$element=t(e)}var t=window.jQuery,i=window.Waypoint;t.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(t,i){e.prototype[i]=function(){var e=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,e)}}),t.each(["extend","inArray","isEmptyObject"],function(i,n){e[n]=t[n]}),i.adapters.push({name:"jquery",Adapter:e}),i.Adapter=e}(),function(){"use strict";function e(e){return function(){var i=[],n=arguments[0];return e.isFunction(arguments[0])&&(n=e.extend({},arguments[1]),n.handler=arguments[0]),this.each(function(){var s=e.extend({},n,{element:this});"string"==typeof s.context&&(s.context=e(this).closest(s.context)[0]),i.push(new t(s))}),i}}var t=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=e(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=e(window.Zepto))}()}),define("fly/libs/jquery.throttle-debounce-1.1",["jquery"],function(e){"$:nomunge";var t;e.throttle=t=function(t,i,n,s){function o(){function e(){r=+new Date,n.apply(l,c)}function o(){a=void 0}var l=this,d=+new Date-r,c=arguments;s&&!a&&e(),a&&clearTimeout(a),void 0===s&&d>t?e():!0!==i&&(a=setTimeout(s?o:e,void 0===s?t-d:t))}var a,r=0;return"boolean"!=typeof i&&(s=n,n=i,i=void 0),e.guid&&(o.guid=n.guid=n.guid||e.guid++),o},e.debounce=function(e,i,n){return void 0===n?t(e,i,!1):t(e,n,!1!==i)}}),define("managers/waypoints",["jquery","version!fly/managers/debug","version!libs/waypoints/jquery.waypoints","version!fly/libs/jquery.throttle-debounce"],function(e,t){t=t.init("waypoints");var i=!1;return{init:function(){i||(i=!0,e(window).on("scroll",e.throttle(1e3,function(){Waypoint.refreshAll(),t.log("fresh!")})))}}}),define("libs/waypoints/inview-3.1.1",["jquery","version!libs/waypoints/jquery.waypoints"],function(){"use strict";function e(){}function t(e){this.options=i.Adapter.extend({},t.defaults,e),this.axis=this.options.horizontal?"horizontal":"vertical",this.waypoints=[],this.createWaypoints()}var i=window.Waypoint;t.prototype.createWaypoints=function(){for(var e={vertical:[{down:"enter",up:"exited",offset:"100%"},{down:"entered",up:"exit",offset:"bottom-in-view"},{down:"exit",up:"entered",offset:-1},{down:"exited",up:"enter",offset:function(){return-this.adapter.outerHeight()}}],horizontal:[{right:"enter",left:"exited",offset:"100%"},{right:"entered",left:"exit",offset:"right-in-view"},{right:"exit",left:"entered",offset:0},{right:"exited",left:"enter",offset:function(){return-this.adapter.outerWidth()}}]},t=0,i=e[this.axis].length;t<i;t++){var n=e[this.axis][t];this.createWaypoint(n)}},t.prototype.createWaypoint=function(e){var t=this;this.waypoints.push(new i({element:this.options.element,handler:function(e){return function(i){t.options[e[i]].call(this,i)}}(e),offset:e.offset,horizontal:this.options.horizontal}))},t.prototype.destroy=function(){for(var e=0,t=this.waypoints.length;e<t;e++)this.waypoints[e].destroy();this.waypoints=[]},t.defaults={enter:e,entered:e,exit:e,exited:e},i.Inview=t}),define("components/sticky-element",["jquery","version!fly/managers/debug","managers/waypoints","version!libs/waypoints/inview","version!fly/components/base"],function(e,t,i){t=t.init("stickyElement"),i.init(),e.widget("fly.stickyElement",e.fly.base,{options:{classFixed:"fixed",classHidden:"hidden",primaryEdge:"top",classRelative:"relative"},$placeholder:null,inview:null,_create:function(){this._setup(),this._setupPlaceholder(),this._setupEvents()},_setupPlaceholder:function(){this.$placeholder=e('<div class="sticky-element-placeholder '+this.options.classHidden+'"></div>'),this.$placeholder.height(this.$element.outerHeight(!0)),"top"===this.options.primaryEdge?this.$element.before(this.$placeholder):"bottom"===this.options.primaryEdge&&this.$element.after(this.$placeholder)},_setupEvents:function(){var e=this;this.inview=new Waypoint.Inview({element:this.$placeholder[0],entered:function(t){("top"===e.options.primaryEdge&&"up"===t||"bottom"===e.options.primaryEdge&&"down"===t)&&(e.$placeholder.addClass(e.options.classHidden),e.$element.removeClass(e.options.classFixed))},exit:function(t){("top"===e.options.primaryEdge&&"down"===t||"bottom"===e.options.primaryEdge&&"up"===t)&&(e.$placeholder.removeClass(e.options.classHidden),e.$element.addClass(e.options.classFixed))}})}})}),define("components/user-tracking",["jquery","utils/cookie","managers/page-vars","version!fly/managers/debug","version!fly/components/base","optional!"+(window.trPageVars.services.tealium&&window.trPageVars.services.tealium.enabled?"tealium":"feature-disabled")],function(e,t,i,n){var s=e.support.touch?"vclick":"click";n=n.init("userTracking"),e.widget("tr.userTracking",e.fly.base,{options:{},_create:function(){this._setup();var e={};e[s]="_handleClick",this._on(this.$element,e),null!==t.read("AuthenticationSuccessTracking")&&this._fireAuthenticationTracking(t.read("AuthenticationSuccessTracking"))},_handleClick:function(t){var i=e(t.target).closest("[data-user-show-params]").data("user-show-params");i&&this._fireClickTracking(i)},_fireClickTracking:function(e){var t;e.appId&&(t=this._getTrackingVar(e.appId)),"login"===e.action?omnitureMgr.trackEvent("trackOpenLoginForm",{location:e.regSource,position:e.regSource}):"register"===e.action?omnitureMgr.trackEvent("trackRegistrationOpen",{registrationFormType:t,position:e.regSource,location:e.regSource}):"forgot-password"===e.action&&omnitureMgr.trackEvent("forgotPassword",{registrationFormType:t})},_fireAuthenticationTracking:function(n){if(n&&(n=e.parseJSON(n)),"login"===n.track)omnitureMgr.trackEvent("trackLogin",{location:n.regSource});else if("registration"===n.track){var s;n.appId&&(s=this._getTrackingVar(n.appId));var o=n.regSource;n.noRedirect&&!n.regSource&&(o="joinpage"),omnitureMgr.trackEvent("newRegistration",{registrationFormType:s,position:o,location:o})}n.newsletterSubs&&n.newsletterPos&&omnitureMgr.trackEvent("newsletterSubscribe",{newsletterId:n.newsletterSubs,position:n.newsletterPos}),t.erase("AuthenticationSuccessTracking",{path:"/",domain:i.user.cookieDomain})},_getTrackingVar:function(e){switch(e.toString()){case"356":return e+"|long";case"311":return e+"|community";case"312":return e+"|newsletters";default:return"309|short"}}})}),define("components/medusa-recommendation-1.0",["jquery","version!fly/managers/debug",window.trPageVars.services.dw.enabled?"version!fly/managers/dw-tracking":"","managers/page-vars","version!fly/components/base"],function(e,t,i,n){var s=t.init("medusaContentRecommendation"),o=n.tracking.data,a=void 0!==o.upId&&o.upId>0?o.upId:Math.floor(1e9*Math.random());void 0===o.upId&&(o.upId=a),s.log("upId: "+a),e.widget("fly.medusaContentRecommendation",e.fly.base,{options:{promo:null,spot:null},_create:function(){this._setup(),this._adBlockerCheck()},_getMedusaContent:function(t){if(t){var i=this.options,r=this,l=null;e.isArray(o.topicId)?l=o.topicId[0]:o.topicId&&(l=o.topicId);var d="/medusa/recommendation/"+i.spot+"/";e.ajax({url:d,type:"POST",data:{siteId:o.siteId,rsid:o.rsid,sl:"en",sc:o.siteEdition,pagetype:o.pageType,topicguid:l,topicbrcrm:o.siteSection,assetguid:o.articleId,assettitle:o.articleTitle,assettype:o.articleType,ftag_cd:o["qp.ftag"],devicetype:o.deviceType,viewguid:n.guid,ursuserid:o.userId,promo:i.promo,upId:a},complete:function(){},success:function(e){s.log("_getMedusaContent: ","successful ajax to /medusa/recommendation/"+i.spot,"response: ",e);var t=r.$element;if(e.success&&e.html){s.log("this.$element",r.$element),t.hasClass("mpu")&&t.parent().hasClass("sticky-mpu-container")&&(t=t.parent()),t.hasClass("leader-bottom-feature-article")?t.wrap('<div class="leader-bottom-feature-article">'):t.hasClass("leader-top-feature-article")?t.wrap('<div class="leader-top-feature-article">'):t.wrap("<div>"),t.parent().append(e.html);var n='class="'+i.spot+'"';new RegExp(n).test(e.html)&&r._setTracking()}else s.log("_getMedusaContent: ","error within ajax to /medusa/recommendation/"+i.spot,e.error,t)},error:function(){s.log("_getMedusaContent: ","failed ajax to /medusa/recommendation/"+i.spot)}})}},_adBlockerCheck:function(){var e=this,t=void 0!==n.adBlockEnabled?n.adBlockEnabled:null;null===t?require(["utils/advertisement"],function(){n.adBlockEnabled=!1,t=!1,e._getMedusaContent(t)},function(i){n.adBlockEnabled=!0,t=!0,e._getMedusaContent(t)}):e._getMedusaContent(t)},_setTracking:function(){var t=this.options;e("."+t.spot+" a").click(function(){omnitureMgr.trackEvent("moduleClick",{moduleInfo:"medusa-"+t.spot})}),s.log("fire impression"),n.services.dw.enabled&&i.trackEvent({mapp:"medusa_app",comptyp:"spot",comp:"ucwc",riaevent:"impression",objtyp:"medusa",objnm:"",s7:""})}})}),define("components/newsletter-subscription-1.0",["jquery","version!fly/managers/debug","version!fly/components/base"],function(e,t){var i=e.support.touch?"vclick":"click",n=t.init("newsletterSubscription");e.widget("fly.newsletterSubscription",e.fly.base,{options:{isAbTest:!1},_create:function(){this._setup(),this._setupEvents()},_setupEvents:function(){var e={};if(e[i+" [data-newsletter-id]"]="_handleClick",
e[i+" [data-sample-id]"]="_handleClickSample",this._on(this.$element,e),window.location.hash){var t=window.location.hash.replace("#",""),n=this.$element.find("#nls"+t);n.length>0&&(n.hasClass("btn-primary")&&n.removeClass("btn-primary").attr("data-newsletter-type","unsubs").text("Unsubscribe"),history.pushState("",document.title,window.location.pathname+window.location.search))}},_handleClickSample:function(t){t.preventDefault();var i=e(t.currentTarget);this.nsEle=i,this.nsId=i.attr("data-sample-id"),e("#iframe-"+this.nsId).attr("src","http://nls.techrepublic.com/pageservices/viewOnlineNewsletter.sc?list_id="+this.nsId)},_handleClick:function(t){t.preventDefault();var i,s=this,o=e(t.currentTarget).attr("data-newsletter-id"),a=e(t.currentTarget).attr("data-newsletter-position"),r=e(t.currentTarget).attr("data-newsletter-module"),l=this.$element.find("[data-newsletter-id='"+o+"']");l.length>0&&(this.options.isAbTest?l.prop("disabled",!0):l.addClass("loading").prop("disabled",!0)),e.when(this._getResponse(t),this._promise(t)).then(function(e,t){var l=s.$element.find("[data-newsletter-id='"+t.nsId+"']");l.removeClass("loading").prop("disabled",!1),"OK"==e[0].status&&!1===e[0].error?("subs"==t.action?(l.removeClass("btn-primary").attr("data-newsletter-type","unsubs").text("Unsubscribe"),i="subscribe"):(s.options.isAbTest?l.attr("data-newsletter-type","subs").text("Subscribe"):l.addClass("btn-primary").attr("data-newsletter-type","subs").text("Subscribe"),i="unsubscribe"),s._trigger("clicked",null,{buttons:l}),s._trigger(i+"Clicked",null,{buttons:l,newsletterId:o,newsletterPos:a}),r&&omnitureMgr.trackEvent("moduleClick",{moduleInfo:r+"-"+i})):(n.log("Your request could not be processed. Please try again."),s._handleSubscriptionError(e[0]))})},_getResponse:function(t){var i=e(t.currentTarget),s=this.options;return this.nsId=i.attr("data-newsletter-id"),this.nsType=i.attr("data-newsletter-type"),this.nsUrl=("subs"==this.nsType?s.urlSubs:s.urlUnsubs)+this.nsId,e.ajax({timeout:15e3,type:"GET",dataType:"json",url:this.nsUrl}).fail(function(i,s){"timeout"==s&&(n.log("Request timeout. Try again"),e(t.currentTarget).removeClass("loading").prop("disabled",!1))})},_promise:function(t){var i=e.Deferred(),n=e(t.currentTarget);return ele={nsId:n.attr("data-newsletter-id"),action:n.attr("data-newsletter-type")},i.resolve(ele),i.promise()},_handleSubscriptionError:function(t){e.fly.modal({content:'<div class="modal-header"><button class="close" data-close="modal"><div>×</div></button><h2 class="title">Error</h2></div><div class="modal-body"><p>'+t.error+"</p></div>"}).open()}})}),define("libs/waypoints/sticky-3.1.1",["jquery","version!libs/waypoints/jquery.waypoints"],function(){"use strict";function e(i){this.options=$.extend({},t.defaults,e.defaults,i),this.element=this.options.element,this.$element=$(this.element),this.createWrapper(),this.createWaypoint()}var t=window.Waypoint;e.prototype.createWaypoint=function(){var e=this.options.handler;this.waypoint=new t($.extend({},this.options,{element:this.wrapper,handler:$.proxy(function(t){var i=this.options.direction.indexOf(t)>-1,n=i?this.$element.outerHeight(!0):"";this.$wrapper.height(n),this.$element.toggleClass(this.options.stuckClass,i),e&&e.call(this,t)},this)}))},e.prototype.createWrapper=function(){this.$element.wrap(this.options.wrapper),this.$wrapper=this.$element.parent(),this.wrapper=this.$wrapper[0]},e.prototype.destroy=function(){this.$element.parent()[0]===this.wrapper&&(this.waypoint.destroy(),this.$element.removeClass(this.options.stuckClass).unwrap())},e.defaults={wrapper:'<div class="sticky-wrapper" />',stuckClass:"stuck",direction:"down right"},t.Sticky=e}),define("managers/mpulse",["jquery","version!fly/managers/debug","managers/page-vars"],function(e,t,i){var n=t.get("mpulse"),s={isInitialized:!1,mPulse:null,_awaitInitialization:function(t){if(i.services.mpulse.enabled)if("function"!=typeof t)n.error("Invalid callback provided",t);else if(this.isInitialized)this._updateMpulseData(),t();else{var s=this;n.info("Awaiting mpulse initilization before executing "+t.name),e(window).on("mpulse_initialized",function(){s._updateMpulseData(),t()})}else n.info("mpulse is disabled; aborting "+t.name)},_init:function(){if(i.services.mpulse.enabled){var t=this;window.TRFunctions.gdpr_consent_callback("script_mpulse",function(){require(["version!libs/mpulse"],function(i){try{window.mPulseApp=i.init("5VS23-BHL36-JUED4-78U6Z-ZT97H","4fdc7002-fadc-4bd1-8244-c640e9960b3c"),"object"==typeof i&&"object"==typeof window.mPulseApp?(t.isInitialized=!0,e(window).trigger("mpulse_initialized")):n.error("mpulse failed to initialize")}catch(e){n.log("Failed to initialize mPulse",e)}})})}},sendBeacon:function(e,t){var i=function(){window.mPulseApp.sendTimer(e,t),n.log("mpulse timer sent: "+e+"="+t)};this._awaitInitialization(i)},_updateMpulseData:function(){try{window.mPulseApp.setPageGroup(i.tracking.data.soastaPageType),window.mPulseApp.setABTest(i.tracking.data.soastaBucket),this.mPulse.setDimension("Site View",i.tracking.data.deviceType),"object"==typeof window.BOOMR&&"object"==typeof window.BOOMR.session&&window.mPulseApp.getSessionID()!==window.BOOMR.session.ID&&window.mPulseApp.setSessionID(window.BOOMR.session.ID)}catch(e){n.error("Failed to set mPulse vars for custom timers",e)}}};return s._init(),s}),define("components/tracking-controller",["jquery","version!fly/managers/debug","managers/page-vars","managers/mpulse","utils/cookie","version!fly/components/base"],function(e,t,i,n,s){t=t.init("trackingController"),e.widget("tr.trackingController",e.fly.base,{options:{gcpUrlWithoutQueryString:"https://us-central1-i-cnet-dev.cloudfunctions.net/errorResponsePublish?"},monitoredServices:{comscore:{fireCount:0,maxFireCount:1,requestPrefix:"https://sb.scorecardresearch.com/b?",services:["mpulse"],timerName:"track_comscore"}},_create:function(){this._setup(),"article"!==i.tracking.data.pageType&&"blog_post"!==i.tracking.data.pageType||this._initRequestTracking(),"error_page"==i.pageType&&this._injectQueryStringGCP()},_injectQueryStringGCP:function(){var n=this;window.TRFunctions.gdpr_consent_callback("_injectQueryStringGCP",function(){var o={ctype:"viewguid",xref:document.referrer,cval:i.guid,v21:i.tracking.data.siteType+"|||"+i.tracking.data.deviceType,title:document.title,srcurl:window.location.href,ld:window.location.host,brlang:navigator.language,brwinsz:window.innerWidth+"x"+window.innerHeight,brscrsz:window.screen.width+"x"+window.screen.height,tcset:document.characterSet,ts:Date.now(),ldc:s.read("LDCLGFbrowser",{raw:!0}),clgf:s.read("XCLGFbrowser",{raw:!0}),im:"tracking-controller.js",siteid:i.tracking.data.siteId,rsid:i.tracking.data.rsid,pagetype:i.tracking.data.pageType,viewguid:i.guid,devicetype:i.tracking.data.deviceType,sitetype:i.tracking.data.siteType,sid:i.tracking.data.siteId,env:i.environment},a=n.options.gcpUrlWithoutQueryString+e.param(o);t.log(a),e("<img src="+a+">")})},_initRequestTracking:function(){var e=this,i=0;window.setInterval(function(){try{var n=window.performance.getEntriesByType("resource");for(i=i>=n.length?0:i;i<n.length;)e._trackServiceRequest(n[i]),i++}catch(e){t.error("Failed to monitor tracking requests (known race condition):",e)}},500)},_trackServiceRequest:function(e){for(var i in this.monitoredServices){var s=this.monitoredServices[i];s.fireCount<s.maxFireCount&&e.name.indexOf(s.requestPrefix)&&(t.info("Tracking the request: "+s.timerName,e.fetchStart),-1!==s.services.indexOf("mpulse")&&n.sendBeacon(s.timerName,e.fetchStart),s.fireCount++)}}})}),define("managers/tracking",["version!fly/managers/debug","components/tracking-controller"],function(e){return e.init("trackingManager"),$.tr.trackingController()}),define("main",["jquery","managers/components","managers/page-vars","managers/image-resolution","managers/user","version!fly/utils/guid","managers/tealium","version!fly/managers/debug","managers/user-authentication","version!components/load-async","version!components/medusa-async","components/header-search","components/header-nav","version!components/editions","version!libs/lazyload","components/lazyload-images","components/sticky-element","components/user-tracking","version!components/medusa-recommendation","version!components/newsletter-subscription","managers/waypoints","version!libs/waypoints/sticky","managers/tracking","optional"],function(e,t,i,n,s,o,a,r){var l=r.get("main"),d=(e(document),window.trPageVars),c=d.ads.data;l.log(c),window.TRFunctions.gdpr_consent_callback("script_gpt",function(){i.ads.enabled&&i.services.gpt.enabled&&require(["managers/ad"],function(e){try{e.setup(),e.init({ad:i.ads.data,viewGuid:i.guid}),e.delayedAdLoad()}catch(e){window.console&&console.log("GPT Manager threw an exception:",e)}})}),e(document).ready(function(){var i=e("body"),o=d.tracking,r=window.__tealium_data_guid,l=d.user;userCookieValues=JSON.parse(e.cookie("fly_user")),userCookieValues&&0!==userCookieValues.length&&(l.regId=userCookieValues.regId?userCookieValues.regId:""),editionCookieValue=e.cookie("fly_edition"),o.data.edition=editionCookieValue&&0!==editionCookieValue.length?editionCookieValue:"",a._trackSourcePoint(),!0===o.enabled&&a.init(o.data),$tealium=a,n.init(d.imgRes),s.init(d.user),t.process(i),e.cookie("viewGuid",r,{path:"/"})})}),define("fly/managers/disqus-1.0",["jquery","version!fly/managers/debug","version!fly/utils/url-helper"],function(e,t,i){t=t.init("disqus");var n,s=!1,o={onInit:function(){},disqusId:"disqus_thread",disqusSelector:'[data-social="disqus"]',enabled:!1,shortName:null,disqusConfig:{apiPublicKey:null,enableScrollContainer:!0,sso:{},onNewComment:null}};return{init:function(t,i){e.extend(!0,o,t),o.enabled&&(i?this.fetchSso(function(){s=!0,o.onInit(),e(o.disqusSelector).data("loadOnInit")&&this.parse()}.bind(this)):(s=!0,o.onInit(),e(o.disqusSelector).data("loadOnInit")&&this.parse()))},parse:function(t){n=t?t.find(o.disqusSelector):e(o.disqusSelector),e("#"+o.disqusId).remove(),n.append('<div id="'+o.disqusId+'"></div>'),o.newThreadCallback&&o.newThreadCallback(),this.reset()},reset:function(){this.isInitialized()?this._loadDisqus():o.onInit=function(){this._loadDisqus()}.bind(this)},_loadDisqus:function(){var e=n.data("id"),t=n.data("title"),s=n.data("url");!s||i.getPath(s).length<2||(window.DISQUS?window.DISQUS.reset({reload:!0,config:function(){this.page.identifier=e,this.page.url=s,this.page.title=t,o.disqusConfig.sso.remoteAuthS3&&(this.page.remote_auth_s3=o.disqusConfig.sso.remoteAuthS3)}}):(disqus_config=function(){this.page.api_key=o.disqusConfig.apiPublicKey,this.experiment.enable_scroll_container=o.disqusConfig.enableScrollContainer,this.page.identifier=e,this.page.url=s,this.page.title=t,o.disqusConfig.sso.remoteAuthS3&&(this.page.remote_auth_s3=o.disqusConfig.sso.remoteAuthS3),this.sso={name:o.disqusConfig.sso.name,button:o.disqusConfig.sso.button,icon:o.disqusConfig.sso.icon,url:o.disqusConfig.sso.url,logout:o.disqusConfig.sso.logout,width:o.disqusConfig.sso.width,height:o.disqusConfig.sso.height},o.disqusConfig.sso.profile_url&&(this.sso.profile_url=o.disqusConfig.sso.profile_url),this.callbacks.onNewComment=o.disqusConfig.onNewComment},require(["//"+o.shortname+".disqus.com/embed.js"])))},fetchSso:function(t,i){t=t||function(e){},i=i||!1,e.post(i?o.disqusConfig.sso.authLogoutUrl:o.disqusConfig.sso.authLoginUrl,{}).done(function(e){e.remoteAuthS3?(o.disqusConfig.sso.remoteAuthS3=e.remoteAuthS3,t(e.remoteAuthS3)):t(null)}.bind(this))},isInitialized:function(){return s}}}),define("managers/disqus",["jquery","version!fly/managers/debug","version!fly/managers/disqus","managers/page-vars","managers/tealium","utils/video-delay-helper"],function(e,t,i,n,s,o){var t=t.init("disqus"),a=!1;if(n.services.disqus.enabled){var r={onInit:function(){},enabled:!0,shortname:n.disqus.shortname,shortName:n.disqus.shortname,disqusConfig:{apiPublicKey:n.disqus.publicKey,enableScrollContainer:!0,sso:{name:n.disqus.sso.name,button:n.disqus.sso.button,icon:n.disqus.sso.icon,authLoginUrl:n.disqus.sso.authLoginUrl,authLogoutUrl:n.disqus.sso.authLogoutUrl,url:n.disqus.sso.loginUrl,logout:n.disqus.sso.logoutUrl,width:"800",height:"400",remoteAuthS3:null},onNewComment:[function(e){var t=n.tracking.data;s.trackComment("trackSubmitComment",{_riaEvent:"create",_riaEventT:"comment",_riaWd:"submitbutton",siteSection:t.siteSection,userId:n.user.regId,pageNum:t.pageNum,_pageViewGuid:n.guid,_dwAnonId:utag_data._dwCookieId},"submitComment")}]}};return e.extend(!0,{},i,{init:function(){a||(a=!0,window.TRFunctions.gdpr_consent_callback("script_disqus",function(){var n=!1;e.cookie("fly_user")&&(n=!0),o.callback("disqus",function(e){e?t.log("Disqus was delayed for video"):t.log("Loading Disqus regardless of video"),i.init(r,n)})}))}})}}),define("components/disqus-count",["jquery","managers/page-vars","version!fly/managers/debug",window.trPageVars.services.disqus.enabled?"version!fly/components/disqus-count":""],function(e,t,i){i=i.init("disqusCount"),t.services.disqus.enabled&&e.widget("tr.disqusCount",e.fly.disqusCount,{options:{shortname:t.disqus.shortname,disqusIdentifier:null,disqusUrl:null},disqusScriptId:"dsq-count-scr",_create:function(){var e=this;window.TRFunctions.gdpr_consent_callback("script_disqus_count",function(){e._super()})}})}),define("fly/components/social-links-1.0",["jquery","version!fly/managers/debug","version!fly/utils/string-vars","version!fly/components/base"],function(e,t,i){var n=e.support.touch?"vclick":"click",s=t.init("socialLinks");e.widget("fly.socialLinks",e.fly.base,{options:{title:"",url:"",description:"",shortUrl:"",via:"",data:{},popupWidth:620,popupHeight:440,location:null},isLoading:!1,popupId:"popup",linkId:"link",links:{facebook:"http://www.facebook.com/sharer.php?u={url}&t={title}",reddit:"http://reddit.com/submit?url={url}&title={title}",digg:"http://digg.com/submit?url={url}&title={title}",stumbleupon:"http://www.stumbleupon.com/submit?url={url}",twitter:function(e){var t="https://twitter.com/intent/tweet?text={title}&related={related}";return t+=e.shortUrl?"&url={shortUrl}&counturl={url}":"&url={url}",t+=e.via?"&via={via}":""},delicious:"http://del.icio.us/post?url={url}&title={title}",googleplus:"https://plus.google.com/share?url={url}&utm_content={title}&utm_campaign=&utm_medium=share%2Bbutton",linkedin:"http://www.linkedin.com/shareArticle?mini=true&url={url}&title={title}&summary={description}",pinterest:"http://pinterest.com/pin/create/button/?url={url}&media={media}&description={description}",tumblr:"http://www.tumblr.com/share/link?url={url}&description={description}",whatsapp:function(t){var n={ios:{match:/(ipad|iphone|ipod)/,store:"https://itunes.apple.com/app/whatsapp-messenger/id310633997",url:"whatsapp://send?text={title}%20{url}"},androidChrome:{match:"androidChrome",store:"market://details?id=com.whatsapp",url:"intent://send?text={title}%20{url}#Intent;package=com.whatsapp;scheme=whatsapp;end;"},android:{match:"android",store:"market://details?id=com.whatsapp",url:"whatsapp://send?text={title}%20{url}"}},s=window.navigator.userAgent.toLowerCase();for(var o in n)if(o=n[o],s.match(o.match)){o.url=i.compile(o.url,t,["urlencode"]);var a=e("<iframe />").css("display","none").attr("src",o.url).appendTo("body");return setTimeout(function(){window.open(o.store,"_blank"),a.remove()},300),!1}},print:function(){return window.print(),!1},email:"mailto:?subject={title}&body={url}%0D%0D{description}"},_create:function(){var e=(this.options,{});this._setup(),e[n+" [data-"+this.popupId+"]"]="_handlePopup",e[n+" [data-"+this.linkId+"]"]="_handleLink",this._on(this.$element,e)},_handlePopup:function(t){var i=e(t.currentTarget),n=i.data(this.popupId);t.preventDefault(),this.$el=i,this._setupClickEvent(t,{el:i,name:n}),this.popup(t,n)},_handleLink:function(t){var i=e(t.currentTarget),n=i.data(this.linkId);t.preventDefault(),this.$el=i,this._setupClickEvent(t,{el:i,name:n}),this.link(t,n)},_getLink:function(t){var n=this.links[t.toLowerCase()],s=this._getLinkData();return e.isFunction(n)&&(n=n(s)),n=i.compile(n,s,["urlencode"])},setLink:function(e,t){this.links[e]=t},_getLinkData:function(){var t=this.options;return e.extend({title:t.title,description:t.description,url:t.url,shortUrl:t.shortUrl,via:t.via},t.data)},popup:function(e,t){var i=this._getLink(t),n=this._getPopUpCoords(),s=this.$el;i&&(window.open(i,"button_share","width="+n.width+", height="+n.height+", left="+n.left+", top="+n.top+", personalbar=0, toolbar=0, scrollbars=1, resizable=1"),this._setupLoadEvent(e,{el:s,name:t,type:this.popupId}))},link:function(e,t){var i=this._getLink(t),n=this.$el;i&&(this._setupLoadEvent(e,{el:n,name:t,type:this.linkId}),window.location=i)},_getPopUpCoords:function(e,t){var i=this.options,n=e||i.popupWidth,s=t||i.popupHeight,o=screen.width,a=screen.height;return{left:Math.round(o/2-n/2),top:a>s?Math.round(a/2-s/2):0,width:o>n?n:o,height:a>s?s:a}},_setupClickEvent:function(t,i){t=t||null;var n=this.options.location;n&&e.extend(i,{location:n}),s.log("clicked"),this._trigger("clicked",null,i)},_setupLoadEvent:function(t,i){t=t||null;var n=this.options.location;n&&e.extend(i,{location:n}),this._trigger("loaded",t,i)}})}),define("components/social-links-1.0",["jquery","version!fly/utils/string-helper","version!fly/managers/debug","version!fly/utils/string-vars","version!fly/components/loading","version!fly/components/social-links"],function(e,t,i,n){var s=i.init("socialLinks"),o=e.support.touch?"vclick":"click";e.widget("fly.socialLinks",e.fly.socialLinks,{options:{favApiUrl:"/xhr/favorite/",hashtag:null,data:{id:"",type:""},loader:{disabled:!1,template:'<span class="{baseClass} {stateClass}"></span>',classes:{base:"loading-con"}}},links:{twitter:function(e){var t="https://twitter.com/intent/tweet?text={title}&related={related}";return t+=e.hashtag?"&button_hashtag={hashtag}":"",t+="&url={url}",t+=e.via?"&via={via}":""},email:null},_create:function(){var t=(this.options,this),i={"click li.comment-button a":"_scrollToComments"};eventMapClick={},this._setup(),eventMapClick[o+" [data-"+this.popupId+"]"]="_handlePopup",eventMapClick[o+" [data-"+this.linkId+"]"]="_handleLink",this._on(this.$element,eventMapClick),this.$popUps=this.$element.find("[data-"+this.popupId+"]"),this.$links=this.$element.find("[data-"+this.linkId+"]"),this.$popUps.length>0&&this.$popUps.each(function(){var i=e(this),n=i.data(this.popupId);t._initItem(n.popup,i)}),this.$links.length>0&&this.$links.each(function(){var i=e(this),n=i.data(this.linkId);t._initItem(n.link,i)}),this._on(this.$element,i)},_handleLink:function(t){var i=e(t.currentTarget),n=i.data(this.linkId);t.preventDefault(),this.$el=i,this._setupClickEvent(t,{el:i,name:n}),this.link(t,n)},_getLink:function(t){var i=this.links[t.toLowerCase()],s=this._getLinkData(t.toLowerCase());return e.isFunction(i)&&(i=i(s)),i=n.compile(i,s,["urlencode"])},_getLinkData:function(t){var i=this.options,n=i.title;if("twitter"==t){null==window.sharebarShortenerUrl?e.ajax({url:"/sharebar-shortener/",async:!1,data:{longurl:i.url}}).done(function(e){e.data&&e.data.url&&(window.sharebarShortenerUrl=e.data.url,i.url=e.data.url)}):i.url=window.sharebarShortenerUrl;var s=i.title+" "+i.url.substr(0,23)+" ";if(i.hashtag&&(s+="#"+i.hashtag+" "),s+="via @"+i.via,s.length>278){var o=s.length-278+3;n=i.title.substr(0,i.title.length-o),n=n.substr(0,Math.min(n.length,n.lastIndexOf(" "))),n+="..."}}return e.extend({title:n,description:i.description,url:i.url,via:i.via,hashtag:i.hashtag},i.data)},_initItem:function(i,n){var o=t.capitalize(i),a=this;e.isFunction(this["setup"+o])&&(s.log("Calling: setup"+o),this["setup"+o](n)),e.isFunction(this["get"+o])&&this.setLink(i,e.proxy(this["get"+o],a))},setupTrfavorite:function(t){var i=this.options;assetId=t.data("id"),assetType=t.data("type"),i.data.id=assetId,i.data.type=assetType,i.data.favApiUrl=i.favApiUrl,this.loader=e.fly.loading(i.loader),this.checkCookie(t)},getTrfavorite:function(t){var i=this.options,n=this;if(this.checkCookie(this.$el),!t.id)return!1;this.loader.$element.appendTo(this.$el),this.loader.add(),e.ajax({url:t.favApiUrl,type:"POST",dataType:"json",data:{assetId:t.id,assetType:t.type,isRemove:i.isRemove},success:function(e){n.loader.remove(),e.error||n.checkCookie(n.$el)},error:function(e){n.loader.remove(),s.log("Favorite ajax call failed",e)}})},checkCookie:function(t){var i=this.options;s.log("Checking Cookie"),favCookie=e.cookie("fly_tr_favorites"),favCookie?(favCookie=e.parseJSON(favCookie),null!==favCookie&&favCookie.hasOwnProperty(assetId)?(s.log("this asset is favorited"),i.isRemove=!0,t.html(t.html().replace("Save","Unsave")),t.addClass("saved")):(s.log("this asset is NOT favorited"),i.isRemove=!1,t.html(t.html().replace("Unsave","Save")),t.removeClass("saved"))):this.requestCookie(t)},requestCookie:function(e){},_scrollToComments:function(t){var i=t.currentTarget.hash;return $target=e(i),e('[data-component="disqusComments"]').disqusComments("showCommentsShareBar"),!($target.length>0&&(e("html, body").animate({scrollTop:$target.offset().top-100}),1))}})}),define("fly/components/social-button-1.0",["jquery","version!fly/managers/debug","version!fly/utils/string-helper","version!fly/components/base"],function(e,t,i){var n=t.init("socialButton");e.widget("fly.socialButton",e.fly.base,{options:{mode:null,title:"",summary:"",url:"",shortUrl:"",twitterRelated:"cnet,zdnet",twitterUsername:!1,redditData:{target:null,bdrColor:null,bgColor:null},googleplusKey:"",facebookAppId:"",site:"",buttonSelectorId:"button",location:null},_create:function(){var t=this.options,i=this;if(this._setup(),this.url=t.url||window.location.href,this.encodedUrl=encodeURIComponent(t.url),this.encodedTitle=encodeURIComponent(t.title),this.$buttons=this.$element.find("[data-"+t.buttonSelectorId+"]"),this.$buttons.length<=0)return n.log("Error: No buttons found.",this.$element),!1;this.$buttons.each(function(){var n=e(this),s=n.data(t.buttonSelectorId);i._setFunction(s.toLowerCase())})},_setFunction:function(t){var s,o="get"+i.capitalize(t);if(!e.isFunction(this[o]))return n.log("Error: Function name does not exist:",o),!1;s=this[o](),this.setContent(t,s)},getFacebook:function(){var t,i=this.getMode("horizontal"),n={width:"46",layout:"box_count",href:this.url,send:"false"};switch(i){case"horizontal":n.height="21",n.width="85",n.layout="button_count";break;case"horizontal-wide":n.height="24",n.width="350",n.layout="standard"}return t='<div class="fb-like" data-send="false" data-show-faces="false" data-font="arial"',e.each(n,function(e,i){t+=" data-"+e+'="'+i+'"'}),t+="></div>",this._setFbContainer(),t},getFacebookActivity:function(t){var i,n={width:"290",height:"350",header:"false",font:"arial",recommendations:"true",ref:"activity-widget",site:this.options.site},s=e.extend({},n,t);return i='<div class="fb-activity" max-age="10" border-color="#fff"',e.each(s,function(e,t){i+=" data-"+e+'="'+t+'"'}),i+="></div>",this._setFbContainer(),i},getTwitterfollow:function(){var t,i,n,s=this.getMode("horizontal"),o=this.options.twitterUsername,a={};return!!o&&(o=encodeURI(e.trim(o)),0===o.indexOf("@")&&(o=o.substring(1)),i="horizontal"==s?"true":"false",n="horizontal"==s?"false":"true",a={"show-count":n,lang:"en","show-screen-name":i},t='<a href="http://twitter.com/'+o+'" class="twitter-follow-button"',e.each(a,function(e,i){t+=" data-"+e+'="'+i+'"'}),t+=">Follow @"+o+"</a>")},getTwitter:function(){var t,i=this.getMode("horizontal"),n={},s=this.options;return n={count:i,related:this.options.twitterRelated,text:this.options.title},s.shortUrl?(n.url=s.shortUrl,n.counturl=this.url):n.url=this.url,s.via&&(n.via=s.via),t='<a href="http://twitter.com/share" class="twitter-share-button"',e.each(n,function(e,i){t+=" data-"+e+'="'+i.replace(/"/g,"&#34;")+'"'}),t+="></a>"},getStumbleupon:function(){var e=this.getMode("vertical"),t={};return"horizontal"===e?(t.height="18",t.width="74",t.type="1"):(t.height="60",t.width="50",t.type="5"),'<iframe src="http://www.stumbleupon.com/badge/embed/'+t.type+"/?url="+this.encodedUrl+'" scrolling="no" frameborder="0" style="border:none;overflow:hidden;width:'+t.width+"px;height:"+t.height+'px;" allowTransparency="true"></iframe>'},getReddit:function(){var e,t=this.getMode("horizontal"),i="https:"==document.location.protocol?"https://redditstatic.s3.amazonaws.com":"http://www.reddit.com/static",n={},s=this.options,o=s.redditData;return"horizontal"===t?(n.height="22",n.width="120",n.type="1"):(n.height="69",n.width="51",n.type="2"),e='<iframe src="'+i+"/button/button"+n.type+".html?width="+n.width+"&url="+this.encodedUrl+"&title="+this.encodedTitle,o.target&&(e+="&sr="+encodeURIComponent(o.target)),o.bgColor&&(e+="&bgcolor="+encodeURIComponent(o.bgColor)),o.bdrColor&&(e+="&bordercolor="+encodeURIComponent(o.bdrColor)),e+='&newwindow=1" height="'+n.height+'" width="'+n.width+'" scrolling="no" frameborder="0"></iframe>'},getGoogleplus:function(){var e,t=this.getMode("vertical");return e="horizontal"==t?"medium":"tall",'<div class="g-plusone" data-size="'+e+'" data-href="'+this.url+'" data-count="true" data-callback="handleGooglePlusCallback"></div>'},getLinkedin:function(){var e,t=this.getMode("vertical");return e="horizontal"==t?"right":"top",'<script type="IN/Share" data-counter="'+e+'" data-url="'+encodeURI(this.url)+'" data-onsuccess="self.initLinkedEvents"><\/script>'},_setFbContainer:function(){e("#fb-root").length<=0&&e('<div id="fb-root"></div>').appendTo(e("body"))},getMode:function(e){var t=this.options,i=t.mode,n=this.$element;return i=i||e,i=i.toLowerCase(),(!n.data("mode")||n.data("mode")&&n.data("mode")===i)&&n.attr("data-mode",i),i},setContent:function(t,s){var o="_init"+i.capitalize(t),a=this._getButtonEl(t);e(s).appendTo(a),e.isFunction(this[o])?this[o]():n.log("Error: No handler function assigned. ",o),this._setupLoadEvent("loaded",null,{el:a,name:t})},_getButtonEl:function(t){var i,n=this.options;return this.$buttons.filter(function(s){var o=e(this),a=o.attr("data-"+n.buttonSelectorId);return i=a===t&&e(this)})},_initFacebook:function(){var e=this;require(["//connect.facebook.net/en_US/all.js#xfbml=1&appId="+this.options.facebookAppId],function(){FB.XFBML.parse();try{FB.Event.subscribe("edge.create",function(t){e._setupClickEvent(null,{name:"facebook",response:t})})}catch(e){}})},_initFacebookactivity:function(){this._initFacebook()},_initTwitter:function(){var e=this;require(["http://platform.twitter.com/widgets.js"],function(){try{twttr.widgets.load(),twttr.events.bind("follow",function(t){e._setupClickEvent(t,{name:"twitter",action:"follow"})}),twttr.events.bind("click",function(t){e._setupClickEvent(t,{name:"twitter",action:"click"})}),twttr.events.bind("tweet",function(t){e._setupClickEvent(t,{name:"twitter",action:"tweet"})})}catch(e){n.log("Issue with twitter js (http://platform.twitter.com/widgets.js)",e)}})},_initTwitterfollow:function(){this._initTwitter()},_initLinkedin:function(){require(["//platform.linkedin.com/in.js"],function(){e(".IN-widget").click(function(){self._setupClickEvent(null,{name:"linkedin"})})})},_initGoogleplus:function(){var e=this;require(["https://apis.google.com/js/plusone.js"],function(){window.handleGooglePlusCallback=function(t){var i="on"==t.state?"plusone":"rmvplusone";e._setupClickEvent(null,{name:"googleplus",type:i})}.bind(this)})},_initReddit:function(){},_setupClickEvent:function(t,i){t=t||null;var n=this.options.location;n&&e.extend(i,{location:n}),this._trigger("clicked",t,i)},_setupLoadEvent:function(t,i){t=t||null;var n=this.options.location;n&&e.extend(i,{location:n}),this._trigger("loaded",t,i)},_destroy:function(){this.buttonContent&&this.$buttonContent.remove()}})}),define("fly/managers/history-1.0",["jquery","version!fly/utils/string-vars"],function(e,t){"use strict";var i=window.history,n=e(window),s=0,o="pushState"in i&&"replaceState"in i&&!(window.navigator.userAgent.indexOf("Firefox")>=0&&window.top!==window)&&-1===window.navigator.userAgent.search(/CriOS/),a=function(e,t){e=e||{},s+=1,this.id="history-"+s,this.title=e.title,this.route=e.route,this.originalTitle=document.title,t&&this.navigate(t,{replace:!0})};return a.prototype={constructor:a,navigate:function(n,s){if(!o)return!1;e.extend(!0,n,{historyId:this.id}),s=s||{};var a=s.title||this.title,r=s.url||this.route;a=t.compile(e.isFunction(a)?a(n):a,e.extend({title:this.originalTitle},n)),r=t.compile(e.isFunction(r)?r(n):r,n),i[s.replace?"replaceState":"pushState"](n,a,r),a&&(document.title=a)},stateChange:function(t){if(!o)return!1;var s=this;n.on("popstate."+this.id,function(){var n=i.state||{};n.historyId===s.id&&e.isFunction(t)&&t(n)})},stop:function(){if(!o)return!1;n.off("popstate."+this.id)}},{init:function(e,t){return new a(e,t)}}}),define("fly/components/image-gallery-1.0",["jquery","version!fly/managers/debug","version!fly/utils/string-vars","version!fly/managers/history","version!fly/components/base"],function(e,t,i,n){var s=e.mobile?"vclick":"click";t.init("imageGallery");e.widget("fly.imageGallery",e.fly.base,{options:{index:0,count:0,preloadThreshold:2,selectors:{image:'[data-item="image"]',count:'[data-item="image-count"]'},classes:{selected:"selected",disabled:"disabled"},countTemplate:'<span class="index">{index}</span> / <span class="count">{count}</span>',pushState:{enabled:!1,route:function(e){return e.index>1?"./{index}":"./"},title:function(e){return"{title}"+(e.index>1?"- {index}":"")}}},index:1,indexPrevious:null,count:0,selectors:{control:"[data-to-image]",next:'[data-to-image="next"]',previous:'[data-to-image="previous"]',jump:'[data-to-image="{index}"]'},_create:function(){var e=this.options;this._setup(),this.index=parseInt(e.index,10),this.count=parseInt(e.count,10),this.$images=this.$element.find(e.selectors.image),this.$count=this.$element.find(e.selectors.count),this._setupEvents(),this._updateControls(),this._preloadImages(),e.pushState.enabled&&this._setupPushState()},_setupEvents:function(){var e={};e[s+" "+this.selectors.control]="_handleControlClick",this._on(this.$element,e)},_setupPushState:function(){var e=this.options,t=this;this.history=n.init(e.pushState,{index:this.index}),this._on({imagegalleryshown:function(e,i){var n={index:i.index};"stateChange"!==i.action&&t.history.navigate(n,{title:i.title,url:i.url})}}),this.history.stateChange(function(e){t.show(e.index,"stateChange")})},_handleControlClick:function(t){var i=e(t.target).closest(this.selectors.control).data("toImage");switch(t.preventDefault(),t.stopPropagation(),i){case"next":this.next();break;case"previous":this.previous();break;default:this.show(parseInt(i,10),"to")}},_updateControls:function(){var e=this.options,t=this.$element.find(this.selectors.previous),n=this.$element.find(this.selectors.next),s=this.$element.find(i.compile(this.selectors.jump,{index:this.indexPrevious})),o=this.$element.find(i.compile(this.selectors.jump,{index:this.index}));n[this.index===this.count?"addClass":"removeClass"](e.classes.disabled),t[1===this.index?"addClass":"removeClass"](e.classes.disabled),o.addClass(e.classes.selected),s.removeClass(e.classes.selected)},_updateCount:function(){var e=this.options,t={};this.$count.length&&(t={index:this.index,count:this.count},this.$count.html(i.compile(e.countTemplate,t)))},show:function(e,t){var i,n,s=this.options;e!==this.index&&(i=this.$images.eq(this.index-1),n=this.$images.eq(e-1),this._loadImage(n),i.removeClass(s.classes.selected),n.addClass(s.classes.selected),this.indexPrevious=this.index,this.index=e,this._updateControls(),this._updateCount(),this._trigger("shown",null,{$current:n,$previous:i,index:this.index,action:t}),this._preloadImages())},next:function(){var e=(this.options,this.index+1);e>this.count||(this.show(e,"next"),this._trigger("next"))},previous:function(){var e=(this.options,this.index-1);0!==e&&(this.show(e,"previous"),this._trigger("previous"))},_preloadImages:function(){var t,i,n,s=this.options,o=this;0!==s.preloadThreshold&&(t=Math.max(1,this.index-s.preloadThreshold),i=Math.min(this.count,this.index+s.preloadThreshold),n=this.$images.slice(t-1,i),
n.each(function(t,i){o._loadImage(e(i))}))},_loadImage:function(e){var t,i,n=e.data("isLoaded")||!1;n||(t=e.find("img"),i=t.data("src"),t.length&&i&&(t.attr("src",i),t.removeData("src"),e.data("isLoaded",!0)))}})}),define("components/image-gallery-1.0",["jquery","version!fly/managers/debug","managers/tealium","version!fly/managers/history","managers/page-vars","version!fly/components/image-gallery"],function(e,t,i,n,s){var o=t.init("imageGallery");e.widget("fly.imageGallery",e.fly.imageGallery,{options:{preloadThreshold:0,selectors:{meta:'[data-item="meta"]',content:'[data-item="content"]'},countTemplate:"Image {index} of {count}",swipeThreshold:20,canonicalProtocol:"https:",pushState:{enabled:!0,title:function(t){var i=e("title").html().trim();return(-1==i.indexOf(" - Page ")?i.split(" - TechRepublic")[0]:i.split(" - Page ")[0])+(t.index>1?" - Page {index}":"")+" - TechRepublic"}}},refreshAds:!1,_create:function(){var t=this.options;o.log("_create"),this._super("_create"),this.$content=e.find(t.selectors.content),this._loadImage(this.$images.eq(this.index-1)),this._updateMetadata(),location.search&&location.search.indexOf("seq=")>0&&window.history.replaceState(null,null,document.location.pathname)},_setupEvents:function(){this._super();var t={};t.keydown="_handleKeyboardControl",this._on(document,t),"ontouchstart"in window&&this._setupTouch(),e(".hide-until-ready",this.$element).removeClass("hide-until-ready")},_setupPushState:function(){var e=this.options,t=e.pushState.route;e.pushState.route=function(e){return(e.index>1?t+"{index}/":t)+window.location.search},this._super()},_handleControlClick:function(t){var i=e(t.target).closest(this.selectors.control).data("toImage");switch(t.preventDefault(),i){case"next":this.next();break;case"previous":this.previous();break;default:this.show(parseInt(i,10),"to")}},show:function(t,n){if(t!==this.index){var a=this.options,r=this;this.refreshAds=!0,this._super(t,n);var l=this.$images.eq(t-1).attr("style","");$meta=l.find(a.selectors.meta),e(this.$content).html($meta.html()),this._updateMetadata(),setTimeout(function(){var e=r.refreshAds;if(r.refreshAds=!1,omnitureMgr.galleryView({pageNum:t}),e&&"article"!=s.pageType&&"blog_post"!=s.pageType)try{window.TRFunctions.gdpr_consent_callback("script_image_gallery_gpt",function(){s.services.gpt.enabled&&require(["version!fly/managers/gpt"],function(e){"mobile"===s.tracking.data.deviceType?(e.setTargeting("vguid",i.getViewGuid()),e.refresh(s.guid)):(e.setTargeting("vguid",i.getViewGuid()),e.refresh(s.guid,["leader_top","sharethrough_top","leader_bottom","mpu_plus_top","mobile_banner"]))})})}catch(e){o.log("ImageGallery ad error occurred")}},400)}},next:function(){this._super()},previous:function(){this._super()},_handleKeyboardControl:function(e){switch(e.keyCode){case 37:this.previous();break;case 39:this.next()}},_setupTouch:function(){function t(e,t,i,n){var s="translate3d("+t+","+i+","+n+")";e.css({transform:s,"-webkit-transform":s})}function i(i){if(1==i.touches.length){r=h.eq(l.index-1).addClass("swiping"),h.each(function(i){Math.abs(i-l.index+1)<2&&t(e(this),100*(i-l.index+1)+"%",0,0)});var n=i.touches[0];d=n.screenX,c=n.screenY,u=0}}function n(e){if(d<0||c<0)return!0;u<-l.options.swipeThreshold&&l.index<l.count?(t(h.eq(l.index).removeClass("swiping"),0,0,0),t(r.removeClass("swiping"),"-100%",0,0),l.next()):u>l.options.swipeThreshold&&l.index>1?(t(h.eq(l.index-2).removeClass("swiping"),0,0,0),t(r.removeClass("swiping"),"100%",0,0),l.previous()):t(r.removeClass("swiping"),0,0,0)}function a(e){if(d<0||c<0||e.touches.length>1)return!0;var i=e.touches[0];if(Math.abs(i.screenY-c)>5&&Math.abs(i.screenX-d)<10)return d=-1,c=-1,!0;e.preventDefault(),u=(i.screenX-d)/l.$element.width()*100,t(r,u+"%",0,0)}o.log("initialising touch events"),this.$element.find(".controls").hide();var r,l=this,d=-1,c=-1,u=0,h=e("li.image"),p=!!s.passiveEventsSupported&&{passive:!0};l.$element[0].addEventListener("touchstart",i,p),l.$element[0].addEventListener("touchend",n,p),l.$element[0].addEventListener("touchmove",a,!1)},_updateMetadata:function(){var t=e("meta[name='description']"),i=e('[data-image-index="'+this.index+'"]').find("img"),n=t.attr("content"),s=this.options.canonicalProtocol+"//"+location.host+location.pathname;e('link[rel="canonical"]').attr("href",s),t.length>0&&(t.attr("content",n.length>145?n.substr(0,145)+"...":n),1!=this.index?t.attr("content",t.attr("content").split(" - Page ")[0]+" - Page "+this.index):t.attr("content",t.attr("content").split(" - Page ")[0]),e("meta[property='og:description']").attr("content",t.attr("content")),e("meta[name='twitter:description']").attr("content",t.attr("content"))),e("meta[property='og:url']").attr("content",s),e("meta[property='og:title']").attr("content",document.title),e("meta[property='og:image']").attr("content",i.attr("src")),e("meta[name='twitter:url']").attr("content",s),e("meta[name='twitter:image']").attr("content",i.attr("src")),e("meta[name='twitter:image:width']").attr("content",i.width()),e("meta[name='twitter:image:height']").attr("content",i.height()),e("meta[name='twitter:title']").attr("content",document.title)}})}),window.Modernizr=function(e,t,i){function n(e,t){return typeof e===t}var s,o,a={},r=t.documentElement,l="modernizr",d=t.createElement(l),c=d.style,u=" -webkit- -moz- -o- -ms- ".split(" "),h={},p=[],m=p.slice,f=function(e,i,n,s){var o,a,d,c,u=t.createElement("div"),h=t.body,p=h||t.createElement("body");if(parseInt(n,10))for(;n--;)d=t.createElement("div"),d.id=s?s[n]:l+(n+1),u.appendChild(d);return o=["&#173;",'<style id="s',l,'">',e,"</style>"].join(""),u.id=l,(h?u:p).innerHTML+=o,p.appendChild(u),h||(p.style.background="",p.style.overflow="hidden",c=r.style.overflow,r.style.overflow="hidden",r.appendChild(p)),a=i(u,e),h?u.parentNode.removeChild(u):(p.parentNode.removeChild(p),r.style.overflow=c),!!a},g={}.hasOwnProperty;o=n(g,"undefined")||n(g.call,"undefined")?function(e,t){return t in e&&n(e.constructor.prototype[t],"undefined")}:function(e,t){return g.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var i=m.call(arguments,1),n=function(){if(this instanceof n){var s=function(){};s.prototype=t.prototype;var o=new s,a=t.apply(o,i.concat(m.call(arguments)));return Object(a)===a?a:o}return t.apply(e,i.concat(m.call(arguments)))};return n}),h.touch=function(){var i;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?i=!0:f(["@media (",u.join("touch-enabled),("),l,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){i=9===e.offsetTop}),i};for(var v in h)o(h,v)&&(s=v.toLowerCase(),a[s]=h[v](),p.push((a[s]?"":"no-")+s));return a.addTest=function(e,t){if("object"==typeof e)for(var i in e)o(e,i)&&a.addTest(i,e[i]);else{if(e=e.toLowerCase(),void 0!==a[e])return a;t="function"==typeof t?t():t,"undefined"!=typeof enableClasses&&enableClasses&&(r.className+=" "+(t?"":"no-")+e),a[e]=t}return a},function(e){c.cssText=""}(),d=null,a._version="2.6.2",a._prefixes=u,a.testStyles=f,a}(this,this.document),define("libs/modernizr",function(){}),define("managers/device",["jquery","version!fly/managers/debug","libs/modernizr"],function(e,t){t=t.init("device");var i={desktop:"desktop",mobile:"mobile"},n={type:"desktop"};return{init:function(t){n.type=t;var i=e("body");Modernizr.touch?i.addClass("touch-enabled"):i.addClass("touch-disabled")},getType:function(){return n.type},isDesktop:function(){return n.type===i.desktop},isMobile:function(){return n.type===i.mobile},isAndroid:function(){return navigator.userAgent.match(/Android/i)},isKindle:function(){return navigator.userAgent.match(/Kindle/i)||navigator.userAgent.match(/Silk/i)},isBlackBerry:function(){return navigator.userAgent.match(/BB10/i)&&navigator.userAgent.match(/Mobile/i)},isWinPhone:function(){return navigator.userAgent.match(/Windows Phone/i)},isIPhone:function(){return navigator.userAgent.match(/iPhone/i)},isIPad:function(){return navigator.userAgent.match(/iPad/i)},isDesktopUserAgent:function(){return!(this.isAndroid()||this.isKindle()||this.isBlackBerry()||this.isWinPhone()||this.isIPhone()||this.isIPad())},isMobileUserAgent:function(){return this.isAndroid()||this.isKindle()||this.isBlackBerry()||this.isWinPhone()},getClickType:function(){return Modernizr.touch?"tap":"click"},getImmediateClickType:function(){return Modernizr.touch?"touchstart":"click"}}}),define("managers/uvpjs",["jquery","version!fly/managers/debug",window.trPageVars.services.video.enabled?"uvpjs":""],function(e,t){if(t=t.init("uvpjs"),window.trPageVars.services.video.enabled){var i=null,n=[],s={},o=0,a=!1,r=!1,l=[];return{init:function(n,s){t.log("uvpjs init");var s=s||function(){};r?(t.log("uvpjs init complete - exec callback"),s()):l.push(s),a||r||(a=!0,i=new window.uvpjs.VideoManager,i.initialize(n,function(i){t.log("uvpjs init - onVideoManagerReady"),t.log("systemInfo",i),r=!0,t.log("uvpjs init - calling "+l.length+" callbacks"),e.each(l,function(e,t){t(i)})},function(e){t.log("videoManager Error",e)}))},createVideoPlayer:function(e,t,n){var t=t||function(){};i.createVideoPlayer(e,function(i){s[e]=i,t(i)},n)},destroyVideoPlayer:function(e){i.destroyVideoPlayer(e)},createPlayerId:function(){var e="uvpJs_"+ ++o;return n.push(e),e},getVideoPlayer:function(e){return s[e]}}}}),define("translations/video",["managers/edition"],function(e){return{en:{resume:"Your video will resume in ",seconds:" seconds",noFlash:"Please install the flash plug-in to play the video",adBlock:{title:"Please disable ad block",message:"This video is unavailable because we were unable to load a message<br/>from our sponsors. If you are using ad blocking software, please disable it and reload the page."},autoplay:"Autoplay",on:"on",off:"off",firefoxUpgrade:{title:"Your version of Firefox is no longer supported.",message:'<a href="http://download.cnet.com/s/firefox/" target="_blank">Click here to download the latest version.</a>'},cannotPlay:"This device is unable to play the requested video."}}[e.getLanguage()]}),define("components/autoplay-controls",["jquery","managers/client-storage","version!fly/managers/debug","managers/tealium","managers/page-vars","version!fly/utils/url-helper","components/video-controls","version!fly/components/base"],function(e,t,i,n,s,o){i=i.init("autoplayControls"),e.widget("tr.autoplayControls",e.fly.base,{options:{clickElement:null},autoplayEnabled:"off",_create:function(){i.log("autoplay _create"),this._setup();var e=navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/Kindle/i)||navigator.userAgent.match(/Silk/i),n=navigator.userAgent.match(/iPhone/i),a=navigator.userAgent.match(/iPad/i),r=navigator.userAgent.match(/BB10/i)&&navigator.userAgent.match(/Mobile/i),l="mobile"===s.tracking.data.deviceType;"off"===o.getParam("autoplayEnabled")?this.autoplayEnabled=!1:e||n||a||r||l||(this.autoplayEnabled=t.read("autoplayEnabled")),this._setupEvents()},_init:function(){i.log("autoplay _init"),null==this.autoplayEnabled&&(this.autoplayEnabled="on",this._setAutoplay(this.autoplayEnabled)),"on"==this.autoplayEnabled?this._startVideo():this.$element.closest(".videoContainer").addClass("pausedAtStartup"),"off"===o.getParam("autoplayEnabled")&&(this.autoplayEnabled="off"),this._setAutoplay(this.autoplayEnabled)},_setupEvents:function(){var e=this;this.$element.find(".autoplayOn").click(function(t){e._setAutoplay("on",t)}),this.$element.find(".autoplayOff").click(function(t){e._setAutoplay("off",t)})},_setAutoplay:function(n,s){s=s||null,i.log("_setAutoplay",n),autoplay="on"===n;var o=e("[data-component=autoplayControls]");if(autoplay)o.addClass("disabled").removeClass("enabled");else{o.addClass("enabled").removeClass("disabled");var a=this.$element.closest(".videoContainer").find('[data-component="videoControls"]');try{a.videoControls("pause")}catch(e){i.log("Error pausing video",e)}}i.log("_setAutoplay: write storage autoplayEnabled: ",n),t.write("autoplayEnabled",n),this.autoplayEnabled=n,s&&this._trackAutoplayToggle(s)},_startVideo:function(){if(i.log("_startVideo"),this.options.clickElement&&this._shouldAutoplay())try{i.log("_startVideo: ",e(this.options.clickElement)),e(this.options.clickElement).closest(".videoContainer").hasClass("playerLoaded")?e(this.options.clickElement).trigger("click"):this._waitForInit()}catch(e){this._waitForInit()}},_shouldAutoplay:function(){return["article","blog_post","video_share"].indexOf(s.tracking.data.pageType)>=0},_waitForInit:function(){i.log("_waitForInit"),window.setTimeout(e.proxy(this._startVideo,this),250)},_trackAutoplayToggle:function(e){var t=this;n.trackCustomEvent("autoplayToggle",{levtType:"ria",event:"log",comp:"autoplayControls",comptyp:"click",riaevent:"click",pageType:s.tracking.data.pageType,brand:s.tracking.data.brand,siteEdition:s.tracking.data.siteEdition,siteType:s.tracking.data.siteType,deviceType:s.tracking.data.deviceType,siteSection:s.tracking.data.siteSection,_pageChannelType:s.tracking.data._pageChannelType,articleId:s.tracking.data.articleId,articleTitle:s.tracking.data.articleTitle,articleType:s.tracking.data.articleType,siteHier:s.tracking.data.siteHier,_pageTitle:s.tracking.data._pageTitle,clickGenericText:"on"==t.autoplayEnabled?"autoplayon":"autoplayoff"},"trackClick")}})}),define("libs/jquery/ui/jquery.ui.core-1.9.2",["jquery"],function(e){function t(t,n){var s,o,a,r=t.nodeName.toLowerCase();return"area"===r?(s=t.parentNode,o=s.name,!(!t.href||!o||"map"!==s.nodeName.toLowerCase())&&!!(a=e("img[usemap=#"+o+"]")[0])&&i(a)):(/input|select|textarea|button|object/.test(r)?!t.disabled:"a"===r?t.href||n:n)&&i(t)}function i(t){return e.expr.filters.visible(t)&&!e(t).parents().andSelf().filter(function(){return"hidden"===e.css(this,"visibility")}).length}var n=0,s=/^ui-id-\d+$/;e.ui=e.ui||{},e.ui.version||(e.extend(e.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,i){return"number"==typeof t?this.each(function(){var n=this;setTimeout(function(){e(n).focus(),i&&i.call(n)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return t=e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(t){if(void 0!==t)return this.css("zIndex",t);if(this.length)for(var i,n,s=e(this[0]);s.length&&s[0]!==document;){if(("absolute"===(i=s.css("position"))||"relative"===i||"fixed"===i)&&(n=parseInt(s.css("zIndex"),10),!isNaN(n)&&0!==n))return n;s=s.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){s.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(i){return!!e.data(i,t)}}):function(t,i,n){return!!e.data(t,n[3])},focusable:function(i){return t(i,!isNaN(e.attr(i,"tabindex")))},tabbable:function(i){var n=e.attr(i,"tabindex"),s=isNaN(n);return(s||n>=0)&&t(i,!s)}}),e(function(){var t=document.body,i=t.appendChild(i=document.createElement("div"));i.offsetHeight,e.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),e.support.minHeight=100===i.offsetHeight,e.support.selectstart="onselectstart"in i,t.removeChild(i).style.display="none"}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(t,i){function n(t,i,n,o){return e.each(s,function(){i-=parseFloat(e.css(t,"padding"+this))||0,n&&(i-=parseFloat(e.css(t,"border"+this+"Width"))||0),o&&(i-=parseFloat(e.css(t,"margin"+this))||0)}),i}var s="Width"===i?["Left","Right"]:["Top","Bottom"],o=i.toLowerCase(),a={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+i]=function(t){return void 0===t?a["inner"+i].call(this):this.each(function(){e(this).css(o,n(this,t)+"px")})},e.fn["outer"+i]=function(t,s){return"number"!=typeof t?a["outer"+i].call(this,t):this.each(function(){e(this).css(o,n(this,t,!0,s)+"px")})}}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(i){return arguments.length?t.call(this,e.camelCase(i)):t.call(this)}}(e.fn.removeData)),function(){var t=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];e.ui.ie=!!t.length,e.ui.ie6=6===parseFloat(t[1],10)}(),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,i,n){var s,o=e.ui[t].prototype;for(s in n)o.plugins[s]=o.plugins[s]||[],o.plugins[s].push([i,n[s]])},call:function(e,t,i){var n,s=e.plugins[t];if(s&&e.element[0].parentNode&&11!==e.element[0].parentNode.nodeType)for(n=0;n<s.length;n++)e.options[s[n][0]]&&s[n][1].apply(e.element,i)}},contains:e.contains,hasScroll:function(t,i){if("hidden"===e(t).css("overflow"))return!1;var n=i&&"left"===i?"scrollLeft":"scrollTop",s=!1;return t[n]>0||(t[n]=1,s=t[n]>0,t[n]=0,s)},isOverAxis:function(e,t,i){return e>t&&e<t+i},isOver:function(t,i,n,s,o,a){return e.ui.isOverAxis(t,n,o)&&e.ui.isOverAxis(i,s,a)}}))}),define("libs/jquery/ui/jquery.ui.mouse-1.9.2",["jquery","version!libs/jquery/ui/jquery.ui.core","version!fly/libs/jquery.widget"],function(e){var t=!1;e(document).mouseup(function(e){t=!1}),e.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(i){if(!0===e.data(i.target,t.widgetName+".preventClickEvent"))return e.removeData(i.target,t.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!t){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var n=this,s=1===i.which,o=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&e(i.target).closest(this.options.cancel).length;return!(s&&!o&&this._mouseCapture(i)&&(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),0):(!0===e.data(i.target,this.widgetName+".preventClickEvent")&&e.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return n._mouseMove(e)},this._mouseUpDelegate=function(e){return n._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),t=!0,0)))}},_mouseMove:function(t){return!e.ui.ie||document.documentMode>=9||t.button?this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,t),this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted):this._mouseUp(t)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(e){return this.mouseDelayMet},_mouseStart:function(e){},_mouseDrag:function(e){},_mouseStop:function(e){},_mouseCapture:function(e){return!0}})}),define("libs/jquery/ui/jquery.ui.slider-1.9.2",["jquery","version!libs/jquery/ui/jquery.ui.core","version!fly/libs/jquery.widget","version!libs/jquery/ui/jquery.ui.mouse"],function(e,t){e.widget("ui.slider",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var t,i,n=this.options,s=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=e([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),i=n.values&&n.values.length||1,t=s.length;t<i;t++)o.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=s.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){n.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._on(this.handles,{keydown:function(t){var i,n,s,o=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(t.preventDefault(),!this._keySliding&&(this._keySliding=!0,e(t.target).addClass("ui-state-active"),!1===this._start(t,o)))return}switch(s=this.options.step,i=n=this.options.values&&this.options.values.length?this.values(o):this.value(),t.keyCode){case e.ui.keyCode.HOME:n=this._valueMin();break;case e.ui.keyCode.END:n=this._valueMax();break;case e.ui.keyCode.PAGE_UP:n=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/5);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;n=this._trimAlignValue(i+s);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;n=this._trimAlignValue(i-s)}this._slide(t,o,n)},keyup:function(t){var i=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,i),this._change(t,i),e(t.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var i,n,s,o,a,r,l,d=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:t.pageX,y:t.pageY},n=this._normValueFromMouse(i),s=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var i=Math.abs(n-d.values(t));s>i&&(s=i,o=e(this),a=t)}),!0===c.range&&this.values(1)===c.min&&(a+=1,o=e(this.handles[a])),!1!==this._start(t,a)&&(this._mouseSliding=!0,this._handleIndex=a,o.addClass("ui-state-active").focus(),r=o.offset(),l=!e(t.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:t.pageX-r.left-o.width()/2,top:t.pageY-r.top-o.height()/2-(parseInt(o.css("borderTopWidth"),10)||0)-(parseInt(o.css("borderBottomWidth"),10)||0)+(parseInt(o.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,a,n),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},i=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,i),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,i,n,s,o;return"horizontal"===this.orientation?(t=this.elementSize.width,i=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,i=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),n=i/t,n>1&&(n=1),n<0&&(n=0),"vertical"===this.orientation&&(n=1-n),s=this._valueMax()-this._valueMin(),o=this._valueMin()+n*s,this._trimAlignValue(o)},_start:function(e,t){var i={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("start",e,i)},_slide:function(e,t,i){var n,s,o;this.options.values&&this.options.values.length?(n=this.values(t?0:1),2===this.options.values.length&&!0===this.options.range&&(0===t&&i>n||1===t&&i<n)&&(i=n),i!==this.values(t)&&(s=this.values(),s[t]=i,o=this._trigger("slide",e,{handle:this.handles[t],value:i,values:s}),n=this.values(t?0:1),!1!==o&&this.values(t,i,!0))):i!==this.value()&&!1!==(o=this._trigger("slide",e,{handle:this.handles[t],value:i}))&&this.value(i)},_stop:function(e,t){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("stop",e,i)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(t),i.values=this.values()),this._trigger("change",e,i)}},value:function(e){return arguments.length?(this.options.value=this._trimAlignValue(e),this._refreshValue(),void this._change(null,0)):this._value()},values:function(t,i){var n,s,o;if(arguments.length>1)return this.options.values[t]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,t);if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();for(n=this.options.values,s=arguments[0],o=0;o<n.length;o+=1)n[o]=this._trimAlignValue(s[o]),this._change(null,o);this._refreshValue()},_setOption:function(t,i){var n,s=0;switch(e.isArray(this.options.values)&&(s=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments),t){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),n=0;n<s;n+=1)this._change(null,n);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e)},_values:function(e){var t,i,n;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t);for(i=this.options.values.slice(),n=0;n<i.length;n+=1)i[n]=this._trimAlignValue(i[n]);return i},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,i=(e-this._valueMin())%t,n=e-i;return 2*Math.abs(i)>=t&&(n+=i>0?t:-t),parseFloat(n.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,i,n,s,o,a=this.options.range,r=this.options,l=this,d=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(n){i=(l.values(n)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",e(this).stop(1,1)[d?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===n&&l.range.stop(1,1)[d?"animate":"css"]({left:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({width:i-t+"%"},{queue:!1,duration:r.animate})):(0===n&&l.range.stop(1,1)[d?"animate":"css"]({bottom:i+"%"},r.animate),1===n&&l.range[d?"animate":"css"]({height:i-t+"%"},{queue:!1,duration:r.animate}))),t=i}):(n=this.value(),s=this._valueMin(),o=this._valueMax(),i=o!==s?(n-s)/(o-s)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[d?"animate":"css"](c,r.animate),"min"===a&&"horizontal"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({width:i+"%"},r.animate),"max"===a&&"horizontal"===this.orientation&&this.range[d?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===a&&"vertical"===this.orientation&&this.range.stop(1,1)[d?"animate":"css"]({height:i+"%"},r.animate),"max"===a&&"vertical"===this.orientation&&this.range[d?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}})}),define("components/video-controls",["jquery","version!fly/managers/debug","managers/edition","managers/components","managers/device","managers/client-storage","translations/video","managers/page-vars","components/autoplay-controls","version!libs/jquery/ui/jquery.ui.slider","version!fly/components/base"],function(e,t,i,n,s,o,a,r){t=t.init("videoControls"),r.services.video.enabled&&e.widget("tr.videoControls",e.fly.base,{options:{overlayClass:"overlays",controls:["playPause","playlist","progress","time","autoplay","volume","share","fullscreen"],fadeDelay:2e3,usePlayOverlay:!1,showAdCountdown:"mobile"!==r.tracking.data.deviceType},initialized:!1,$playerComponent:null,$playerContainer:null,$overlays:null,player:null,isAd:null,$currentOverlay:null,$controls:function(e){return this.$element.data(e)},isScrubbing:!1,isPaused:null,mutedAutoplay:!1,$unmuteOverlay:null,resumePlaying:!0,isPopped:!1,volumeLevel:.75,volumeCookie:"pVol",playerSize:{},fadeTimer:null,mouseIsOver:!1,controlsDisabled:!1,fullScreenEnabled:document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled||null!==s.isIPad(),testGroup:null,testName:null,requestingPlaylist:!1,_create:function(){this._setup(),t.log("videoControls _create",this.$element.parent()),t.log("Controls",this.options.controls);var i=this;if(this.$element.parent().on("onVideoPlayerReady",function(n,s){t.log("onVideoPlayerReady",s),i.init(s.player,s.element),
i.$playerComponent.find("video").on("webkitbeginfullscreen",e.proxy(i.fullScreenHandler,i)),i.$playerComponent.find("video").on("webkitendfullscreen",e.proxy(i.fullScreenHandler,i))}),this.$element.parent().hasClass("playerLoaded")){t.log("player is already loaded");var n=this.$element.parent().find('.videoPlayer[data-component="trVideo"]').first();t.log("player is already loaded",n,n.trVideo("getPlayerInfo")),this.$element.parent().trigger("onVideoPlayerReady",n.trVideo("getPlayerInfo"))}this.testGroup=r.tracking.data.testGroup,this.testName=r.tracking.data.testName;var s=e.inArray("playlist",this.options.controls);"mobile"===r.tracking.data.deviceType&&s>=0&&this.options.controls.splice(s,1);var o=e.inArray("autoplay",this.options.controls);"article"!==r.tracking.data.pageType&&"blog_post"!==r.tracking.data.pageType&&"video_share"!==r.tracking.data.pageType&&o>=0&&this.options.controls.splice(o,1)},init:function(e,i){t.log("init",this.initialized,e,i),this.initialized||(this.initialized=!0,this.player=e,this.$playerComponent=i,this.$playerContainer=i.parent(),this._initializeAutoplaySound(),this._createOverlayContainer(),this._createListeners(),this.playerSize={width:this.$playerComponent.width(),height:this.$playerComponent.height()},this._createControls(),this.showControls())},_initializeAutoplaySound:function(){var i=null===o.read("autoplayEnabled")?"on":o.read("autoplayEnabled");-1===e.inArray("autoplay",this.options.controls)&&(i="on"),"mobile"===r.tracking.data.deviceType&&(i="off"),this.mutedAutoplay="on"===i&&this.player._isMutedAutoplay,t.log("mutedAutoplay",this.mutedAutoplay)},_createListeners:function(){t.log("_createListeners",this.$playerComponent),this.$playerComponent.on("onContentStart",e.proxy(this.onContentStart,this)),this.$playerComponent.on("onContentEnd",e.proxy(this.onContentEnd,this)),this.$playerComponent.on("onAdPodStart",e.proxy(this.onAdPodStart,this)),this.$playerComponent.on("onAdStart",e.proxy(this.onAdStart,this)),this.$playerComponent.on("onAdEnd",e.proxy(this.onAdEnd,this)),this.$playerComponent.on("onResourceStart",e.proxy(this.onResourceStart,this)),this.$playerComponent.on("onResourceEnd",e.proxy(this.onResourceEnd,this)),this.$playerComponent.on("onStateChange",e.proxy(this.onStateChange,this)),this.$playerComponent.on("onVideoProgress",e.proxy(this.onVideoProgress,this)),this.$playerComponent.on("onAdVideoClick",e.proxy(this.onAdVideoClick,this)),this.$playerComponent.on("onAdResourcesInfo",e.proxy(this.onAdResourcesInfo,this)),this.$playerComponent.find("video").on("webkitbeginfullscreen",e.proxy(this.fullScreenHandler,this)),this.$playerComponent.find("video").on("webkitendfullscreen",e.proxy(this.fullScreenHandler,this)),this.$videoPromo=this.$playerComponent.parent().find(".videoPromo");var i=this;this.$mouseListener.on("mousemove",function(){i.showControls()}),this.$element.on("mouseenter",function(){window.clearTimeout(i.fadeTimer)}),this.$element.on("mouseleave",function(){i.showControls()}),e(window).on("resize",function(){t.log("window resize"),i.fullScreenElement()?i.fullScreenHandler():i.playerSize.width!=i.$playerComponent.width()&&i.resizeControls(),t.log("/window resize")})},controlsVisible:!1,showControls:function(){t.log("showControls",this.isPaused),this.$mouseListener.hide(),!0!==this.controlsDisabled&&(this.$element.addClass("show"),this.controlsVisible=!0,window.clearTimeout(this.fadeTimer),this.fadeTimer=window.setTimeout(e.proxy(this.hideControls,this),this.options.fadeDelay))},hideControls:function(){t.log("hideControls",this.mouseIsOver,this.$currentOverlay,this.isPaused),null===this.$currentOverlay&&!1===this.isPaused&&(this.controlsVisible=!1,this.$mouseListener.show(),this.$element.removeClass("show"),window.clearTimeout(this.fadeTimer))},disableControls:function(e){t.log("disableControls",e),this.controlsDisabled=e,this.controlsDisabled?this.hideControls():this.$mouseListener.show()},onResourceStart:function(i,n){t.log("onResourceStart: ",i,n),this.playbackStarted||this.onStateChange(null,{payload:{newState:1}}),this.$overlays.children().each(function(){e(this).hide()}),this.$currentOverlay=null,this.$controls("progress").slider("option","max",this.$playerComponent.trVideo("getVideoObj").duration)},onResourceEnd:function(e,i){t.log("onResourceEnd: ",i),this.$controls("time")&&this.$controls("time").text("0:00 / 0:00"),this.$controls("progress")&&this.$controls("progress").slider("value",0),this.resumePlaying=!0},onContentStart:function(e,i){if(t.log("onContentStart: ",i),this.isAd=!1,this.disableControls(!1),this.$controls("progress").slider("enable"),this.$element.parent().removeClass("ad"),this.options.showAdCountdown&&this.$overlays.find(".adCountdown").hide(),this.resizeControls(),"article"===r.tracking.data.pageType){var n=this.$overlays.find(".playlist.overlay");0===n.find("[data-item=viewport]").length&&this.initPlaylist(n.find(".playScroll"))}},onContentEnd:function(e,i){t.log("onContentEnd: ",i)},onAdPodStart:function(e){t.log("onAdPodStart: ",e),this.mutedAutoplay&&(this.player.mute(),this.$unmuteOverlay.addClass("visible"))},onAdStart:function(e,i){t.log("onAdStart: ",i),this.isAd=!0,this.$element.parent().addClass("ad"),this.$controls("progress").slider("disable"),!this.controlsDisabled&&this.options.showAdCountdown&&this.$overlays.find(".adCountdown").show(),this.showControls(),this.resizeControls()},onAdEnd:function(e,i){t.log("onAdEnd: ",i),this.$element.parent().removeClass("ad"),this.resizeControls(),this.options.showAdCountdown&&this.$overlays.find(".adCountdown").hide(),this.videoProgressed=!1,this.$controls("share").addClass("ui-state-disabled")},onStateChange:function(e,i){switch(t.log("onStateChange: ",i),parseInt(i.payload.newState,10)){case-1:this.$playerContainer.addClass("isPaused");break;case 0:this.$controls("time").text(""),this.$playerContainer.addClass("isPaused");break;case 1:this.isScrubbing=!1,this.isPaused=!1,this.$playerContainer.addClass("isPlaying").removeClass("isPaused"),!1===this.resumePlaying?(t.log("onStateChange play - resume from scrub"),this.pause(),this.updateTimeDisplay()):(t.log("onStateChange play"),this.resumePlaying=!0,this.$controls("play").hide(),this.$controls("pause").show()),this.$playerContainer.removeClass("isPaused").addClass("isPlaying");break;case 2:t.log("onStateChange pause"),this.isPaused=!0,this.$playerContainer.addClass("isPaused").removeClass("isPlaying"),this.$controls("play").show(),this.$controls("pause").hide(),this.$mouseListener.show();break;case 3:t.log("onStateChange buffering")}},videoProgressed:!1,onVideoProgress:function(e,t){var i=t.payload.currentTime;this.isPaused||(this.updateTimeDisplay(t),this.$controls("progress")&&(this.isAd||this.isScrubbing||this.$controls("progress").slider("value",i)),this.videoProgressed||this.$controls("share").removeClass("ui-state-disabled"),this.videoProgressed=!0)},updateTimeDisplay:function(e){var t,i;if(e.hasOwnProperty("payload")?(t=e.payload.currentTime,i=e.payload.duration):(t=e,i=this.$playerComponent.trVideo("getVideoObj").duration),this.$controls("time")&&(this.$controls("time").text(this.formatTime(t)+" / "+this.formatTime(i)),this.isAd&&this.options.showAdCountdown)){var n=Math.round(i-t),s=n<=0?a.resumeShortly:a.resume+n+a.seconds;this.$overlays.find(".adCountdown .msg").text(s)}},onAdVideoClick:function(){t.log("onAdVideoClick"),this.disableControls(!1),this.pause(),this.showControls()},onAdResourcesInfo:function(e,i){t.log("onAdResourcesInfo: ",i);try{"vpaidAd"==i[0].resourceType&&(this.disableControls(!1),this.options.showAdCountdown&&this.$overlays.find(".adCountdown").hide())}catch(e){this.disableControls(!1)}},_createOverlayContainer:function(){var i=this;if(null!==this.$overlays)return void t.log("$overlays: created");this.$element.before('<div class="'+this.options.overlayClass+'"></div>'),this.$overlays=this.$element.parent().find("."+this.options.overlayClass),this.$overlays.css({"pointer-events":"none"}),this.$overlays.append('<div class="mouseListener"></div>'),this.$mouseListener=this.$overlays.find(".mouseListener"),this.$mouseListener.css({width:"100%",height:"100%","pointer-events":"auto",background:"#000",opacity:"0",filter:"alpha(opacity = 0)"}),this.mutedAutoplay&&(this.$unmuteOverlay=e('<div class="mute muted">'+this.useSVG("speaker-on")+" Play Sound</div>"),this.$overlays.append(this.$unmuteOverlay),this.$element.data("mute",this.$unmuteOverlay),this.$unmuteOverlay.on("click",function(){i.mute()})),this.options.showAdCountdown&&this.$overlays.append('<div class="adCountdown"><span class="msg"></span></div>')},_createControls:function(){var i=this,n=i.options;t.log("_createControls:",this.player.vidContId),this.$element.append("<ul class='controlsList'></ul>");var o=e("ul",this.$element);t.log("_createControls:",o),e.each(n.controls,function(n,l){if("fullscreen"==l&&!0!==i.fullScreenEnabled)return!0;if("volume"==l&&!s.isDesktopUserAgent())return!0;o.append('<li class="'+l+'">'+l+"</li>");var d=e("."+l,o);switch(i.$element.data(l,d),l){case"playPause":d.html('<div class="play"></div>'),i.$element.data("play",e(".play",o)),d.append('<div class="pause"></div>'),d.append('<div class="divider"></div>'),i.$element.data("pause",e(".pause",o)),i.$controls("pause").hide(),i.$controls("play").click(e.proxy(i.unpause,i)),i.$controls("pause").click(e.proxy(i.pause,i)),i.options.usePlayOverlay&&(i.$overlays.append('<div class="isPausedOverlay overlay"><svg class="playOverlay"><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#playOverlay"></use></svg></div>'),i.$playerContainer.find(".isPausedOverlay").on("click",function(){i.unpause()}));break;case"playlist":i.$overlays.append('<div class="playlist overlay"><div class="playScroll"><div data-item="loadingCircle" class="loading-circle"></div></div></div>'),d.click(e.proxy(i.togglePlaylist,i));break;case"autoplay":var c=window.uvpjs.mediaCapabilities.systemInfo;t.log("Autoplay media media capabilities",c),s.isDesktopUserAgent()&&c.supportsMutedAutoplay&&"mobile"!==r.tracking.data.deviceType?(d.html('<div class="autoplayControls" data-component="autoplayControls"><span class="label">'+a.autoplay+':</span> <span class="autoplayOff"></span><span class="autoplayOn"></span></div>'),d.find(".autoplayOff").text(a.on),d.find(".autoplayOn").text(a.off),d.find(".autoplayControls").autoplayControls({clickElement:".playOverlay",initializePlayback:!1}),d.show()):d.remove();break;case"time":d.text("0:00");break;case"progress":d.html('<div class="progress-slider"></div><div class="chapters"></div>'),i.$element.data("progressContainer",d),i.$element.data("progress",d.find(".progress-slider")),i.$controls("progress").slider({range:"min",animate:0,step:.01,max:i.$playerComponent.trVideo("getVideoObj").duration,start:function(e,n){i.isScrubbing=!0,t.log("scrub start")},stop:function(e,n){!0===i.isPaused?i.resumePlaying=!1:!1===i.isPaused&&(i.resumePlaying=!0),t.log("seekTo:",n.value),i.player.seekTo(n.value),window.setTimeout(function(){i.isScrubbing=!1},2e3),t.log("scrub end")}});break;case"volume":e.cookie(i.volumeCookie)&&(i.volumeLevel=e.cookie(i.volumeCookie)),t.log("initial volume",i.volumeLevel),d.html('<div class="mute"></div>'),i.$element.data("mute",d.find(".mute")),t.log("mute",i.$controls("mute")),i.$controls("mute").click(e.proxy(i.mute,i)),d.append('<div class="volume-slider"></div>'),i.$element.data("volume-slider",d.find(".volume-slider")),i.mutedAutoplay&&i.$controls("mute").addClass("off"),i.$controls("volume-slider").slider({orientation:"vertical",range:"min",max:1,step:.01,value:i.volumeLevel,slide:function(n,s){t.log(s.value),i.player.setVolume(s.value),i.player.unMute(),i.volumeLevel=s.value,e.cookie(i.volumeCookie,s.value),s.value>0?(i.$controls("mute").removeClass("off muted"),i.$unmuteOverlay&&i.$unmuteOverlay.removeClass("muted")):0==s.value&&i.mute()}}),d.hover(e.proxy(i.volumeOver,i),e.proxy(i.volumeOff,i));break;case"share":i.$overlays.append('<div class="share overlay"></div>'),d.click(e.proxy(i.toggleShareOptions,i));break;case"fullscreen":d.click(e.proxy(i.toggleFullscreen,i)),document.addEventListener("fullscreenchange",e.proxy(i.fullScreenHandler,i)),document.addEventListener("webkitfullscreenchange",e.proxy(i.fullScreenHandler,i)),document.addEventListener("mozfullscreenchange",e.proxy(i.fullScreenHandler,i)),document.addEventListener("MSFullscreenChange",e.proxy(i.fullScreenHandler,i));break;case"vertPromo":d.remove(),i.$overlays.append(e("div.vertPromo")),e("div.vertPromo").addClass("overlay"),e("div.vertPromo div").on("click",function(){e(this).parent().fadeOut()})}}),this.resizeControls(),t.log("_createControls complete",this.$element),t.log("_createControls complete",this.$controls)},pause:function(){t.log("pause",this.player),this.player.pauseVideo(),this.$controls("play").show(),this.$controls("pause").hide()},unpause:function(){t.log("unpause",this.player),this.$overlays.find(".share.overlay").hide(),this.resumePlaying=!0,this.$videoPromo.is(":visible")?this.$videoPromo.trigger("click"):this.player.playVideo(),this.$controls("play").hide(),this.$controls("pause").show()},mute:function(){var e=this;this.player.getPlayerMuted()?(this.player.unMute(),this.$controls("volume-slider").slider("value",this.volumeLevel),this.$controls("mute").removeClass("off"),e.$unmuteOverlay&&this.$unmuteOverlay.removeClass("muted visible"),this.mutedAutoplay=!1,omnitureMgr.trackEvent("trackClick",{clickGenericText:"video-player|sound|on"})):(this.player.mute(),this.$controls("volume-slider").slider("value",0),this.$controls("mute").addClass("off"),this.mutedAutoplay=!0,omnitureMgr.trackEvent("trackClick",{clickGenericText:"video-player|sound|off"})),this.$element.trigger("mute",{mutedAutoplay:e.mutedAutoplay})},volumeOver:function(){this.$controls("volume-slider").show()},volumeOff:function(){this.$controls("volume-slider").hide()},toggleFullscreen:function(){this.fullScreenElement()?(t.log("toggleFullscreen: exitFullScreen"),this.exitFullScreen()):(t.log("toggleFullscreen: enterFullScreen"),this.enterFullScreen())},enterFullScreen:function(){if(t.log("enterFullScreen"),t.log("enterFullScreen",this.fullScreenElement()),!this.fullScreenElement())if(this.returnToSize={width:this.$playerComponent.width(),height:this.$playerComponent.height()},s.isIPad())t.log("ipad fullscreen"),this.$playerComponent.find("video").each(function(){t.log("video",this),this.webkitEnterFullScreen()}),this.$playerComponent.find("video").attr("controls",!0);else{var e=this.$playerContainer[0],i=e.requestFullScreen||e.webkitRequestFullScreen||e.mozRequestFullScreen||e.msRequestFullscreen;i.call(e)}},exitFullScreen:function(){this.fullScreenElement()&&(t.log("toggleFullscreen: exitFullscreen",this.playerSize),s.isIPad()?(t.log("ipad exit fullscreen"),this.$playerComponent.find("video").attr("controls",!1)):document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen(),this.showControls())},togglePlaylist:function(){var t=this.$overlays.find(".playlist.overlay");t.is(":visible")?(!0===this.isPaused&&this.resumePlaying&&this.unpause(),t.hide(),this.$currentOverlay=null):(!0===this.isPaused?this.resumePlaying=!1:!1===this.isPaused&&(this.resumePlaying=!0,this.pause()),this.$overlays.children().each(function(){e(this).hide()}),0===t.find("[data-item=viewport]").length&&this.initPlaylist(t.find(".playScroll")),t.show(),this.$currentOverlay=t)},initPlaylist:function(i){if(this.requestingPlaylist)return t.log("playlist already requested"),!1;t.log("initPlaylist");var s=this,o=this.$playerComponent.trVideo("getVideoObj").slug,a="/videos/related-videos-xhr/"+o+"/";e.ajax({url:a,type:"GET",dataType:"json",success:function(o){t.log("initPlaylist: content received"),i.html(o.html),n.process(i);var a=i.find("[data-item=viewport]"),r=i.find("[data-item=slide]"),l=r.outerWidth(!0),d=r.parent(),c=i.find(".prev");c.addClass("disabled");var u=i.find(".next"),h=l-l*r.length;i.find("[data-component=videoPlaylistConnector]").on("playlistClick",e.proxy(function(){this.togglePlaylist()},s)),c.on("click",function(){t.log("prev",e(this).parent().find(".next")),e(this).parent().find(".next").removeClass("disabled");var n=Math.floor(a.width()/l)*l,s=parseInt(d.css("margin-left"),10)+n;i.removeClass("right"),s>0&&(s=0),0===s?e(this).addClass("disabled"):e(this).removeClass("disabled"),s<=0&&d.css("margin-left",s+"px"),t.log("prev",s,0)}),u.on("click",function(){t.log("next",e(this).parent()),e(this).parent().find(".prev").removeClass("disabled");var i=Math.floor(a.width()/l)*l,n=parseInt(d.css("margin-left"),10)-i;n<h&&(n=h),n==h?e(this).addClass("disabled"):e(this).removeClass("disabled"),n>=h&&d.css("margin-left",n+"px"),t.log("next",n,h)})},error:function(){t.log("Error fetching playlist")}})},toggleShareOptions:function(){t.log("toggleShareOptions");var i=this.$overlays.find(".share.overlay");if(i.is(":visible"))!0===this.isPaused&&this.resumePlaying&&this.unpause(),i.hide(),this.$currentOverlay=null;else if(!0===this.isPaused?this.resumePlaying=!1:!1===this.isPaused&&(this.resumePlaying=!0,this.pause()),this.$overlays.children().each(function(){e(this).hide()}),i.show(),this.$currentOverlay=i,0===i.find("[data-id="+this.$playerComponent.trVideo("getVideoObj").id+"]").length){t.log("load share card"),i.empty(),i.append('<div class="loading-circle"></div>');var s="/videos/share-links/"+this.$playerComponent.trVideo("getVideoObj").slug+"/";e.get(s,function(e){t.log("share card",e),i.html(e),n.process(i),i.find("textarea").click(function(){this.focus(),this.select()})}.bind(this),"html")}else t.log("share options already loaded")},fullScreenHandler:function(e){if(t.log("fullScreenHandler"),t.log("Fullscreen mode changed",this.fullScreenElement()),this.fullScreenElement()?(this.$playerContainer.hasClass("popOut")&&(this.isPopped=!0,this.$playerContainer.removeClass("popOut")),this.$playerContainer.addClass("fullScreenEle")):this.$playerContainer.removeClass("fullScreenEle"),this.isPopped&&(this.isPopped=!1,this.$playerContainer.addClass("popOut")),s.isIPad())return t.log("iPad doesnt need fullscreen handler"),void(void 0===this.fullScreenElement()&&this.$playerComponent.find("video").attr("controls",null));this.fullScreenElement()?(t.log("Enter fullscreen to",window.innerWidth,window.innerHeight),this.$playerContainer.css({width:window.innerWidth,height:window.innerHeight}),this.$element.addClass("isFullscreen"),s.isAndroid()&&this.$element.addClass("android")):(t.log("Exit fullscreen"),this.$playerContainer.attr("style",""),this.$element.removeClass("isFullscreen"),s.isAndroid()&&this.$element.removeClass("android")),this.resizeControls(),t.log("/fullScreenHandler")},formatTime:function(e){e=Math.round(e);var t=Math.floor(e/3600),i=Math.floor((e-3600*t)/60),n=e-3600*t-60*i,s="";return s+=t>0?t+":":"",s+=i>0&&i<10?"0"+i:i,s+=":",s+=n<10?"0"+n:n},resizeControls:function(){t.log("resizeControls"),this.playerSize={width:this.$playerComponent.width(),height:this.$playerComponent.height()},this.player.setSize(this.playerSize.width,this.playerSize.height),t.log("resizeControls",this.playerSize.width,this.playerSize.height),this.$element.css("margin-left","20px"),this.$element.css("width",this.playerSize.width-40+"px");var i=this.$element.find("ul"),n=0;i.children().each(function(){e(this).hasClass("progress")?n+=e(this).outerWidth(!0)-e(this).width():"none"!=e(this).css("display")&&(n+=e(this).outerWidth(!0))}),this.$controls("progress").parent().css("width",Math.floor(this.$element.width()-n-10)),this.playerSize.width<=460?this.$overlays.addClass("min"):this.$overlays.removeClass("min"),t.log("/resizeControls")},fullScreenElement:function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.msFullscreenElement},useSVG:function(e){return'<svg class="'+e+'"><use xlink:href="#'+e+'"/></svg>'}})}),define("libs/jquery/ui/jquery.ui.position-1.9.2",["jquery","version!libs/jquery/ui/jquery.ui.core"],function(e,t){function i(e,t,i){return[parseInt(e[0],10)*(h.test(e[0])?t/100:1),parseInt(e[1],10)*(h.test(e[1])?i/100:1)]}function n(t,i){return parseInt(e.css(t,i),10)||0}e.ui=e.ui||{};var s,o=Math.max,a=Math.abs,r=Math.round,l=/left|center|right/,d=/top|center|bottom/,c=/[\+\-]\d+%?/,u=/^\w+/,h=/%$/,p=e.fn.position;e.position={scrollbarWidth:function(){if(s!==t)return s;var i,n,o=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),a=o.children()[0];return e("body").append(o),i=a.offsetWidth,o.css("overflow","scroll"),n=a.offsetWidth,i===n&&(n=o[0].clientWidth),o.remove(),s=i-n},getScrollInfo:function(t){var i=t.isWindow?"":t.element.css("overflow-x"),n=t.isWindow?"":t.element.css("overflow-y"),s="scroll"===i||"auto"===i&&t.width<t.element[0].scrollWidth,o="scroll"===n||"auto"===n&&t.height<t.element[0].scrollHeight;return{width:s?e.position.scrollbarWidth():0,height:o?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var i=e(t||window),n=e.isWindow(i[0]);return{element:i,isWindow:n,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:n?i.width():i.outerWidth(),height:n?i.height():i.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return p.apply(this,arguments);t=e.extend({},t);var s,h,m,f,g,v=e(t.of),y=e.position.getWithinInfo(t.within),b=e.position.getScrollInfo(y),w=v[0],_=(t.collision||"flip").split(" "),k={};return 9===w.nodeType?(h=v.width(),m=v.height(),f={top:0,left:0}):e.isWindow(w)?(h=v.width(),m=v.height(),f={top:v.scrollTop(),left:v.scrollLeft()}):w.preventDefault?(t.at="left top",h=m=0,f={top:w.pageY,left:w.pageX}):(h=v.outerWidth(),m=v.outerHeight(),f=v.offset()),g=e.extend({},f),e.each(["my","at"],function(){var e,i,n=(t[this]||"").split(" ");1===n.length&&(n=l.test(n[0])?n.concat(["center"]):d.test(n[0])?["center"].concat(n):["center","center"]),n[0]=l.test(n[0])?n[0]:"center",n[1]=d.test(n[1])?n[1]:"center",e=c.exec(n[0]),i=c.exec(n[1]),k[this]=[e?e[0]:0,i?i[0]:0],t[this]=[u.exec(n[0])[0],u.exec(n[1])[0]]}),1===_.length&&(_[1]=_[0]),"right"===t.at[0]?g.left+=h:"center"===t.at[0]&&(g.left+=h/2),"bottom"===t.at[1]?g.top+=m:"center"===t.at[1]&&(g.top+=m/2),s=i(k.at,h,m),g.left+=s[0],g.top+=s[1],this.each(function(){var l,d,c=e(this),u=c.outerWidth(),p=c.outerHeight(),w=n(this,"marginLeft"),C=n(this,"marginTop"),$=u+w+n(this,"marginRight")+b.width,S=p+C+n(this,"marginBottom")+b.height,x=e.extend({},g),T=i(k.my,c.outerWidth(),c.outerHeight());"right"===t.my[0]?x.left-=u:"center"===t.my[0]&&(x.left-=u/2),"bottom"===t.my[1]?x.top-=p:"center"===t.my[1]&&(x.top-=p/2),x.left+=T[0],x.top+=T[1],e.support.offsetFractions||(x.left=r(x.left),x.top=r(x.top)),l={marginLeft:w,marginTop:C},e.each(["left","top"],function(i,n){e.ui.position[_[i]]&&e.ui.position[_[i]][n](x,{targetWidth:h,targetHeight:m,elemWidth:u,elemHeight:p,collisionPosition:l,collisionWidth:$,collisionHeight:S,offset:[s[0]+T[0],s[1]+T[1]],my:t.my,at:t.at,within:y,elem:c})}),e.fn.bgiframe&&c.bgiframe(),t.using&&(d=function(e){var i=f.left-x.left,n=i+h-u,s=f.top-x.top,r=s+m-p,l={target:{element:v,left:f.left,top:f.top,width:h,height:m},element:{element:c,left:x.left,top:x.top,width:u,height:p},horizontal:n<0?"left":i>0?"right":"center",vertical:r<0?"top":s>0?"bottom":"middle"};h<u&&a(i+n)<h&&(l.horizontal="center"),m<p&&a(s+r)<m&&(l.vertical="middle"),o(a(i),a(n))>o(a(s),a(r))?l.important="horizontal":l.important="vertical",t.using.call(this,e,l)}),c.offset(e.extend(x,{using:d}))})},e.ui.position={fit:{left:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollLeft:n.offset.left,a=n.width,r=e.left-t.collisionPosition.marginLeft,l=s-r,d=r+t.collisionWidth-a-s;t.collisionWidth>a?l>0&&d<=0?(i=e.left+l+t.collisionWidth-a-s,e.left+=l-i):e.left=d>0&&l<=0?s:l>d?s+a-t.collisionWidth:s:l>0?e.left+=l:d>0?e.left-=d:e.left=o(e.left-r,e.left)},top:function(e,t){var i,n=t.within,s=n.isWindow?n.scrollTop:n.offset.top,a=t.within.height,r=e.top-t.collisionPosition.marginTop,l=s-r,d=r+t.collisionHeight-a-s;t.collisionHeight>a?l>0&&d<=0?(i=e.top+l+t.collisionHeight-a-s,e.top+=l-i):e.top=d>0&&l<=0?s:l>d?s+a-t.collisionHeight:s:l>0?e.top+=l:d>0?e.top-=d:e.top=o(e.top-r,e.top)}},flip:{left:function(e,t){var i,n,s=t.within,o=s.offset.left+s.scrollLeft,r=s.width,l=s.isWindow?s.scrollLeft:s.offset.left,d=e.left-t.collisionPosition.marginLeft,c=d-l,u=d+t.collisionWidth-r-l,h="left"===t.my[0]?-t.elemWidth:"right"===t.my[0]?t.elemWidth:0,p="left"===t.at[0]?t.targetWidth:"right"===t.at[0]?-t.targetWidth:0,m=-2*t.offset[0];c<0?((i=e.left+h+p+m+t.collisionWidth-r-o)<0||i<a(c))&&(e.left+=h+p+m):u>0&&((n=e.left-t.collisionPosition.marginLeft+h+p+m-l)>0||a(n)<u)&&(e.left+=h+p+m)},top:function(e,t){var i,n,s=t.within,o=s.offset.top+s.scrollTop,r=s.height,l=s.isWindow?s.scrollTop:s.offset.top,d=e.top-t.collisionPosition.marginTop,c=d-l,u=d+t.collisionHeight-r-l,h="top"===t.my[1],p=h?-t.elemHeight:"bottom"===t.my[1]?t.elemHeight:0,m="top"===t.at[1]?t.targetHeight:"bottom"===t.at[1]?-t.targetHeight:0,f=-2*t.offset[1];c<0?(n=e.top+p+m+f+t.collisionHeight-r-o,e.top+p+m+f>c&&(n<0||n<a(c))&&(e.top+=p+m+f)):u>0&&(i=e.top-t.collisionPosition.marginTop+p+m+f-l,e.top+p+m+f>u&&(i>0||a(i)<u)&&(e.top+=p+m+f))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,i,n,s,o,a=document.getElementsByTagName("body")[0],r=document.createElement("div");t=document.createElement(a?"div":"body"),n={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},a&&e.extend(n,{position:"absolute",left:"-1000px",top:"-1000px"});for(o in n)t.style[o]=n[o];t.appendChild(r),i=a||document.documentElement,i.insertBefore(t,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",s=e(r).offset().left,e.support.offsetFractions=s>10&&s<11,t.innerHTML="",i.removeChild(t)}(),!1!==e.uiBackCompat&&function(e){var i=e.fn.position;e.fn.position=function(n){if(!n||!n.offset)return i.call(this,n);var s=n.offset.split(" "),o=n.at.split(" ");return 1===s.length&&(s[1]=s[0]),/^\d/.test(s[0])&&(s[0]="+"+s[0]),/^\d/.test(s[1])&&(s[1]="+"+s[1]),1===o.length&&(/left|center|right/.test(o[0])?o[1]="center":(o[1]=o[0],o[0]="center")),i.call(this,e.extend(n,{at:o[0]+s[0]+" "+o[1]+s[1],offset:t}))}}(jQuery)}),define("libs/jquery/ui/jquery.ui.draggable-1.9.2",["jquery","version!libs/jquery/ui/jquery.ui.core","version!fly/libs/jquery.widget","version!libs/jquery/ui/jquery.ui.mouse"],function(e){e.widget("ui.draggable",e.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var i=this.options;return!(this.helper||i.disabled||e(t.target).is(".ui-resizable-handle")||(this.handle=this._getHandle(t),!this.handle||(e(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){e('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),0)))},_mouseStart:function(t){var i=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",t)?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!i.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,i){if(this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),!i){var n=this._uiHash();if(!1===this._trigger("drag",t,n))return this._mouseUp({}),!1;this.position=n.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var i=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(i=e.ui.ddmanager.drop(this,t)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var n=this.element[0],s=!1;n&&(n=n.parentNode);)n==document&&(s=!0);if(!s&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var o=this;e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==o._trigger("stop",t)&&o._clear()})}else!1!==this._trigger("stop",t)&&this._clear();return!1},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var i=!this.options.handle||!e(this.options.handle,this.element).length;return e(this.options.handle,this.element).find("*").andSelf().each(function(){this==t.target&&(i=!0)}),i},_createHelper:function(t){var i=this.options,n=e.isFunction(i.helper)?e(i.helper.apply(this.element[0],[t])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return n.parents("body").length||n.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),n[0]==this.element[0]||/(fixed|absolute)/.test(n.css("position"))||n.css("position","absolute"),n},_adjustOffsetFromHelper:function(t){"string"==typeof t&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&e.ui.ie)&&(t={top:0,left:0}),{
top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t=this.options;if("parent"==t.containment&&(t.containment=this.helper[0].parentNode),"document"!=t.containment&&"window"!=t.containment||(this.containment=["document"==t.containment?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==t.containment?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==t.containment?0:e(window).scrollLeft())+e("document"==t.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==t.containment?0:e(window).scrollTop())+(e("document"==t.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(t.containment)||t.containment.constructor==Array)t.containment.constructor==Array&&(this.containment=t.containment);else{var i=e(t.containment),n=i[0];if(!n)return;var s=(i.offset(),"hidden"!=e(n).css("overflow"));this.containment=[(parseInt(e(n).css("borderLeftWidth"),10)||0)+(parseInt(e(n).css("paddingLeft"),10)||0),(parseInt(e(n).css("borderTopWidth"),10)||0)+(parseInt(e(n).css("paddingTop"),10)||0),(s?Math.max(n.scrollWidth,n.offsetWidth):n.offsetWidth)-(parseInt(e(n).css("borderLeftWidth"),10)||0)-(parseInt(e(n).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(s?Math.max(n.scrollHeight,n.offsetHeight):n.offsetHeight)-(parseInt(e(n).css("borderTopWidth"),10)||0)-(parseInt(e(n).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(t,i){i||(i=this.position);var n="absolute"==t?1:-1,s=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),o=/(html|body)/i.test(s[0].tagName);return{top:i.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():o?0:s.scrollTop())*n,left:i.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():o?0:s.scrollLeft())*n}},_generatePosition:function(t){var i=this.options,n="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(n[0].tagName),o=t.pageX,a=t.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();r=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else r=this.containment;t.pageX-this.offset.click.left<r[0]&&(o=r[0]+this.offset.click.left),t.pageY-this.offset.click.top<r[1]&&(a=r[1]+this.offset.click.top),t.pageX-this.offset.click.left>r[2]&&(o=r[2]+this.offset.click.left),t.pageY-this.offset.click.top>r[3]&&(a=r[3]+this.offset.click.top)}if(i.grid){var d=i.grid[1]?this.originalPageY+Math.round((a-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;a=r&&(d-this.offset.click.top<r[1]||d-this.offset.click.top>r[3])?d-this.offset.click.top<r[1]?d+i.grid[1]:d-i.grid[1]:d;var c=i.grid[0]?this.originalPageX+Math.round((o-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;o=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():s?0:n.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():s?0:n.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,i,n){return n=n||this._uiHash(),e.ui.plugin.call(this,t,[i,n]),"drag"==t&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,i,n)},plugins:{},_uiHash:function(e){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,i){var n=e(this).data("draggable"),s=n.options,o=e.extend({},i,{item:n.element});n.sortables=[],e(s.connectToSortable).each(function(){var i=e.data(this,"sortable");i&&!i.options.disabled&&(n.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",t,o))})},stop:function(t,i){var n=e(this).data("draggable"),s=e.extend({},i,{item:n.element});e.each(n.sortables,function(){this.instance.isOver?(this.instance.isOver=0,n.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,"original"==n.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,s))})},drag:function(t,i){var n=e(this).data("draggable"),s=this;e.each(n.sortables,function(o){var a=!1,r=this;this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,e.each(n.sortables,function(){return this.instance.positionAbs=n.positionAbs,this.instance.helperProportions=n.helperProportions,this.instance.offset.click=n.offset.click,this!=r&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(r.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(s).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=n.offset.click.top,this.instance.offset.click.left=n.offset.click.left,this.instance.offset.parent.left-=n.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=n.offset.parent.top-this.instance.offset.parent.top,n._trigger("toSortable",t),n.dropped=this.instance.element,n.currentItem=n.element,this.instance.fromOutside=n),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),n._trigger("fromSortable",t),n.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(t,i){var n=e("body"),s=e(this).data("draggable").options;n.css("cursor")&&(s._cursor=n.css("cursor")),n.css("cursor",s.cursor)},stop:function(t,i){var n=e(this).data("draggable").options;n._cursor&&e("body").css("cursor",n._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("opacity")&&(s._opacity=n.css("opacity")),n.css("opacity",s.opacity)},stop:function(t,i){var n=e(this).data("draggable").options;n._opacity&&e(i.helper).css("opacity",n._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(t,i){var n=e(this).data("draggable");n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName&&(n.overflowOffset=n.scrollParent.offset())},drag:function(t,i){var n=e(this).data("draggable"),s=n.options,o=!1;n.scrollParent[0]!=document&&"HTML"!=n.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<s.scrollSensitivity?n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop+s.scrollSpeed:t.pageY-n.overflowOffset.top<s.scrollSensitivity&&(n.scrollParent[0].scrollTop=o=n.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<s.scrollSensitivity?n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft+s.scrollSpeed:t.pageX-n.overflowOffset.left<s.scrollSensitivity&&(n.scrollParent[0].scrollLeft=o=n.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(t.pageY-e(document).scrollTop()<s.scrollSensitivity?o=e(document).scrollTop(e(document).scrollTop()-s.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<s.scrollSensitivity&&(o=e(document).scrollTop(e(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(t.pageX-e(document).scrollLeft()<s.scrollSensitivity?o=e(document).scrollLeft(e(document).scrollLeft()-s.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<s.scrollSensitivity&&(o=e(document).scrollLeft(e(document).scrollLeft()+s.scrollSpeed)))),!1!==o&&e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(t,i){var n=e(this).data("draggable"),s=n.options;n.snapElements=[],e(s.snap.constructor!=String?s.snap.items||":data(draggable)":s.snap).each(function(){var t=e(this),i=t.offset();this!=n.element[0]&&n.snapElements.push({item:this,width:t.outerWidth(),height:t.outerHeight(),top:i.top,left:i.left})})},drag:function(t,i){for(var n=e(this).data("draggable"),s=n.options,o=s.snapTolerance,a=i.offset.left,r=a+n.helperProportions.width,l=i.offset.top,d=l+n.helperProportions.height,c=n.snapElements.length-1;c>=0;c--){var u=n.snapElements[c].left,h=u+n.snapElements[c].width,p=n.snapElements[c].top,m=p+n.snapElements[c].height;if(u-o<a&&a<h+o&&p-o<l&&l<m+o||u-o<a&&a<h+o&&p-o<d&&d<m+o||u-o<r&&r<h+o&&p-o<l&&l<m+o||u-o<r&&r<h+o&&p-o<d&&d<m+o){if("inner"!=s.snapMode){var f=Math.abs(p-d)<=o,g=Math.abs(m-l)<=o,v=Math.abs(u-r)<=o,y=Math.abs(h-a)<=o;f&&(i.position.top=n._convertPositionTo("relative",{top:p-n.helperProportions.height,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:m,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u-n.helperProportions.width}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h}).left-n.margins.left)}var b=f||g||v||y;if("outer"!=s.snapMode){var f=Math.abs(p-l)<=o,g=Math.abs(m-d)<=o,v=Math.abs(u-a)<=o,y=Math.abs(h-r)<=o;f&&(i.position.top=n._convertPositionTo("relative",{top:p,left:0}).top-n.margins.top),g&&(i.position.top=n._convertPositionTo("relative",{top:m-n.helperProportions.height,left:0}).top-n.margins.top),v&&(i.position.left=n._convertPositionTo("relative",{top:0,left:u}).left-n.margins.left),y&&(i.position.left=n._convertPositionTo("relative",{top:0,left:h-n.helperProportions.width}).left-n.margins.left)}!n.snapElements[c].snapping&&(f||g||v||y||b)&&n.options.snap.snap&&n.options.snap.snap.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=f||g||v||y||b}else n.snapElements[c].snapping&&n.options.snap.release&&n.options.snap.release.call(n.element,t,e.extend(n._uiHash(),{snapItem:n.snapElements[c].item})),n.snapElements[c].snapping=!1}}}),e.ui.plugin.add("draggable","stack",{start:function(t,i){var n=e(this).data("draggable").options,s=e.makeArray(e(n.stack)).sort(function(t,i){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(i).css("zIndex"),10)||0)});if(s.length){var o=parseInt(s[0].style.zIndex)||0;e(s).each(function(e){this.style.zIndex=o+e}),this[0].style.zIndex=o+s.length}}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,i){var n=e(i.helper),s=e(this).data("draggable").options;n.css("zIndex")&&(s._zIndex=n.css("zIndex")),n.css("zIndex",s.zIndex)},stop:function(t,i){var n=e(this).data("draggable").options;n._zIndex&&e(i.helper).css("zIndex",n._zIndex)}})}),define("components/tr-video",["jquery","version!fly/managers/debug","managers/page-vars","utils/cookie","managers/edition","managers/tealium","managers/components","version!fly/utils/url-helper","managers/device","managers/client-storage","managers/uvpjs","translations/video","components/video-controls","version!fly/components/base","version!libs/lazyload","version!libs/jquery/ui/jquery.ui.position","version!libs/jquery/ui/jquery.ui.draggable"],function(e,t,i,n,s,o,a,r,l,d,c,u){t=t.init("trVideo"),i.services.video.enabled&&(window.mpulseUserTiming={trvideocreate:0,playerloaded:0,showplayoverlay:0,adstart:0,adend:0,contentstart:0},e.widget("tr.trVideo",e.fly.base,{options:{autoplay:!1,playerWrapperId:"",controlsCss:"/css/video/htmlPlayerControls/controls.css",playFullScreen:!1,prepend:!1,timelineContainer:null,uvpPartner:"techrepublic",playerName:"trVideo",vidInfoContainer:!1,initialPageLoad:!0,canonicalProtocol:"https:"},config:null,playerType:null,playlist:null,video:null,videoEnded:!1,videoAdEnded:!1,containerId:null,playerId:null,imaId:null,$playerContainer:null,$videoPromo:null,$normalControls:null,player:null,assetType:null,isAd:!1,isAdSuppress:!1,isPlaying:!1,playbackStarted:!1,isLoading:!0,progressInstanceCounter:0,lastPercentComplete:0,currentDuration:0,chapterData:[],mutedAutoplay:!1,mutedPlays:0,mutedPlaysTotal:0,blurredVideoCount:0,blurredVideoCountThreshold:null,windowHasFocus:!0,startingNewPlaylist:!1,_create:function(s){var o=(this.options,this);t.log("player",this.options),t.log("videos",this.options.videos),this._setup(),this.$playerContainer=this.$element.parent(),this.$normalControls=this.$playerContainer.find('[data-component="videoControls"]'),this.$videoPromo=this.$playerContainer.find(".videoPromo");var a=window.uvpjs.mediaCapabilities;if(!(a.canPlayType("video/mp4")||a.canPlayNativeHLS()||a.canPlayHLSJS()))return t.error("This device is unable to play supported video types."),this._stopLoading(),this.$element.html('<h3 class="cannotPlay">'+u.cannotPlay+"</h3>"),!1;var a=window.uvpjs.mediaCapabilities;if("string"==typeof a.getBrowserName()&&"firefox"==a.getBrowserName().toLowerCase()&&a.getBrowserMajorVersion()<42)return this.$element.parent().find(".videoControls").remove(),this.$element.parent().find(".playerContainer").remove(),this.$element.parent().find(".overlays").hide(),this.$element.parent().find(".videoPromo").hide(),this.$element.parent().addClass("pausedAtStartup"),this.displayAlert(u.firefoxUpgrade.title,u.firefoxUpgrade.message),!1;if(this.options.prepend&&i.video.prepend&&!n.read("viewedPrepend")?(this.options.videos.unshift(i.video.prepend),n.write("viewedPrepend","1",{expires:1})):this.$element.find(".prepend.videoPromo").remove(),t.log("video info",this.video),this.playlist=this.options.videos,this.video=this.playlist[0],this.playerType="html",this.pageType=i.tracking.data.pageType,this.testGroup=i.tracking.data.testGroup,this.testName=i.tracking.data.testName,t.log("A/B Test info:",this.testName,this.testGroup),(l.isMobileUserAgent()||l.isIPad()||"mobile"==i.tracking.data.deviceType||"mobile"===i.tracking.data.deviceType)&&(this.options.autoplay=!1),this.isAdSuppress="on"===r.getParam("adSuppress"),this.config=this.options.config,t.log("config",this.config),this._createVideoContainer(),window.TRFunctions.gdpr_consent_callback("script_video",function(){require(["optional!"+(i.services.googleima&&i.services.googleima.enabled?"google-ima":"feature-disabled"),"comscore-video"],function(){o._initIframeTracking(),o.trackPerformanceEvent("trvideocreate"),o._initUVP()}),i.services.mpulse.enabled&&require(["optional!version!libs/mpulse"],function(e){window.mPulseApp=e.init("5VS23-BHL36-JUED4-78U6Z-ZT97H","4fdc7002-fadc-4bd1-8244-c640e9960b3c")})}),"video_capping"===this.testName){switch(this.testGroup){case"a":this.mutedPlaysTotal=3;break;case"b":this.mutedPlaysTotal=5;break;case"c":this.mutedPlaysTotal=10}t.log("Capping muted videos at "+this.mutedPlaysTotal)}"video_focus"===o.testName&&e.inArray(o.testGroup,["a","b"])>-1&&("a"===o.testGroup?o.blurredVideoCountThreshold=5:"b"===o.testGroup&&(o.blurredVideoCountThreshold=10),this.$window.on("blur."+this.id,function(e){o.windowHasFocus=!1}),this.$window.on("focus."+this.id,function(e){o.windowHasFocus=!0,o.blurredVideoCount=0,o.playlistPaused&&o._resumePlaylist()}))},_initializeAutoplaySound:function(n){var s=this,o=null===d.read("autoplayEnabled")?"on":d.read("autoplayEnabled");return this.$normalControls.data().videoControlsOptions&&-1===e.inArray("autoplay",this.$normalControls.data().videoControlsOptions.controls)&&(o="on"),"mobile"===i.tracking.data.deviceType&&(o="off"),void 0===n||n.supportsUnmutedAutoplay||(this.mutedAutoplay="on"===o&&!n.supportsUnmutedAutoplay),n.supportsUnmutedAutoplay||n.supportsMutedAutoplay||(this.options.autoplay=!1,this.mutedAutoplay=!1),t.log("mutedAutoplay",this.mutedAutoplay),this.$normalControls.on("mute",function(e,i){t.log("mutedAutoplay",i),s.mutedAutoplay=i.mutedAutoplay}),t.log("mutedAutoplay",this.mutedAutoplay),t.log("autoplay",this.options.autoplay),{enableMutedAutoplay:this.mutedAutoplay,enableUnMutedAutoplay:this.options.autoplay}},_initIframeTracking:function(){if("video_share"==window.trPageVars.pageType)if(window.location!==window.parent.location)try{window.utag_data=window.parent.utag_data,i=window.parent.trPageVars,t.log("updated TrPageVars",i)}catch(e){t.log("Couldn't get TrPageVars from parent")}else t.log("page is not in iFrame");else t.log("page is not a share page")},_initTrackingData:function(){var t=[];void 0!==this.video.author&&null!==this.video.author&&this.video.author.firstName&&this.video.author.lastName&&t.push(this.video.author.firstName+" "+this.video.author.lastName),void 0!==this.video.moreAuthors&&null!==this.video.moreAuthors&&e.each(this.video.moreAuthors,function(e,i){i.firstName&&i.lastName&&t.push(i.firstName+" "+i.lastName)});var i=null;t.length>0&&(i=t.join(",").toLowerCase()),this.player.setPageContextMetadata(o.getHbParams({videoAuthor:i}))},_createVideoContainer:function(){this.containerId=c.createPlayerId(),this.$element.attr("id",this.containerId),this.playerId=this.containerId+"_player",this.imaId=this.containerId+"_ima",this.$element.append('<div class="playerContainer"></div>'),this.$element.find(".playerContainer").append('<div id="'+this.playerId+'" style="height:100%"></div>'),this.$element.append('<div class="playerMessaging" style="display:none"></div>'),"html"==this.playerType&&(this.$element.find("#"+this.playerId).addClass("hi5"),this.$element.find(".playerContainer").append('<div id="'+this.imaId+'"></div>'))},_createUvpOpts:function(){t.log("_createUvpOpts"),this.config.modules.push({name:"UVPJSDebug",category:"internal",enabled:document.location.search.indexOf("trVideo")>0,params:[{name:"showAll",value:!0}]});var e={capLevelToPlayerSize:!0,partner:this.options.uvpPartner,netwk:"techrepublic",cms:"platform",uvpc:this.config,usesIMA:!0,skin:!1};return t.log("uvp_sOpts",e),e},play:function(){t.log("Play"),this.player&&this._setPlaylist(this.playlist)},playNextVideo:function(){t.log("playNextVideo"),this.startingNewPlaylist=!0;var e=this._getNextVideo(this.video.id);this.playVideoClip(e)},playPreviousVideo:function(){t.log("playPreviousVideo"),this.startingNewPlaylist=!0;var e=this._getPreviousVideo(this.video.id);this.playVideoClip(e)},_initUVP:function(){t.log("_initUVP",this.containerId);var i=this;c.init(i._createUvpOpts(),e.proxy(i.onVideoManagerReady,i))},onVideoManagerReady:function(i){var n=this;t.log("onVideoManagerReady",c),t.log("systemInfo",i);var s=this._initializeAutoplaySound(i);t.log("Player Options",s),c.createVideoPlayer(n.playerId,e.proxy(n.onVideoPlayerReady,n),s)},onVideoPlayerReady:function(i){t.log("onVideoPlayerReady: "+this.eventNs("Events"));var n=this;this.player=i,this.$playerContainer.addClass("playerLoaded"),i.setPageContextMetadata(o.getHbParams());var s=window.uvpjs.EventType;if(i.addEventListener(this.eventNs(s.RESOURCE_START),e.proxy(n.onResourceStart,n)),i.addEventListener(this.eventNs(s.RESOURCE_END),e.proxy(n.onResourceEnd,n)),i.addEventListener(this.eventNs(s.AD_START),e.proxy(n.onAdStart,n)),i.addEventListener(this.eventNs(s.AD_END),e.proxy(n.onAdEnd,n)),i.addEventListener(this.eventNs(s.AD_POD_START),e.proxy(this.onAdPodStart,this)),i.addEventListener(this.eventNs(s.CONTENT_START),e.proxy(n.onContentStart,n)),i.addEventListener(this.eventNs(s.CONTENT_END),e.proxy(n.onContentEnd,n)),i.addEventListener(this.eventNs(s.VIDEO_PROGRESS),e.proxy(n.onVideoProgress,n)),i.addEventListener(this.eventNs(s.VIDEO_STATE_CHANGE),e.proxy(n.onStateChange,n)),i.addEventListener(this.eventNs(s.PLAYER_START_ERROR),e.proxy(n.onVideoError,n)),i.addEventListener(this.eventNs(s.VIDEO_START_ERROR),e.proxy(n.onVideoError,n)),i.addEventListener(this.eventNs(s.VIDEO_PLAYBACK_ERROR),e.proxy(n.onVideoError,n)),i.addEventListener(this.eventNs(s.AD_ERROR),e.proxy(n.onVideoError,n)),parent.window)try{parent.$(parent.document).trigger("onIframePlayerLoaded_cbsi",[this.video.id])}catch(e){t.log("error: ",e)}this.trackPerformanceEvent("playerloaded"),this.trackPerformanceEvent("playerloaded"+this.playerType.toLowerCase()),this._initTrackingData(),this.$videoPromo.on("click",function(i){t.log("Promo Click",i),e(this).hide(),n.trackPerformanceEvent("playclick"),n.hasPlayed=!0,n.mutedPlays=0,!0===n.options.playFullScreen?(n.playbackStarted?n.unpause():(t.log("onVideoPlayerReady: onPreviewButton"),n.onPreviewButton(e.proxy(n.play,n))),n.$normalControls.videoControls("enterFullScreen")):(n.$element.find(".playerContainer","#"+n.playerId).css("visibility","visible"),t.log("onVideoPlayerReady: onPreviewButton"),n.playbackStarted?n.unpause():(t.log("onVideoPlayerReady: onPreviewButton"),n.onPreviewButton(e.proxy(n.play,n)))),n.playbackStarted=!0}),!0===this.options.autoplay?(t.log("onVideoPlayerReady: play video"),this.play()):(t.log("onVideoPlayerReady: show playOverlay"),n._lazyLoadImages(),this.$videoPromo.show(),this._stopLoading(),this.$element.find(".playerContainer","#"+this.playerId).css("visibility","hidden"),this.trackPerformanceEvent("showplayoverlay")),this._relayEvent("onVideoPlayerReady",{player:i,element:this.$element})},getPlayerInfo:function(){return{player:this.player,element:this.$element}},eventNs:function(e){return e+"."+this.playerId+"."+this.options.playerName},onPreviewButton:function(i){if(void 0===i){var n=this;i=e.proxy(n.play,n)}t.log("onPreviewButton",i),this.player.onPreviewButton(i),!0===this.options.playFullScreen?this.$normalControls.videoControls("enterFullScreen"):(this.playlistPaused||this.$videoPromo.hide(),this.$element.find(".playerContainer","#"+this.playerId).css("visibility","visible"))},onAdPodStart:function(e){this.adPodStartTimestamp=Date.now(),this.isInstanceEvent(e)&&(t.log("onAdPodStart: ",e),this._relayEvent("onAdPodStart",e),this.trackPerformanceEvent("adpodstart"))},onAdStart:function(e){this.isInstanceEvent(e)&&(t.log("onAdStart: ",this.video),this._relayEvent("onAdStart",e),this.videoAdEnded=!1,this.isAd=!0,this.trackPerformanceEvent("adstart"))},onAdEnd:function(e){this.isInstanceEvent(e)&&(t.log("onAdEnd",e),this._relayEvent("onAdEnd",e))},onContentStart:function(e){this.isInstanceEvent(e)&&(t.log("onContentStart",e),this._relayEvent("onContentStart",e),this.trackPerformanceEvent("contentstart"),this.isAd=!1,this.videoEnded=!1,this._startLoading())},onContentEnd:function(e){this.isInstanceEvent(e)&&(this.blurredVideoCount++,this.videoEnded&&(t.log("onContentEnd_cbsi"),this._relayEvent("onContentEnd_cbsi"),this.trackPerformanceEvent("contentend")))},onResourceStart:function(e){this.isInstanceEvent(e)&&(this.startingNewPlaylist=!1,t.log("onResourceStart: ",e),this.video=this._getVideoFromPlaylist(e.payload.rco.id)||e.payload.rco,this._initTrackingData(),this._lazyLoadImages(),this._updateVideoInfoHtml(),this._updateMetadata(),this._startLoading(),this._relayEvent("onResourceStart",this.video))},onResourceEnd:function(i){if(this.isInstanceEvent(i))if(t.log("onResourceEnd: ",i),this._relayEvent("onResourceEnd",i),"video_capping"===this.testName&&"control"!==this.testGroup&&this.mutedAutoplay){if(this.mutedPlays+=1,this.mutedPlays>=this.mutedPlaysTotal)return t.log("Muted video cap reached at "+this.mutedPlaysTotal),void this._pausePlaylist()}else if("video_focus"===this.testName&&e.inArray(this.testGroup,["a","b"])>-1){if(!this.windowHasFocus&&this.blurredVideoCount%this.blurredVideoCountThreshold==0)return t.log("onResourceEnd: paused out of focus playlist after "+this.blurredVideoCountThreshold+" videos"),void this._pausePlaylist()}else if(0===i.payload.playlistLength&&!this.startingNewPlaylist){var n=this.playlist[this.playlist.length-1];i.payload.rco&&i.payload.rco.id===n.id&&this._setPlaylist(this.playlist)}},onVideoProgress:function(e){if(this.isInstanceEvent(e)){if(this._stopLoading(),this._relayEvent("onVideoProgress",e),parent.window)try{parent.$(parent.document).trigger("onIframeVideoProgress",[this.video.id])}catch(e){t.log("error: ",e)}this.currentDuration=e.payload.duration;var i=e.payload.currentTime,n=[75,50,25],s=100*i/this.currentDuration;for(var o in n)if(s>=n[o]&&this.lastPercentComplete<n[o])break;if(this.lastPercentComplete=s,this.currentDuration-i<=2&&(this.isAd||this.videoEnded?this.isAd&&!this.videoAdEnded&&(this.videoAdEnded=!0):this.videoEnded=!0),!1===this.isAd){var a=1e3*Math.round(i);if(a){var r="time"+a.toString();this.chapterData[r]&&!1===this.chapterData[r].hasSeen&&(t.log("timelineEvent",this.chapterData[r]),this.chapterData[r].hasSeen=!0,this._relayEvent("timelineEvent",this.chapterData[r],this.options.timeLineContainer))}}}},_updateVideoInfoHtml:function(){if(this.options.vidInfoContainer){var t=e(this.options.vidInfoContainer);try{t.find("[data-video-info-title]").text(this.video.title||""),e.get("/videos/video-details-xhr/"+this.video.slug+"/",function(e){t.html(e),a.process(t)}.bind(this),"html")}catch(e){}}this.$playerContainer.find("[data-video-info-title]").text(this.video.title||"")},canPlayHls:function(){return void 0!==(window.MediaSource||window.WebKitMediaSource)||!0===window.uvpjs.mediaCapabilities.canPlayNativeHLS()},_getMediaUrl:function(e){var t=window.uvpjs.mediaCapabilities,i=!l.isAndroid()&&(t.canPlayNativeHLS()||t.canPlayHLSJS()),n=e.mp4;if(i&&e.m3u8){var s="ott";l.isMobileUserAgent()||l.isIPhone()?s="mobile":(l.isIPad()||t.isChromeOS())&&(s="tablet"),n=e.m3u8,n+=-1==n.indexOf("?")?"?":"&",n+="device="+s,n+="&change-to-host=techrepublicmedia.akamaized.net",n+="&secure=true"}else if(l.isAndroid()){var o=new URL(n);o.hostname="techrepublicmedia.akamaized.net",o.protocol="https:",n=o.href}return n},_getPlaylistConfigs:function(e){var i=this,n={};return n=e.map(function(e,t){return{cmsRefGuid:e.id,mediaId:e.id,id:e.id,duration:e.duration,index:t,adCall:"//pubads.g.doubleclick.net/gampad/ads?"+i._getAdUrl(e,t),assetURL:i._getMediaUrl(e),seriesTitle:"ZDNet Video",type:i.isAdSuppress?window.uvpjs.mediaCapabilities.RP_URL:window.uvpjs.mediaCapabilities.RP_IMA,vidContId:i.playerId,videoTitle:e.title,slug:e.slug,closedCaptionPath:e.closedCaptionPath}}),t.log("playlistConfigs",n),n},_getAdUrl:function(n,s){t.log("getAdUrl");var o=this,a="sz={param:sz}&iu=/8264/vaw-techrepublic/{param:device}/{param:partner}&ciu_szs={param:ciu_szs}&impl=s&gdfp_req=1&env=vp&output={param:output}&unviewed_position_start=1&url={param:referrer_url}&description_url={param:referrer_url}&correlator={param:timestamp}&cmsid=2289&vid={param:mpxRefId}&pp={param:pp}&cust_params=",l="vid={param:mpxRefId}&ptype={param:ptype}&vguid={param:vguid}&session={param:session}&subses={param:sub_session}&microsite={param:microsite}&campaign={param:campaign}&cid={param:cid}&collection={param:collection}&mfr={param:mfr}&carrier={param:carrier}&section={param:section}&userGroup={param:userGroup}&tag={param:tag}&edition={param:edition}&test={param:test}&score={param:score}&subcollection={param:subcollection}&topic={param:topic}&sectopic={param:sectopic}",d=i.ads.data.gpt,c={sz:this.mutedAutoplay&&0===s?"640x483":"640x480",device:"mobile"===i.tracking.data.deviceType?"mobile_web":"desktop",partner:"mobile"===i.tracking.data.deviceType?"techrepublic_mobile":"techrepublic",ciu_szs:"300x60",output:"xml_vmap1",microsite:"string"==typeof i.ads.data.gpt.targeting.microsite?i.ads.data.gpt.targeting.microsite:"",campaign:"",referrer_url:location.protocol+"//"+location.host+location.pathname,timestamp:(new Date).getTime(),ptype:i.tracking.data.pageType,vguid:i.guid,session:i.ads.data.gpt.targeting.session,sub_session:i.ads.data.gpt.targeting.subses,cid:i.ads.data.gpt.targeting.cid,collection:i.ads.data.gpt.targeting.collection,subcollection:d.targeting.subcollection,mfr:d.targeting.mfr,carrier:d.targeting.carrier,section:d.targeting.section,userGroup:d.targeting.userGroup,tag:d.targeting.tag,edition:d.targeting.edition,test:d.targeting.test,score:d.targeting.score,feat:d.targeting.feat,mpxRefId:n.mpxRefId,topic:n.primaryTopic.slug,sectopic:n.secondaryTopics,pp:"mobile"===i.tracking.data.deviceType?"ssai":"vpaid_js"};return e.each(r.getAllParams(),function(e,t){var i=e.match(/adTargeting_(.+)/);i&&i[1]?c[i[1]]=t:"adNetwork"===e&&(c.network=t)}),e.each(c,function(e,t){var i=new RegExp("{param:"+e+"}","g");a=a.replace(i,o.cleanVar(t)),l=l.replace(i,o.cleanVar(t))}),a+encodeURIComponent(l)},cleanVar:function(e){return void 0===e||"||"==e?"":e},pause:function(){this.$normalControls.videoControls("pause")},_pausePlaylist:function(){t.log("_pausePlaylist"),this.player.pausePlaylist(),this.playlistPaused=!0,this.$videoPromo.show()},unpause:function(){this.$normalControls.videoControls("unpause"),!0===this.options.playFullScreen&&this.$normalControls.videoControls("enterFullScreen")},_resumePlaylist:function(){t.log("_resumePlaylist"),this.playlistPaused=!1,this.player.resumePlaylist(),this.playNextVideo(),this.$videoPromo.hide()},_setPlaylist:function(e){e.length>0?(t.log("_setPlaylist",e),this.playlist=e,this.player.destroyPlaylist(),this.player.addResourcesToPlaylist(this._getPlaylistConfigs(e))):t.error("No videos found in the playlist.")},appendPlaylist:function(e){e.length>0?(this.playlist=this.playlist.concat(e),this.playbackStarted&&"mobile"!==i.tracking.data.deviceType&&this.player.addResourcesToPlaylist(this._getPlaylistConfigs(e))):t.error("No videos found in the playlist."),t.log("appendPlaylist: new videos",e),t.log("appendPlaylist: new playlist",this.playlist)},_getVideoFromPlaylist:function(e){return this.playlist.filter(function(t){return t.id===e})[0]||null},onStateChange:function(e){if(this.isInstanceEvent(e)){switch(t.log("onStateChange:",e),e.payload.newState){case 0:t.log("onStateChange: stop");break;case 1:t.log("onStateChange: play"),this.$playerContainer.addClass("playbackStarted"),this.isPlaying=!0;break;case 2:t.log("onStateChange: pause"),this.isPlaying=!1}this._relayEvent("onStateChange",e)}},onVideoError:function(i){this.isInstanceEvent(i)&&(t.log("onVideoError",i),this._relayEvent("onVideoError",i),e(window).trigger("techrepublic_video.error"),
i.payload.errorInfo.isFatal&&this.player.destroyPlaylist())},playVideoClip:function(i){var n=this;if(t.log("playVideoClip",i),i.id===this.video.id)return void t.log("playVideoClip: new video id same as current");var s=-1;if(e.each(this.playlist,function(e){if(n.playlist[e].id===i.id)return s=e,!1}),s>-1){var o=this.playlist.slice(s),a=this.playlist.slice(0,s);this.playlist=o.concat(a)}else this.playlist=[i].concat(this.playlist);this._setPlaylist(this.playlist)},_lazyLoadImages:function(){t.log("lazyLoadImages"),this.$element.find("img.lazy").lazyload({failure_limit:2e3,skip_invisible:!1,threshold:200})},trackPerformanceEvent:function(n){t.log("Firing event: techrepublic_video."+n),i.video=i.video||{},i.video.performance=i.video.performance||{},i.video.performance[n]=!0;try{e(window).trigger("techrepublic_video."+n),void 0===performance.getEntriesByName(n)[0]&&(performance.mark("video_"+n),performance.mark("techrepublic_video_"+n))}catch(e){}try{var s=void 0===mpulseUserTiming[n]||0===mpulseUserTiming[n],o=["video","article"].indexOf(i.tracking.data.pageType)>-1;if(s&&o){mpulseUserTiming[n]=performance.now();var a={trvideocreate:["create"],playerloaded:["ploaded","trvideocreate"],adstart:["adStart","playerloaded"],adpodstart:["adPodS","playerloaded"]};window.mPulseApp.setPageGroup(i.tracking.data.soastaPageType),window.mPulseApp.setABTest(i.tracking.data.soastaBucket),window.mPulseApp.setDimension("Site View",i.tracking.data.deviceType),void 0!==window.BOOMR&&window.mPulseApp.getSessionID()!==window.BOOMR.session.ID&&window.mPulseApp.setSessionID(window.BOOMR.session.ID);var r=mpulseUserTiming[n],l=a[n];if(e.isArray(l)){var d=mpulseUserTiming[l[1]]||0;r=mpulseUserTiming[n+"_from_"+l[1]]=mpulseUserTiming[n]-d}var c=e.isArray(l)?l[0]:"";-1===["adstart","trvideocreate"].indexOf(n)&&c&&(window.mPulseApp.sendTimer("video_"+c,r),t.info("mpulse sendTimer","video_"+c,r)),"adstart"===n&&(window.mPulseApp.sendTimer("video_adStart_c",mpulseUserTiming[n]),t.info("mpulse sendTimer","video_adStart_c",mpulseUserTiming[n]))}}catch(e){t.log("mpulse error tracking "+n+": "+e)}},_relayEvent:function(i,n){try{n=void 0!==n?[n]:[],this.$element.trigger(i,n),null!==this.options.timelineContainer&&e(this.options.timelineContainer).trigger(i,[n])}catch(e){t.log("error with listener",e)}},_getNextVideo:function(t){var i=this,n={};return e.each(this.playlist,function(e){if(t===this.id)return n=i.playlist[e+1]||i.playlist[0],!1}),n},_getPreviousVideo:function(t){var i=this,n={};return e.each(this.playlist,function(e){if(t===this.id)return n=i.playlist[e-1]||i.playlist[0],!1}),n},getVideoObj:function(){return this.video},getVideoPlaylist:function(){return this.playlist},_updateMetadata:function(){if(t.log("Updating Metadata"),this.options.initialPageLoad)return this.options.initialPageLoad=!1,void t.log("Skipping Updating Metadata");if("video"!==i.tracking.data.pageType)return!1;var n=window.location.search.slice(1),s=window.location.protocol+"//"+window.location.host+"/videos/"+this.video.slug+"/";n&&(s+="?"+n),window.history.pushState(window.history.state,"",s),document.title=this.video.title+" - TechRepublic";var o=this.options.canonicalProtocol+"//"+location.host+location.pathname;e('link[rel="canonical"]').attr("href",o);var a=e("meta[name='description']");a.length>0&&(a.attr("content",this.video.description.length>145?this.video.description.substr(0,145)+"...":this.video.description),e("meta[property='og:description']").attr("content",a.attr("content"))),e("meta[property='og:url']").attr("content",o),e("meta[property='og:title']").attr("content",this.video.title),e("meta[property='og:image']").attr("content",this.video.previewImg),e("meta[name='twitter:url']").attr("content",o),e("meta[name='twitter:title']").attr("content",this.video.title),e("meta[name='twitter:image']").attr("content",this.video.previewImg)},isInstanceEvent:function(e){return"onVideoProgress"==e.type&&++this.progressInstanceCounter%10==0&&t.log("isInstanceEvent (x10)",e),e.target&&e.target===this.player.vidContId},displayAlert:function(e,i){t.info("displayAlert",e,i),this._stopLoading(),this.hideAlerts(),this.$element.find(".playerMessaging").show(),this.$element.find(".playerMessaging").append('<div class="videoBlocked"><div class="blocked"></div><p class="title">'+e+'</p><p class="message">'+i+"</p></div>")},hideAlerts:function(){this.$element.find(".playerMessaging").children().each(function(){e(this).hide()})},_startLoading:function(){this.isLoading||(this.isLoading=!0,this.$playerContainer.addClass("loading"))},_stopLoading:function(){this.isLoading&&(this.isLoading=!1,this.$playerContainer.removeClass("loading"))}}))}),define("components/taboola",["jquery","version!fly/managers/debug","managers/page-vars","managers/client-storage","version!fly/utils/url-helper","utils/video-delay-helper","version!fly/components/base"],function(e,t,i,n,s,o){t=t.init("taboola"),i.services.taboola.enabled&&e.widget("fly.taboola",e.fly.base,{options:{mode:null,container:null,placement:null,targetType:"mix",referrerUrl:document.referrer,pageType:null,isXhr:!1},initOptions:{},isLoaded:!1,_create:function(){this._super();var e=this;this.options,t.log("Loading Taboola"),this.isLoaded||o.callback("taboola",function(i){i?t.log("Taboola was delayed for video"):t.log("Loading Taboola regardless of video"),e._loadTaboola()})},_loadTaboola:function(){var i=this;this.isLoaded=!0,t.log("Taboola widget created"),window.TRFunctions.gdpr_consent_callback("script_taboola",function(){require(["taboola"],function(n){window._taboola=window._taboola||[];var s=i.options,o=e('link[rel="canonical"]').attr("href");pageType=i._getPageType(),t.log("Page type: "+pageType),i.initOptions[pageType]="auto",o&&(i.initOptions=e.extend(i.initOptions,{url:o})),s.isXhr||i.pushTaboola(),i._setupTracking(s.placement)})})},_getPageType:function(){var e={article:"article",blog_post:"article",blog_list:"category",front_door:"home",hot_topics_door:"category",image_gallery:"photo",video:"video"};t.log("Taboola get page type");var n="other";return e[i.tracking.data.pageType]&&(n=e[i.tracking.data.pageType]),n},pushTaboola:function(){var e=this.options;_taboola.push({mode:e.mode,container:e.container,placement:e.placement,target_type:e.targetType}),_taboola.push(this.initOptions)},_setupTracking:function(t){utag_data.contentWidget&&(t=utag_data.contentWidget+"|"+t),utag_data.contentWidget=t,this.$element.on("click",function(t){omnitureMgr.trackEvent("trackClick",{item:e(this).attr("om-event")})})}})}),define("components/sticky-mpu",["jquery","version!fly/managers/debug","managers/page-vars","managers/waypoints","version!libs/waypoints/jquery.waypoints","version!libs/waypoints/sticky","version!fly/components/base"],function(e,t,i,n){t=t.init("stickyMpu"),n.init(),e.widget("fly.stickyMpu",e.fly.base,{_create:function(){this._setup(),this._setupWaypoints(),t.log("Sticky MPU init")},_setupWaypoints:function(){var i=this,n=this.$element.closest(".row"),s=this.$element.closest(".col-4"),o=0;n.find(".right-rail-bottom-mpu").length>0&&(o=510),new Waypoint.Sticky({element:i.$element,stuckClass:"fixed",offset:function(){return e(document.body).hasClass("skybox-loaded")?200:100}}),n.waypoint({handler:function(e){if("down"==e){t.log(this.element,"Fixing MPU to Bottom of container");var a=n.height()-s.height()-o;t.log("Bottom Height:",a),i.$element.css("bottom",-a+"px"),i.$element.addClass("bottom-fixed")}else"up"==e&&(t.log(this.element,"Unfixing MPU from bottom of container"),i.$element.removeClass("bottom-fixed"),i.$element.css("bottom",""))},offset:function(){return e(document.body).hasClass("skybox-loaded")?-(this.element.clientHeight-i.$element.height()-200):-(this.element.clientHeight-i.$element.height()-100-o)}}),t.log("Sticky MPU waypoints set")}})}),define("pages/article",["main","managers/disqus","components/disqus-count","version!components/social-links","version!fly/components/social-button","version!components/image-gallery","components/tr-video","components/taboola","components/sticky-mpu","version!components/newsletter-subscription"],function(){});